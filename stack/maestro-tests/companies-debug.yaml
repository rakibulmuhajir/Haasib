appId: com.android.chrome
---
- launchApp
- tapOn:
    id: "com.android.chrome:id/url_bar"
- inputText: "http://localhost:8000/login"
- pressKey: Enter

# Wait for login page to load
- waitForAnimationToEnd

# Test login functionality
- assertVisible:
    text: "Email"
- assertVisible:
    text: "Password"

# Enter login credentials
- tapOn:
    id: "email"
- inputText: "admin@example.com"

- tapOn:
    id: "password"
- inputText: "password"

- tapOn:
    text: "Log in"

# Wait for dashboard to load after login
- waitForAnimationToEnd
- assertVisible:
    text: "Dashboard"

# Navigate to companies section
- tapOn:
    text: "Companies"
- waitForAnimationToEnd

# Debug companies page functionality
- assertVisible:
    text: "Companies"

# Test Add Company functionality
- tapOn:
    text: "Add Company"
- waitForAnimationToEnd

# Check if company form appears
- assertVisible:
    text: "Company Name"

# Fill in company details for testing
- tapOn:
    id: "name"
- inputText: "Test Company LLC"

- tapOn:
    id: "email"
- inputText: "test@company.com"

- tapOn:
    id: "phone"
- inputText: "+1-555-0123"

- tapOn:
    id: "address"
- inputText: "123 Test Street, Test City, TC 12345"

# Test company type selection
- tapOn:
    text: "Company Type"
- tapOn:
    text: "Corporation"

# Test tax ID field
- tapOn:
    id: "tax_id"
- inputText: "12-3456789"

# Test save functionality
- tapOn:
    text: "Save"

# Wait for save to complete
- waitForAnimationToEnd

# Check if company was saved successfully
- assertVisible:
    text: "Test Company LLC"

# Test company search functionality
- tapOn:
    id: "search"
- inputText: "Test Company"

# Verify search results
- assertVisible:
    text: "Test Company LLC"

# Clear search
- tapOn:
    id: "clear-search"

# Test company edit functionality
- longPressOn:
    text: "Test Company LLC"
- tapOn:
    text: "Edit"

# Verify edit form loads
- assertVisible:
    text: "Edit Company"

# Modify company details
- tapOn:
    id: "name"
- clearText
- inputText: "Test Company LLC - Updated"

# Save changes
- tapOn:
    text: "Save"

# Verify update was successful
- assertVisible:
    text: "Test Company LLC - Updated"

# Test company deletion functionality
- longPressOn:
    text: "Test Company LLC - Updated"
- tapOn:
    text: "Delete"

# Confirm deletion
- assertVisible:
    text: "Are you sure"
- tapOn:
    text: "Delete"

# Verify company was deleted
- assertNotVisible:
    text: "Test Company LLC - Updated"

# Test company filtering functionality
- tapOn:
    text: "Filter"
- tapOn:
    text: "Active Companies"

# Verify filter applied
- assertVisible:
    text: "Active"

# Test company export functionality
- tapOn:
    text: "Export"
- tapOn:
    text: "CSV"

# Test pagination if present
- extendedWaitFor:
    text: "Next"
    timeout: 5000

# Test company details view
- tapOn:
    text: "View Details"

# Verify company details page
- assertVisible:
    text: "Company Information"

# Test company contacts section
- assertVisible:
    text: "Contacts"

# Add a contact for testing
- tapOn:
    text: "Add Contact"

- tapOn:
    id: "contact_name"
- inputText: "John Doe"

- tapOn:
    id: "contact_email"
- inputText: "john.doe@testcompany.com"

- tapOn:
    id: "contact_phone"
- inputText: "+1-555-0456"

- tapOn:
    text: "Save Contact"

# Verify contact was added
- assertVisible:
    text: "John Doe"

# Test company settings
- tapOn:
    text: "Settings"

# Test company preferences
- assertVisible:
    text: "Preferences"

# Test company billing information
- tapOn:
    text: "Billing"

- assertVisible:
    text: "Billing Information"

# Test company documents section
- tapOn:
    text: "Documents"

- assertVisible:
    text: "Upload Document"

# Test company reports
- tapOn:
    text: "Reports"

- assertVisible:
    text: "Generate Report"

# Test company activity log
- tapOn:
    text: "Activity Log"

- assertVisible:
    text: "Recent Activity"

# Navigate back to main companies list
- tapOn:
    text: "Back"
- waitForAnimationToEnd

# Test search with invalid input
- tapOn:
    id: "search"
- inputText: "NonExistentCompany123"

# Verify no results message
- assertVisible:
    text: "No companies found"

# Test sort functionality
- tapOn:
    text: "Sort"
- tapOn:
    text: "Name A-Z"

# Verify sorting worked
- extendedWaitFor:
    timeout: 2000

# Test company statistics/metrics if present
- extendedWaitFor:
    text: "Total Companies"
    timeout: 3000

# Test responsive design elements
- rotate: landscape

# Verify landscape mode works
- assertVisible:
    text: "Companies"

- rotate: portrait

# Test error handling - try to save duplicate company
- tapOn:
    text: "Add Company"

- tapOn:
    id: "name"
- inputText: "Existing Company"

- tapOn:
    text: "Save"

# Check for validation errors
- extendedWaitFor:
    text: "already exists"
    timeout: 3000

# Test form validation with empty fields
- tapOn:
    id: "name"
- clearText

- tapOn:
    text: "Save"

# Check for required field validation
- assertVisible:
    text: "required"

# Cancel the form
- tapOn:
    text: "Cancel"

# Test keyboard navigation (if applicable)
- pressKey: Tab
- pressKey: Tab
- pressKey: Enter

# Test accessibility features
- extendedWaitFor:
    text: "Accessibility"
    timeout: 2000

# Final verification - ensure we're still on companies page
- assertVisible:
    text: "Companies"

# Test logout
- tapOn:
    text: "Logout"
- assertVisible:
    text: "Login"

# Generate comprehensive test report
- takeScreenshot: "companies_test_complete"