import{d as Z,q as C,s as A,x as F,c,a as s,u as e,h as ee,w as a,i as w,o as d,j as v,e as i,b as o,t as n,F as U,r as M,f as se}from"./app-B-wLZQl0.js";import{_ as te}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as ae}from"./EmptyState.vue_vue_type_script_setup_true_lang-CrAvLLsO.js";import{_ as le}from"./DataTable.vue_vue_type_script_setup_true_lang-BQW8AXQk.js";import{_ as $}from"./index-a73qSWOM.js";import{_ as f}from"./index-D8JUok4n.js";import{_ as oe}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{_ as z}from"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import{_ as N,a as T,b as q,c as E,d as O}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DUuIDTHQ.js";import{_ as H}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CLZwVYr3.js";import{b as S,c as j,d as I,e as R}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import{U as J}from"./users-CkYIFvpU.js";import{U as P}from"./user-plus-DI8dctJm.js";import{M as Q}from"./mail-Cs8h5Q9u.js";import{S as L}from"./shield-BDm12Uif.js";import{S as G}from"./settings-B8OaYlkV.js";import{C as ie}from"./calendar-B0yi2zLg.js";import{A as ne}from"./arrow-left-DSX0n2_N.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./loader-circle-BSwxCoSE.js";import"./createLucideIcon-CbxkoCx6.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./Collection-DN_gmv-a.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./plus-C63jdNg7.js";import"./check-DogY6QNG.js";import"./index-Buy61MQA.js";import"./file-text-CFHWSPvd.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";const re={class:"font-medium text-slate-300"},de={class:"flex flex-col"},me={class:"font-medium text-slate-100"},ue={class:"flex items-center gap-1 text-slate-400"},ce={class:"text-xs"},fe={key:0,class:"flex items-center gap-1 text-slate-300"},pe={key:1,class:"text-slate-500"},_e={class:"flex justify-end gap-2"},ve={class:"flex items-start justify-between"},be={class:"flex-1"},ye={class:"font-medium text-slate-100"},xe={class:"flex items-center gap-1 text-xs text-slate-400 mt-1"},ke={class:"flex items-center gap-3 mt-2"},ge={class:"space-y-4 py-4"},Ce={class:"space-y-2"},$e={class:"capitalize"},he={key:0,class:"text-xs text-red-400"},we={key:0,class:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"},Ue={class:"space-y-4 py-4"},ze={class:"space-y-2"},Se={key:0,class:"text-xs text-red-400"},je={class:"space-y-2"},Ie={class:"capitalize"},Re={key:0,class:"text-xs text-red-400"},Le={key:0,class:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"},_s=Z({__name:"Index",props:{company:{},users:{}},setup(x){const b=x,p=C(""),y=C(!1),_=C(!1),k=C(null),K=A(()=>[{title:"Home",href:"/dashboard"},{title:"Companies",href:"/companies"},{title:b.company.name},{title:"Users"}]),g=A(()=>{if(!p.value)return b.users;const u=p.value.toLowerCase();return b.users.filter(t=>t.name?.toLowerCase().includes(u)||t.email.toLowerCase().includes(u)||t.role.toLowerCase().includes(u))}),V=u=>({owner:"default",admin:"default",accountant:"secondary",viewer:"outline",member:"outline"})[u.toLowerCase()]||"outline",m=F({userId:"",role:""}),r=F({email:"",role:"member"}),B=["owner","admin","accountant","viewer","member"],D=u=>{k.value=u,m.userId=u.id,m.role=u.role,y.value=!0},W=()=>{m.put(`/${b.company.slug}/users/${m.userId}/role`,{onSuccess:()=>{y.value=!1,k.value=null}})},X=()=>{r.post(`/${b.company.slug}/users/invite`,{onSuccess:()=>{r.reset(),_.value=!1}})},Y=[{key:"name",label:"User",sortable:!0},{key:"role",label:"Role",sortable:!0},{key:"is_active",label:"Status",sortable:!0},{key:"joined_at",label:"Joined",sortable:!0},{key:"actions",label:"Actions",class:"text-right"}];return(u,t)=>(d(),c(U,null,[s(e(ee),{title:`Users - ${x.company.name}`},null,8,["title"]),s(te,{title:"Team Members",icon:e(J),breadcrumbs:K.value,"back-button":{label:"Back to Companies",onClick:()=>e(se).visit("/companies"),icon:e(ne)},searchable:"",search:p.value,"onUpdate:search":t[7]||(t[7]=l=>p.value=l),"search-placeholder":"Search users by name, email, or role..."},{description:a(()=>[t[8]||(t[8]=i(" Manage users for ",-1)),o("span",re,n(x.company.name),1)]),actions:a(()=>[s(e(f),{size:"sm",onClick:t[0]||(t[0]=l=>_.value=!0)},{default:a(()=>[s(e(P),{class:"mr-2 h-4 w-4"}),t[9]||(t[9]=i(" Invite User ",-1))]),_:1})]),default:a(()=>[g.value.length===0?(d(),w(ae,{key:0,icon:e(J),title:"No users found",description:p.value?"Try adjusting your search terms":"This company has no team members yet"},{actions:a(()=>[p.value?v("",!0):(d(),w(e(f),{key:0,onClick:t[1]||(t[1]=l=>_.value=!0),size:"sm"},{default:a(()=>[s(e(P),{class:"mr-2 h-4 w-4"}),t[10]||(t[10]=i(" Invite User ",-1))]),_:1}))]),_:1},8,["icon","description"])):(d(),w(le,{key:1,data:g.value,columns:Y,title:"Team Members",description:`${g.value.length} ${g.value.length===1?"user":"users"} in this company`,"key-field":"id"},{"cell-name":a(({row:l})=>[o("div",de,[o("span",me,n(l.name||"Unknown"),1),o("div",ue,[s(e(Q),{class:"h-3 w-3"}),o("span",ce,n(l.email),1)])])]),"cell-role":a(({row:l})=>[s(e($),{variant:V(l.role),class:"capitalize"},{default:a(()=>[s(e(L),{class:"mr-1 h-3 w-3"}),i(" "+n(l.role),1)]),_:2},1032,["variant"])]),"cell-is_active":a(({row:l})=>[s(e($),{variant:l.is_active?"default":"secondary"},{default:a(()=>[i(n(l.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),"cell-joined_at":a(({row:l})=>[l.joined_at?(d(),c("div",fe,[s(e(ie),{class:"h-3 w-3"}),o("span",null,n(new Date(l.joined_at).toLocaleDateString()),1)])):(d(),c("span",pe,"—"))]),"cell-actions":a(({row:l})=>[o("div",_e,[s(e(S),null,{default:a(()=>[s(e(j),{"as-child":""},{default:a(()=>[s(e(f),{size:"sm",variant:"ghost"},{default:a(()=>[s(e(G),{class:"h-4 w-4"})]),_:1})]),_:1}),s(e(I),{align:"end"},{default:a(()=>[s(e(R),{onClick:h=>D(l)},{default:a(()=>[s(e(L),{class:"mr-2 h-4 w-4"}),t[11]||(t[11]=i(" Change Role ",-1))]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)])]),"mobile-card":a(({row:l})=>[o("div",ve,[o("div",be,[o("div",ye,n(l.name||"Unknown"),1),o("div",xe,[s(e(Q),{class:"h-3 w-3"}),o("span",null,n(l.email),1)]),o("div",ke,[s(e($),{variant:V(l.role),size:"sm",class:"capitalize"},{default:a(()=>[s(e(L),{class:"mr-1 h-3 w-3"}),i(" "+n(l.role),1)]),_:2},1032,["variant"]),s(e($),{variant:l.is_active?"default":"secondary",size:"sm"},{default:a(()=>[i(n(l.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])])]),s(e(f),{size:"sm",variant:"ghost",onClick:h=>D(l)},{default:a(()=>[s(e(G),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),_:1},8,["data","description"])),s(e(N),{open:y.value,"onUpdate:open":t[3]||(t[3]=l=>y.value=l)},{default:a(()=>[s(e(T),{class:"sm:max-w-md"},{default:a(()=>[s(e(q),null,{default:a(()=>[s(e(E),{class:"text-slate-100"},{default:a(()=>[...t[12]||(t[12]=[i("Change User Role",-1)])]),_:1}),s(e(O),{class:"text-slate-400"},{default:a(()=>[i(" Update the role for "+n(k.value?.name||k.value?.email),1)]),_:1})]),_:1}),o("div",ge,[o("div",Ce,[s(e(z),{class:"text-slate-200"},{default:a(()=>[...t[13]||(t[13]=[i("Role",-1)])]),_:1}),s(e(S),null,{default:a(()=>[s(e(j),{"as-child":""},{default:a(()=>[s(e(f),{variant:"outline",class:"w-full justify-between"},{default:a(()=>[o("span",$e,n(e(m).role),1),t[14]||(t[14]=o("span",{class:"ml-2"},"▼",-1))]),_:1})]),_:1}),s(e(I),{class:"w-full"},{default:a(()=>[(d(),c(U,null,M(B,l=>s(e(R),{key:l,onClick:h=>e(m).role=l,class:"capitalize"},{default:a(()=>[i(n(l),1)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1}),e(m).errors.role?(d(),c("p",he,n(e(m).errors.role),1)):v("",!0)])]),s(e(H),null,{default:a(()=>[s(e(f),{variant:"outline",onClick:t[2]||(t[2]=l=>y.value=!1),disabled:e(m).processing},{default:a(()=>[...t[15]||(t[15]=[i(" Cancel ",-1)])]),_:1},8,["disabled"]),s(e(f),{onClick:W,disabled:e(m).processing},{default:a(()=>[e(m).processing?(d(),c("span",we)):v("",!0),t[16]||(t[16]=i(" Update Role ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),s(e(N),{open:_.value,"onUpdate:open":t[6]||(t[6]=l=>_.value=l)},{default:a(()=>[s(e(T),{class:"sm:max-w-md"},{default:a(()=>[s(e(q),null,{default:a(()=>[s(e(E),{class:"text-slate-100"},{default:a(()=>[...t[17]||(t[17]=[i("Invite User",-1)])]),_:1}),s(e(O),{class:"text-slate-400"},{default:a(()=>[i(" Send an invitation to join "+n(x.company.name),1)]),_:1})]),_:1}),o("div",Ue,[o("div",ze,[s(e(z),{for:"email",class:"text-slate-200"},{default:a(()=>[...t[18]||(t[18]=[i("Email",-1)])]),_:1}),s(e(oe),{id:"email",modelValue:e(r).email,"onUpdate:modelValue":t[4]||(t[4]=l=>e(r).email=l),type:"email",placeholder:"user@example.com",class:"bg-slate-950/50 border-slate-700"},null,8,["modelValue"]),e(r).errors.email?(d(),c("p",Se,n(e(r).errors.email),1)):v("",!0)]),o("div",je,[s(e(z),{class:"text-slate-200"},{default:a(()=>[...t[19]||(t[19]=[i("Role",-1)])]),_:1}),s(e(S),null,{default:a(()=>[s(e(j),{"as-child":""},{default:a(()=>[s(e(f),{variant:"outline",class:"w-full justify-between"},{default:a(()=>[o("span",Ie,n(e(r).role),1),t[20]||(t[20]=o("span",{class:"ml-2"},"▼",-1))]),_:1})]),_:1}),s(e(I),{class:"w-full"},{default:a(()=>[(d(),c(U,null,M(B,l=>s(e(R),{key:l,onClick:h=>e(r).role=l,class:"capitalize"},{default:a(()=>[i(n(l),1)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1}),e(r).errors.role?(d(),c("p",Re,n(e(r).errors.role),1)):v("",!0)])]),s(e(H),null,{default:a(()=>[s(e(f),{variant:"outline",onClick:t[5]||(t[5]=l=>_.value=!1),disabled:e(r).processing},{default:a(()=>[...t[21]||(t[21]=[i(" Cancel ",-1)])]),_:1},8,["disabled"]),s(e(f),{onClick:X,disabled:e(r).processing},{default:a(()=>[e(r).processing?(d(),c("span",Le)):v("",!0),t[22]||(t[22]=i(" Send Invitation ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1},8,["icon","breadcrumbs","back-button","search"])],64))}});export{_s as default};
