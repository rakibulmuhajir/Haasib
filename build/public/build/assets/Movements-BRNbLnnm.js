import{d as R,q as c,s as O,c as b,a as o,u as l,h as P,w as r,b as f,i as v,e as u,o as i,F as h,r as x,t as y,B as W,A as H,f as w}from"./app-B-wLZQl0.js";import{_ as Q}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as z}from"./EmptyState.vue_vue_type_script_setup_true_lang-CrAvLLsO.js";import{_ as E}from"./DataTable.vue_vue_type_script_setup_true_lang-BQW8AXQk.js";import{_ as G}from"./index-a73qSWOM.js";import{_ as J}from"./index-D8JUok4n.js";import{_ as V}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{_ as A,a as C,b as T,c as D,d as _}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{c as $}from"./createLucideIcon-CbxkoCx6.js";import{A as K}from"./arrow-left-DSX0n2_N.js";import{A as X}from"./arrow-right-left-CFtESBWp.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./Collection-DN_gmv-a.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./plus-C63jdNg7.js";import"./check-DogY6QNG.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./file-text-CFHWSPvd.js";import"./users-CkYIFvpU.js";import"./calendar-B0yi2zLg.js";import"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";import"./loader-circle-BSwxCoSE.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./nullish-CHIgUVhi.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=$("CircleArrowDownIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=$("CircleArrowUpIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=$("HistoryIcon",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),ee={class:"mb-6 flex flex-wrap items-center gap-4"},te={class:"flex items-center gap-2"},Fe=R({__name:"Movements",props:{company:{},movements:{},warehouses:{},filters:{}},setup(n){const s=n,m=c(s.filters.warehouse_id||"all"),d=c(s.filters.movement_type||"all"),g=c(s.filters.date_from),k=c(s.filters.date_to),S=[{title:"Dashboard",href:`/${s.company.slug}`},{title:"Stock Levels",href:`/${s.company.slug}/stock`},{title:"Movements",href:`/${s.company.slug}/stock/movements`}],p=()=>{w.get(`/${s.company.slug}/stock/movements`,{warehouse_id:m.value==="all"?"":m.value,movement_type:d.value==="all"?"":d.value,date_from:g.value,date_to:k.value},{preserveState:!0})},M=e=>(e>0?"+":"")+new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:3}).format(e),B=e=>e.includes("in")||e==="purchase"||e==="opening"?Z:e.includes("out")||e==="sale"?Y:e.includes("transfer")?X:I,U=e=>e.includes("in")||e==="purchase"||e==="opening"?"success":e.includes("out")||e==="sale"?"destructive":"secondary",q=e=>e.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase()),L=[{key:"date",label:"Date"},{key:"item",label:"Item"},{key:"warehouse",label:"Warehouse"},{key:"type",label:"Type"},{key:"quantity",label:"Quantity"},{key:"by",label:"By"}],F=O(()=>s.movements.data.map(e=>({id:e.id,date:new Date(e.movement_date).toLocaleDateString(),item:`${e.item.sku} - ${e.item.name}`,item_id:e.item.id,warehouse:e.warehouse.name,type:e.movement_type,quantity:M(e.quantity),by:e.created_by?.name??"-",_raw:e}))),j=e=>{w.get(`/${s.company.slug}/items/${e.item_id}`)},N=[{value:"purchase",label:"Purchase"},{value:"sale",label:"Sale"},{value:"adjustment_in",label:"Adjustment In"},{value:"adjustment_out",label:"Adjustment Out"},{value:"transfer_in",label:"Transfer In"},{value:"transfer_out",label:"Transfer Out"},{value:"return_in",label:"Return In"},{value:"return_out",label:"Return Out"},{value:"opening",label:"Opening"}];return(e,a)=>(i(),b(h,null,[o(l(P),{title:"Stock Movements"}),o(Q,{title:"Stock Movements",breadcrumbs:S},{actions:r(()=>[o(l(J),{variant:"outline",onClick:a[0]||(a[0]=t=>l(w).get(`/${n.company.slug}/stock`))},{default:r(()=>[o(l(K),{class:"mr-2 h-4 w-4"}),a[5]||(a[5]=u(" Back to Stock ",-1))]),_:1})]),default:r(()=>[f("div",ee,[o(l(A),{modelValue:m.value,"onUpdate:modelValue":[a[1]||(a[1]=t=>m.value=t),p]},{default:r(()=>[o(l(C),{class:"w-[180px]"},{default:r(()=>[o(l(T),{placeholder:"All Warehouses"})]),_:1}),o(l(D),null,{default:r(()=>[o(l(_),{value:"all"},{default:r(()=>[...a[6]||(a[6]=[u("All Warehouses",-1)])]),_:1}),(i(!0),b(h,null,x(n.warehouses,t=>(i(),v(l(_),{key:t.id,value:t.id},{default:r(()=>[u(y(t.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),o(l(A),{modelValue:d.value,"onUpdate:modelValue":[a[2]||(a[2]=t=>d.value=t),p]},{default:r(()=>[o(l(C),{class:"w-[180px]"},{default:r(()=>[o(l(T),{placeholder:"All Types"})]),_:1}),o(l(D),null,{default:r(()=>[o(l(_),{value:"all"},{default:r(()=>[...a[7]||(a[7]=[u("All Types",-1)])]),_:1}),(i(),b(h,null,x(N,t=>o(l(_),{key:t.value,value:t.value},{default:r(()=>[u(y(t.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"]),f("div",te,[o(l(V),{modelValue:g.value,"onUpdate:modelValue":a[3]||(a[3]=t=>g.value=t),type:"date",class:"w-[150px]",onChange:p},null,8,["modelValue"]),a[8]||(a[8]=f("span",{class:"text-muted-foreground"},"to",-1)),o(l(V),{modelValue:k.value,"onUpdate:modelValue":a[4]||(a[4]=t=>k.value=t),type:"date",class:"w-[150px]",onChange:p},null,8,["modelValue"])])]),n.movements.data.length===0?(i(),v(z,{key:0,title:"No movements found",description:"Stock movements will appear here as inventory changes.",icon:l(I)},null,8,["icon"])):(i(),v(E,{key:1,columns:L,data:F.value,pagination:{currentPage:n.movements.current_page,lastPage:n.movements.last_page,perPage:n.movements.per_page,total:n.movements.total},onRowClick:j},{"cell-type":r(({row:t})=>[o(l(G),{variant:U(t.type),class:"gap-1"},{default:r(()=>[(i(),v(H(B(t.type)),{class:"h-3 w-3"})),u(" "+y(q(t.type)),1)]),_:2},1032,["variant"])]),"cell-quantity":r(({row:t})=>[f("span",{class:W(t._raw.quantity>0?"text-green-600":"text-red-600")},y(t.quantity),3)]),_:1},8,["data","pagination"]))]),_:1})],64))}});export{Fe as default};
