import{d as E,q as m,s as F,c as y,a as e,u as t,h as T,w as l,b as N,N as K,e as r,o as b,F as A,r as M,t as q,f as d,y as S}from"./app-B-wLZQl0.js";import{S as W,_ as j}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as G}from"./DataTable.vue_vue_type_script_setup_true_lang-BQW8AXQk.js";import{_ as H}from"./EmptyState.vue_vue_type_script_setup_true_lang-CrAvLLsO.js";import{_ as g}from"./index-D8JUok4n.js";import{_ as J}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{_ as v,a as p,b as f,c as _,d as u}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{E as Q}from"./eye-pMepw5BK.js";import{P as R}from"./pencil-R0Fiz8Cs.js";import{T as X}from"./trash-2-BxVbfljz.js";import{P as Y}from"./plus-C63jdNg7.js";import{U as Z}from"./users-CkYIFvpU.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./Collection-DN_gmv-a.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./createLucideIcon-CbxkoCx6.js";import"./check-DogY6QNG.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./file-text-CFHWSPvd.js";import"./calendar-B0yi2zLg.js";import"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";import"./loader-circle-BSwxCoSE.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./index-a73qSWOM.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./nullish-CHIgUVhi.js";const ee={class:"mb-4 grid gap-3 md:grid-cols-5"},te={class:"relative md:col-span-2"},ae={key:0},le={key:1},oe={class:"flex items-center gap-1"},Ke=E({__name:"Index",props:{company:{},customers:{},filters:{}},setup(c){const n=c,$=m(n.filters.search??""),k=m(!!n.filters.include_inactive),w=m(!!n.filters.with_overdue),C=m(!!n.filters.with_outstanding),V=m(n.filters.sort_by??"name"),h=m(n.filters.sort_dir??"asc"),B=[{title:"Dashboard",href:`/${n.company.slug}`},{title:"Customers",href:`/${n.company.slug}/customers`}],O=[{key:"customer_number",label:"Customer #"},{key:"name",label:"Name"},{key:"open_balance",label:"Open Balance"},{key:"overdue_balance",label:"Overdue"},{key:"invoice_count",label:"Invoices"},{key:"available_credit",label:"Credit"},{key:"last_invoice_date",label:"Last Invoice"},{key:"last_payment_date",label:"Last Payment"},{key:"actions",label:"Actions"}],x=(o,a)=>new Intl.NumberFormat("en-US",{style:"currency",currency:a||"USD"}).format(o),I=F(()=>n.customers.data.map(o=>({id:o.id,customer_number:o.customer_number,name:o.name,open_balance:x(o.open_balance??0,o.base_currency||n.company.base_currency),overdue_balance:x(o.overdue_balance??0,o.base_currency||n.company.base_currency),invoice_count:o.invoice_count??0,available_credit:x(o.available_credit??0,o.base_currency||n.company.base_currency),last_invoice_date:o.last_invoice_date??"—",last_payment_date:o.last_payment_date??"—"}))),D=o=>{d.get(`/${n.company.slug}/customers/${o}`)},P=o=>{d.get(`/${n.company.slug}/customers/${o}/edit`)},L=o=>{confirm("Are you sure you want to delete this customer?")&&d.delete(`/${n.company.slug}/customers/${o}`)},i=()=>{d.get(`/${n.company.slug}/customers`,{search:$.value,include_inactive:k.value?1:"",with_overdue:w.value?1:"",with_outstanding:C.value?1:"",sort_by:V.value,sort_dir:h.value},{preserveState:!0})},z=[{value:"name",label:"Name"},{value:"outstanding",label:"Outstanding Balance"},{value:"overdue",label:"Overdue Balance"},{value:"last_invoice",label:"Last Invoice"},{value:"last_payment",label:"Last Payment"}];return(o,a)=>(b(),y(A,null,[e(t(T),{title:"Customers"}),e(j,{title:"Customers",breadcrumbs:B,icon:t(Z)},{actions:l(()=>[e(t(g),{onClick:a[0]||(a[0]=s=>t(d).get(`/${c.company.slug}/customers/create`))},{default:l(()=>[e(t(Y),{class:"mr-2 h-4 w-4"}),a[8]||(a[8]=r(" New Customer ",-1))]),_:1})]),default:l(()=>[N("div",ee,[N("div",te,[e(t(W),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e(t(J),{modelValue:$.value,"onUpdate:modelValue":a[1]||(a[1]=s=>$.value=s),placeholder:"Search name, email, phone...",class:"pl-10",onKeyup:K(i,["enter"])},null,8,["modelValue"])]),e(t(v),{modelValue:k.value,"onUpdate:modelValue":[a[2]||(a[2]=s=>k.value=s),i]},{default:l(()=>[e(t(p),null,{default:l(()=>[e(t(f),{placeholder:"Active only"})]),_:1}),e(t(_),null,{default:l(()=>[e(t(u),{value:!1},{default:l(()=>[...a[9]||(a[9]=[r("Active only",-1)])]),_:1}),e(t(u),{value:!0},{default:l(()=>[...a[10]||(a[10]=[r("Include inactive",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(t(v),{modelValue:w.value,"onUpdate:modelValue":[a[3]||(a[3]=s=>w.value=s),i]},{default:l(()=>[e(t(p),null,{default:l(()=>[e(t(f),{placeholder:"All customers"})]),_:1}),e(t(_),null,{default:l(()=>[e(t(u),{value:!1},{default:l(()=>[...a[11]||(a[11]=[r("All customers",-1)])]),_:1}),e(t(u),{value:!0},{default:l(()=>[...a[12]||(a[12]=[r("Only overdue",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(t(v),{modelValue:C.value,"onUpdate:modelValue":[a[4]||(a[4]=s=>C.value=s),i]},{default:l(()=>[e(t(p),null,{default:l(()=>[e(t(f),{placeholder:"Balance filter"})]),_:1}),e(t(_),null,{default:l(()=>[e(t(u),{value:!1},{default:l(()=>[...a[13]||(a[13]=[r("Any balance",-1)])]),_:1}),e(t(u),{value:!0},{default:l(()=>[...a[14]||(a[14]=[r("With outstanding",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(t(v),{modelValue:V.value,"onUpdate:modelValue":[a[5]||(a[5]=s=>V.value=s),i]},{default:l(()=>[e(t(p),null,{default:l(()=>[e(t(f),{placeholder:"Sort by"})]),_:1}),e(t(_),null,{default:l(()=>[(b(),y(A,null,M(z,s=>e(t(u),{key:s.value,value:s.value},{default:l(()=>[r(q(s.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"]),e(t(v),{modelValue:h.value,"onUpdate:modelValue":[a[6]||(a[6]=s=>h.value=s),i]},{default:l(()=>[e(t(p),null,{default:l(()=>[e(t(f),{placeholder:"Sort direction"})]),_:1}),e(t(_),null,{default:l(()=>[e(t(u),{value:"asc"},{default:l(()=>[...a[15]||(a[15]=[r("Ascending",-1)])]),_:1}),e(t(u),{value:"desc"},{default:l(()=>[...a[16]||(a[16]=[r("Descending",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),c.customers.data.length?(b(),y("div",le,[e(G,{columns:O,data:I.value,pagination:c.customers},{"cell-actions":l(({row:s})=>[N("div",oe,[e(t(g),{variant:"ghost",size:"icon",class:"h-8 w-8",onClick:S(U=>D(s.id),["stop"])},{default:l(()=>[e(t(Q),{class:"h-4 w-4"})]),_:1},8,["onClick"]),e(t(g),{variant:"ghost",size:"icon",class:"h-8 w-8",onClick:S(U=>P(s.id),["stop"])},{default:l(()=>[e(t(R),{class:"h-4 w-4"})]),_:1},8,["onClick"]),e(t(g),{variant:"ghost",size:"icon",class:"h-8 w-8 text-destructive hover:text-destructive",onClick:S(U=>L(s.id),["stop"])},{default:l(()=>[e(t(X),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),_:1},8,["data","pagination"])])):(b(),y("div",ae,[e(H,{title:"No customers yet",description:"Create your first customer to start invoicing.","cta-text":"New Customer",onClick:a[7]||(a[7]=s=>t(d).get(`/${c.company.slug}/customers/create`))})]))]),_:1},8,["icon"])],64))}});export{Ke as default};
