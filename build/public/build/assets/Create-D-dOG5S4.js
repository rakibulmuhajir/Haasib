import{d as D,x as F,s as U,K as N,c as _,a,u as e,h as M,w as r,b as d,y as O,e as n,o as u,F as y,r as c,i as $,t as m}from"./app-B-wLZQl0.js";import{_ as j}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as E}from"./index-D8JUok4n.js";import{_ as b}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{_ as s}from"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import{_ as v,a as V,b as g,c as x,d as f}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{S as K}from"./save-CBmuHaqJ.js";import{L as T}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./loader-circle-BSwxCoSE.js";import"./createLucideIcon-CbxkoCx6.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./useForwardExpose-Ca12vFmR.js";import"./index-a73qSWOM.js";import"./VisuallyHidden-BZkMfMV2.js";import"./Collection-DN_gmv-a.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./check-DogY6QNG.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./nullish-CHIgUVhi.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./plus-C63jdNg7.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./file-text-CFHWSPvd.js";import"./users-CkYIFvpU.js";import"./calendar-B0yi2zLg.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";const z={class:"grid gap-4 md:grid-cols-2"},G={class:"flex justify-end gap-3"},S="__none",$e=D({__name:"Create",props:{company:{},parents:{},templates:{}},setup(k){const p=k,q=[{title:"Dashboard",href:`/${p.company.slug}`},{title:"Accounts",href:`/${p.company.slug}/accounts`},{title:"Create",href:`/${p.company.slug}/accounts/create`}],B=["asset","liability","equity","revenue","expense","cogs","other_income","other_expense"],C={asset:["bank","cash","accounts_receivable","other_current_asset","inventory","fixed_asset","other_asset"],liability:["accounts_payable","credit_card","other_current_liability","other_liability","loan_payable"],equity:["equity","retained_earnings"],revenue:["revenue"],expense:["expense"],cogs:["cogs"],other_income:["other_income"],other_expense:["other_expense"]},w={asset:"debit",expense:"debit",cogs:"debit",other_expense:"debit",liability:"credit",equity:"credit",revenue:"credit",other_income:"credit"},o=F({template_id:"",code:"",name:"",type:"",subtype:"",currency:"",parent_id:S,description:"",normal_balance:""}),A=U(()=>C[o.type]||[]),L=U(()=>p.parents.filter(i=>i.type===o.type));N(()=>o.type,i=>{o.normal_balance=w[i]??"",C[i]?.includes(o.subtype)||(o.subtype="")}),N(()=>o.template_id,i=>{const t=p.templates.find(l=>l.id===i);t&&(o.code=t.code,o.name=t.name,o.type=t.type,o.subtype=t.subtype,o.normal_balance=t.normal_balance)});const P=()=>{o.transform(i=>({...i,parent_id:i.parent_id===S?null:i.parent_id})).post(`/${p.company.slug}/accounts`,{preserveScroll:!0})};return(i,t)=>(u(),_(y,null,[a(e(M),{title:"Create Account"}),a(j,{title:"Create Account",breadcrumbs:q,icon:e(T)},{default:r(()=>[d("form",{class:"space-y-6",onSubmit:O(P,["prevent"])},[d("div",z,[d("div",null,[a(e(s),{for:"template_id"},{default:r(()=>[...t[8]||(t[8]=[n("Start from template (optional)",-1)])]),_:1}),a(e(v),{modelValue:e(o).template_id,"onUpdate:modelValue":t[0]||(t[0]=l=>e(o).template_id=l)},{default:r(()=>[a(e(V),{id:"template_id"},{default:r(()=>[a(e(g),{placeholder:"Pick a template"})]),_:1}),a(e(x),null,{default:r(()=>[a(e(f),{value:"__none"},{default:r(()=>[...t[9]||(t[9]=[n("No template",-1)])]),_:1}),(u(!0),_(y,null,c(k.templates,l=>(u(),$(e(f),{key:l.id,value:l.id},{default:r(()=>[n(m(l.code)+" — "+m(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),d("div",null,[a(e(s),{for:"code"},{default:r(()=>[...t[10]||(t[10]=[n("Code",-1)])]),_:1}),a(e(b),{id:"code",modelValue:e(o).code,"onUpdate:modelValue":t[1]||(t[1]=l=>e(o).code=l),required:""},null,8,["modelValue"])]),d("div",null,[a(e(s),{for:"name"},{default:r(()=>[...t[11]||(t[11]=[n("Name",-1)])]),_:1}),a(e(b),{id:"name",modelValue:e(o).name,"onUpdate:modelValue":t[2]||(t[2]=l=>e(o).name=l),required:""},null,8,["modelValue"])]),d("div",null,[a(e(s),{for:"type"},{default:r(()=>[...t[12]||(t[12]=[n("Type",-1)])]),_:1}),a(e(v),{modelValue:e(o).type,"onUpdate:modelValue":t[3]||(t[3]=l=>e(o).type=l)},{default:r(()=>[a(e(V),{id:"type"},{default:r(()=>[a(e(g),{placeholder:"Select type"})]),_:1}),a(e(x),null,{default:r(()=>[(u(),_(y,null,c(B,l=>a(e(f),{key:l,value:l},{default:r(()=>[n(m(l),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])]),d("div",null,[a(e(s),{for:"subtype"},{default:r(()=>[...t[13]||(t[13]=[n("Subtype",-1)])]),_:1}),a(e(v),{modelValue:e(o).subtype,"onUpdate:modelValue":t[4]||(t[4]=l=>e(o).subtype=l)},{default:r(()=>[a(e(V),{id:"subtype"},{default:r(()=>[a(e(g),{placeholder:"Select subtype"})]),_:1}),a(e(x),null,{default:r(()=>[(u(!0),_(y,null,c(A.value,l=>(u(),$(e(f),{key:l,value:l},{default:r(()=>[n(m(l),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),d("div",null,[a(e(s),{for:"parent_id"},{default:r(()=>[...t[14]||(t[14]=[n("Parent (optional)",-1)])]),_:1}),a(e(v),{modelValue:e(o).parent_id,"onUpdate:modelValue":t[5]||(t[5]=l=>e(o).parent_id=l)},{default:r(()=>[a(e(V),{id:"parent_id"},{default:r(()=>[a(e(g),{placeholder:"No parent"})]),_:1}),a(e(x),null,{default:r(()=>[a(e(f),{value:S},{default:r(()=>[...t[15]||(t[15]=[n("No parent",-1)])]),_:1}),(u(!0),_(y,null,c(L.value,l=>(u(),$(e(f),{key:l.id,value:l.id},{default:r(()=>[n(m(l.code)+" — "+m(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),d("div",null,[a(e(s),{for:"currency"},{default:r(()=>[...t[16]||(t[16]=[n("Currency (optional)",-1)])]),_:1}),a(e(b),{id:"currency",modelValue:e(o).currency,"onUpdate:modelValue":t[6]||(t[6]=l=>e(o).currency=l),placeholder:"Leave blank for base",maxlength:"3"},null,8,["modelValue"])])]),d("div",null,[a(e(s),{for:"description"},{default:r(()=>[...t[17]||(t[17]=[n("Description",-1)])]),_:1}),a(e(b),{id:"description",modelValue:e(o).description,"onUpdate:modelValue":t[7]||(t[7]=l=>e(o).description=l),placeholder:"Optional description"},null,8,["modelValue"])]),d("div",G,[a(e(E),{type:"submit"},{default:r(()=>[a(e(K),{class:"mr-2 h-4 w-4"}),t[18]||(t[18]=n(" Save Account ",-1))]),_:1})])],32)]),_:1},8,["icon"])],64))}});export{$e as default};
