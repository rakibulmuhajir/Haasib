import{B as ae,A as m,C as fe,D as j,c as h,o as v,F as S,i as g,h as E,E as ne,m as T,w as y,G as N,n as ye,R as D,K as X,H as he,I as G,Q as V,y as me,a,J as Y,t as f,j as ge,q as xe,r as B,k,s as we,d as c,e as l,l as z,b as W,p as ke}from"./app-DjFlEUH4.js";import{c as re,R as Te,b as _,s as C,a as K}from"./index-DL9KtRp0.js";import{s as Q}from"./index-Cl6iUony.js";import{s as _e}from"./index-CKALDcO3.js";import{c as Pe,s as Ae}from"./index-zYy9pXTp.js";import{s as Z,a as P}from"./index-DgqSODAa.js";import{s as Ie}from"./index-CLnL3lam.js";import{s as ee}from"./index-CwhCYogN.js";import{_ as Ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CXOcYUhh.js";import"./index-CyPBiJ0T.js";import"./index-CyCOy2Ll.js";import"./index-Dp6GxYCd.js";import"./index-CpMPr0UE.js";var Be={root:function(e){var n=e.instance;return["p-tabpanel",{"p-tabpanel-active":n.active}]}},Se=ae.extend({name:"tabpanel",classes:Be}),$e={name:"BaseTabPanel",extends:re,props:{value:{type:[String,Number],default:void 0},as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1},header:null,headerStyle:null,headerClass:null,headerProps:null,headerActionProps:null,contentStyle:null,contentClass:null,contentProps:null,disabled:Boolean},style:Se,provide:function(){return{$pcTabPanel:this,$parentInstance:this}}},H={name:"TabPanel",extends:$e,inheritAttrs:!1,inject:["$pcTabs"],computed:{active:function(){var e;return fe((e=this.$pcTabs)===null||e===void 0?void 0:e.d_value,this.value)},id:function(){var e;return"".concat((e=this.$pcTabs)===null||e===void 0?void 0:e.$id,"_tabpanel_").concat(this.value)},ariaLabelledby:function(){var e;return"".concat((e=this.$pcTabs)===null||e===void 0?void 0:e.$id,"_tab_").concat(this.value)},attrs:function(){return m(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){var e;return{id:this.id,tabindex:(e=this.$pcTabs)===null||e===void 0?void 0:e.tabindex,role:"tabpanel","aria-labelledby":this.ariaLabelledby,"data-pc-name":"tabpanel","data-p-active":this.active}},ptParams:function(){return{context:{active:this.active}}}}};function De(t,e,n,r,s,i){var w,d;return i.$pcTabs?(v(),h(S,{key:1},[t.asChild?j(t.$slots,"default",{key:1,class:ye(t.cx("root")),active:i.active,a11yAttrs:i.a11yAttrs}):(v(),h(S,{key:0},[!((w=i.$pcTabs)!==null&&w!==void 0&&w.lazy)||i.active?E((v(),T(N(t.as),m({key:0,class:t.cx("root")},i.attrs),{default:y(function(){return[j(t.$slots,"default")]}),_:3},16,["class"])),[[ne,(d=i.$pcTabs)!==null&&d!==void 0&&d.lazy?!0:i.active]]):g("",!0)],64))],64)):j(t.$slots,"default",{key:0})}H.render=De;var Ke=`
    .p-tabview-tablist-container {
        position: relative;
    }

    .p-tabview-scrollable > .p-tabview-tablist-container {
        overflow: hidden;
    }

    .p-tabview-tablist-scroll-container {
        overflow-x: auto;
        overflow-y: hidden;
        scroll-behavior: smooth;
        scrollbar-width: none;
        overscroll-behavior: contain auto;
    }

    .p-tabview-tablist-scroll-container::-webkit-scrollbar {
        display: none;
    }

    .p-tabview-tablist {
        display: flex;
        margin: 0;
        padding: 0;
        list-style-type: none;
        flex: 1 1 auto;
        background: dt('tabview.tab.list.background');
        border: 1px solid dt('tabview.tab.list.border.color');
        border-width: 0 0 1px 0;
        position: relative;
    }

    .p-tabview-tab-header {
        cursor: pointer;
        user-select: none;
        display: flex;
        align-items: center;
        text-decoration: none;
        position: relative;
        overflow: hidden;
        border-style: solid;
        border-width: 0 0 1px 0;
        border-color: transparent transparent dt('tabview.tab.border.color') transparent;
        color: dt('tabview.tab.color');
        padding: 1rem 1.125rem;
        font-weight: 600;
        border-top-right-radius: dt('border.radius.md');
        border-top-left-radius: dt('border.radius.md');
        transition:
            color dt('tabview.transition.duration'),
            outline-color dt('tabview.transition.duration');
        margin: 0 0 -1px 0;
        outline-color: transparent;
    }

    .p-tabview-tablist-item:not(.p-disabled) .p-tabview-tab-header:focus-visible {
        outline: dt('focus.ring.width') dt('focus.ring.style') dt('focus.ring.color');
        outline-offset: -1px;
    }

    .p-tabview-tablist-item:not(.p-highlight):not(.p-disabled):hover > .p-tabview-tab-header {
        color: dt('tabview.tab.hover.color');
    }

    .p-tabview-tablist-item.p-highlight > .p-tabview-tab-header {
        color: dt('tabview.tab.active.color');
    }

    .p-tabview-tab-title {
        line-height: 1;
        white-space: nowrap;
    }

    .p-tabview-next-button,
    .p-tabview-prev-button {
        position: absolute;
        top: 0;
        margin: 0;
        padding: 0;
        z-index: 2;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: dt('tabview.nav.button.background');
        color: dt('tabview.nav.button.color');
        width: 2.5rem;
        border-radius: 0;
        outline-color: transparent;
        transition:
            color dt('tabview.transition.duration'),
            outline-color dt('tabview.transition.duration');
        box-shadow: dt('tabview.nav.button.shadow');
        border: none;
        cursor: pointer;
        user-select: none;
    }

    .p-tabview-next-button:focus-visible,
    .p-tabview-prev-button:focus-visible {
        outline: dt('focus.ring.width') dt('focus.ring.style') dt('focus.ring.color');
        outline-offset: dt('focus.ring.offset');
    }

    .p-tabview-next-button:hover,
    .p-tabview-prev-button:hover {
        color: dt('tabview.nav.button.hover.color');
    }

    .p-tabview-prev-button {
        left: 0;
    }

    .p-tabview-next-button {
        right: 0;
    }

    .p-tabview-panels {
        background: dt('tabview.tab.panel.background');
        color: dt('tabview.tab.panel.color');
        padding: 0.875rem 1.125rem 1.125rem 1.125rem;
    }

    .p-tabview-ink-bar {
        z-index: 1;
        display: block;
        position: absolute;
        bottom: -1px;
        height: 1px;
        background: dt('tabview.tab.active.border.color');
        transition: 250ms cubic-bezier(0.35, 0, 0.25, 1);
    }
`,Ee={root:function(e){var n=e.props;return["p-tabview p-component",{"p-tabview-scrollable":n.scrollable}]},navContainer:"p-tabview-tablist-container",prevButton:"p-tabview-prev-button",navContent:"p-tabview-tablist-scroll-container",nav:"p-tabview-tablist",tab:{header:function(e){var n=e.instance,r=e.tab,s=e.index;return["p-tabview-tablist-item",n.getTabProp(r,"headerClass"),{"p-tabview-tablist-item-active":n.d_activeIndex===s,"p-disabled":n.getTabProp(r,"disabled")}]},headerAction:"p-tabview-tab-header",headerTitle:"p-tabview-tab-title",content:function(e){var n=e.instance,r=e.tab;return["p-tabview-panel",n.getTabProp(r,"contentClass")]}},inkbar:"p-tabview-ink-bar",nextButton:"p-tabview-next-button",panelContainer:"p-tabview-panels"},Ne=ae.extend({name:"tabview",style:Ke,classes:Ee}),He={name:"BaseTabView",extends:re,props:{activeIndex:{type:Number,default:0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1},prevButtonProps:{type:null,default:null},nextButtonProps:{type:null,default:null},prevIcon:{type:String,default:void 0},nextIcon:{type:String,default:void 0}},style:Ne,provide:function(){return{$pcTabs:void 0,$pcTabView:this,$parentInstance:this}}},ie={name:"TabView",extends:He,inheritAttrs:!1,emits:["update:activeIndex","tab-change","tab-click"],data:function(){return{d_activeIndex:this.activeIndex,isPrevButtonDisabled:!0,isNextButtonDisabled:!1}},watch:{activeIndex:function(e){this.d_activeIndex=e,this.scrollInView({index:e})}},mounted:function(){console.warn("Deprecated since v4. Use Tabs component instead."),this.updateInkBar(),this.scrollable&&this.updateButtonState()},updated:function(){this.updateInkBar(),this.scrollable&&this.updateButtonState()},methods:{isTabPanel:function(e){return e.type.name==="TabPanel"},isTabActive:function(e){return this.d_activeIndex===e},getTabProp:function(e,n){return e.props?e.props[n]:void 0},getKey:function(e,n){return this.getTabProp(e,"header")||n},getTabHeaderActionId:function(e){return"".concat(this.$id,"_").concat(e,"_header_action")},getTabContentId:function(e){return"".concat(this.$id,"_").concat(e,"_content")},getTabPT:function(e,n,r){var s=this.tabs.length,i={props:e.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:r,count:s,first:r===0,last:r===s-1,active:this.isTabActive(r)}};return m(this.ptm("tabpanel.".concat(n),{tabpanel:i}),this.ptm("tabpanel.".concat(n),i),this.ptmo(this.getTabProp(e,"pt"),n,i))},onScroll:function(e){this.scrollable&&this.updateButtonState(),e.preventDefault()},onPrevButtonClick:function(){var e=this.$refs.content,n=D(e),r=e.scrollLeft-n;e.scrollLeft=r<=0?0:r},onNextButtonClick:function(){var e=this.$refs.content,n=D(e)-this.getVisibleButtonWidths(),r=e.scrollLeft+n,s=e.scrollWidth-n;e.scrollLeft=r>=s?s:r},onTabClick:function(e,n,r){this.changeActiveIndex(e,n,r),this.$emit("tab-click",{originalEvent:e,index:r})},onTabKeyDown:function(e,n,r){switch(e.code){case"ArrowLeft":this.onTabArrowLeftKey(e);break;case"ArrowRight":this.onTabArrowRightKey(e);break;case"Home":this.onTabHomeKey(e);break;case"End":this.onTabEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"NumpadEnter":case"Space":this.onTabEnterKey(e,n,r);break}},onTabArrowRightKey:function(e){var n=this.findNextHeaderAction(e.target.parentElement);n?this.changeFocusedTab(e,n):this.onTabHomeKey(e),e.preventDefault()},onTabArrowLeftKey:function(e){var n=this.findPrevHeaderAction(e.target.parentElement);n?this.changeFocusedTab(e,n):this.onTabEndKey(e),e.preventDefault()},onTabHomeKey:function(e){var n=this.findFirstHeaderAction();this.changeFocusedTab(e,n),e.preventDefault()},onTabEndKey:function(e){var n=this.findLastHeaderAction();this.changeFocusedTab(e,n),e.preventDefault()},onPageDownKey:function(e){this.scrollInView({index:this.$refs.nav.children.length-2}),e.preventDefault()},onPageUpKey:function(e){this.scrollInView({index:0}),e.preventDefault()},onTabEnterKey:function(e,n,r){this.changeActiveIndex(e,n,r),e.preventDefault()},findNextHeaderAction:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=n?e:e.nextElementSibling;return r?V(r,"data-p-disabled")||V(r,"data-pc-section")==="inkbar"?this.findNextHeaderAction(r):G(r,'[data-pc-section="headeraction"]'):null},findPrevHeaderAction:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=n?e:e.previousElementSibling;return r?V(r,"data-p-disabled")||V(r,"data-pc-section")==="inkbar"?this.findPrevHeaderAction(r):G(r,'[data-pc-section="headeraction"]'):null},findFirstHeaderAction:function(){return this.findNextHeaderAction(this.$refs.nav.firstElementChild,!0)},findLastHeaderAction:function(){return this.findPrevHeaderAction(this.$refs.nav.lastElementChild,!0)},changeActiveIndex:function(e,n,r){!this.getTabProp(n,"disabled")&&this.d_activeIndex!==r&&(this.d_activeIndex=r,this.$emit("update:activeIndex",r),this.$emit("tab-change",{originalEvent:e,index:r}),this.scrollInView({index:r}))},changeFocusedTab:function(e,n){if(n&&(he(n),this.scrollInView({element:n}),this.selectOnFocus)){var r=parseInt(n.parentElement.dataset.pcIndex,10),s=this.tabs[r];this.changeActiveIndex(e,s,r)}},scrollInView:function(e){var n=e.element,r=e.index,s=r===void 0?-1:r,i=n||this.$refs.nav.children[s];i&&i.scrollIntoView&&i.scrollIntoView({block:"nearest"})},updateInkBar:function(){var e=this.$refs.nav.children[this.d_activeIndex];this.$refs.inkbar.style.width=D(e)+"px",this.$refs.inkbar.style.left=X(e).left-X(this.$refs.nav).left+"px"},updateButtonState:function(){var e=this.$refs.content,n=e.scrollLeft,r=e.scrollWidth,s=D(e);this.isPrevButtonDisabled=n===0,this.isNextButtonDisabled=parseInt(n)===r-s},getVisibleButtonWidths:function(){var e=this.$refs,n=e.prevBtn,r=e.nextBtn;return[n,r].reduce(function(s,i){return i?s+D(i):s},0)}},computed:{tabs:function(){var e=this;return this.$slots.default().reduce(function(n,r){return e.isTabPanel(r)?n.push(r):r.children&&r.children instanceof Array&&r.children.forEach(function(s){e.isTabPanel(s)&&n.push(s)}),n},[])},prevButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0}},directives:{ripple:Te},components:{ChevronLeftIcon:_e,ChevronRightIcon:Pe}};function L(t){"@babel/helpers - typeof";return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(t)}function te(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?te(Object(n),!0).forEach(function(r){je(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function je(t,e,n){return(e=Le(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Le(t){var e=Oe(t,"string");return L(e)=="symbol"?e:e+""}function Oe(t,e){if(L(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(L(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fe=["tabindex","aria-label"],Ve=["data-p-active","data-p-disabled","data-pc-index"],Re=["id","tabindex","aria-disabled","aria-selected","aria-controls","onClick","onKeydown"],Ue=["tabindex","aria-label"],ze=["id","aria-labelledby","data-pc-index","data-p-active"];function We(t,e,n,r,s,i){var w=me("ripple");return v(),h("div",m({class:t.cx("root"),role:"tablist"},t.ptmi("root")),[a("div",m({class:t.cx("navContainer")},t.ptm("navContainer")),[t.scrollable&&!s.isPrevButtonDisabled?E((v(),h("button",m({key:0,ref:"prevBtn",type:"button",class:t.cx("prevButton"),tabindex:t.tabindex,"aria-label":i.prevButtonAriaLabel,onClick:e[0]||(e[0]=function(){return i.onPrevButtonClick&&i.onPrevButtonClick.apply(i,arguments)})},x(x({},t.prevButtonProps),t.ptm("prevButton")),{"data-pc-group-section":"navbutton"}),[j(t.$slots,"previcon",{},function(){return[(v(),T(N(t.prevIcon?"span":"ChevronLeftIcon"),m({"aria-hidden":"true",class:t.prevIcon},t.ptm("prevIcon")),null,16,["class"]))]})],16,Fe)),[[w]]):g("",!0),a("div",m({ref:"content",class:t.cx("navContent"),onScroll:e[1]||(e[1]=function(){return i.onScroll&&i.onScroll.apply(i,arguments)})},t.ptm("navContent")),[a("ul",m({ref:"nav",class:t.cx("nav")},t.ptm("nav")),[(v(!0),h(S,null,Y(i.tabs,function(d,b){return v(),h("li",m({key:i.getKey(d,b),style:i.getTabProp(d,"headerStyle"),class:t.cx("tab.header",{tab:d,index:b}),role:"presentation"},{ref_for:!0},x(x(x({},i.getTabProp(d,"headerProps")),i.getTabPT(d,"root",b)),i.getTabPT(d,"header",b)),{"data-pc-name":"tabpanel","data-p-active":s.d_activeIndex===b,"data-p-disabled":i.getTabProp(d,"disabled"),"data-pc-index":b}),[E((v(),h("a",m({id:i.getTabHeaderActionId(b),class:t.cx("tab.headerAction"),tabindex:i.getTabProp(d,"disabled")||!i.isTabActive(b)?-1:t.tabindex,role:"tab","aria-disabled":i.getTabProp(d,"disabled"),"aria-selected":i.isTabActive(b),"aria-controls":i.getTabContentId(b),onClick:function(I){return i.onTabClick(I,d,b)},onKeydown:function(I){return i.onTabKeyDown(I,d,b)}},{ref_for:!0},x(x({},i.getTabProp(d,"headerActionProps")),i.getTabPT(d,"headerAction",b))),[d.props&&d.props.header?(v(),h("span",m({key:0,class:t.cx("tab.headerTitle")},{ref_for:!0},i.getTabPT(d,"headerTitle",b)),f(d.props.header),17)):g("",!0),d.children&&d.children.header?(v(),T(N(d.children.header),{key:1})):g("",!0)],16,Re)),[[w]])],16,Ve)}),128)),a("li",m({ref:"inkbar",class:t.cx("inkbar"),role:"presentation","aria-hidden":"true"},t.ptm("inkbar")),null,16)],16)],16),t.scrollable&&!s.isNextButtonDisabled?E((v(),h("button",m({key:1,ref:"nextBtn",type:"button",class:t.cx("nextButton"),tabindex:t.tabindex,"aria-label":i.nextButtonAriaLabel,onClick:e[2]||(e[2]=function(){return i.onNextButtonClick&&i.onNextButtonClick.apply(i,arguments)})},x(x({},t.nextButtonProps),t.ptm("nextButton")),{"data-pc-group-section":"navbutton"}),[j(t.$slots,"nexticon",{},function(){return[(v(),T(N(t.nextIcon?"span":"ChevronRightIcon"),m({"aria-hidden":"true",class:t.nextIcon},t.ptm("nextIcon")),null,16,["class"]))]})],16,Ue)),[[w]]):g("",!0)],16),a("div",m({class:t.cx("panelContainer")},t.ptm("panelContainer")),[(v(!0),h(S,null,Y(i.tabs,function(d,b){return v(),h(S,{key:i.getKey(d,b)},[!t.lazy||i.isTabActive(b)?E((v(),h("div",m({key:0,id:i.getTabContentId(b),style:i.getTabProp(d,"contentStyle"),class:t.cx("tab.content",{tab:d}),role:"tabpanel","aria-labelledby":i.getTabHeaderActionId(b)},{ref_for:!0},x(x(x({},i.getTabProp(d,"contentProps")),i.getTabPT(d,"root",b)),i.getTabPT(d,"content",b)),{"data-pc-name":"tabpanel","data-pc-index":b,"data-p-active":s.d_activeIndex===b}),[(v(),T(N(d)))],16,ze)),[[ne,t.lazy?!0:i.isTabActive(b)]]):g("",!0)],64)}),128))],16)],16)}ie.render=We;const Ye={class:"company-show"},Je={key:0,class:"flex justify-center items-center py-12"},Me={key:1},qe={class:"flex justify-between items-start mb-6"},Xe={class:"flex items-center gap-4"},Ge={class:"text-3xl font-bold text-gray-900 dark:text-white"},Qe={class:"flex items-center gap-3 mt-2"},Ze={key:0,class:"text-sm text-gray-500"},et={class:"flex gap-2"},tt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},at={class:"text-center"},nt={class:"text-2xl font-bold text-primary"},rt={class:"text-center"},it={class:"text-2xl font-bold text-primary"},st={class:"text-center"},ot={class:"text-2xl font-bold text-primary"},lt={class:"text-center"},ct={class:"text-2xl font-bold text-primary"},dt={class:"space-y-6"},ut={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},vt={class:"text-gray-900 dark:text-white"},pt={class:"text-gray-900 dark:text-white"},bt={class:"text-gray-900 dark:text-white"},ft={class:"text-gray-900 dark:text-white"},yt={class:"text-gray-900 dark:text-white"},ht={class:"text-gray-900 dark:text-white"},mt={key:0},gt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},xt={class:"text-gray-900 dark:text-white"},wt={class:"text-gray-900 dark:text-white"},kt={class:"text-gray-900 dark:text-white"},Tt={key:1},_t={class:"flex items-center gap-4"},Pt={class:"text-gray-900 dark:text-white"},At={class:"text-sm text-gray-600 dark:text-gray-400"},It={class:"space-y-4"},Ct={class:"flex justify-between items-center"},Bt={class:"text-lg font-semibold"},St={class:"flex items-center gap-3"},$t={class:"font-semibold"},Dt={class:"text-sm text-gray-500"},Kt={class:"space-y-4"},Et={class:"flex justify-between items-center"},Nt={class:"text-lg font-semibold"},Ht={class:"space-y-4"},jt={key:0,class:"space-y-3"},Lt={class:"flex-1"},Ot={class:"text-sm font-medium"},Ft={class:"text-xs text-gray-500"},Vt={key:1,class:"text-center py-8"},Rt={key:2,class:"text-center py-12"},Ut={__name:"Show",setup(t){const{t:e}=ge(),n=xe(),r=B(),s=k(()=>n.props.company),i=k(()=>s.value?.fiscal_year);k(()=>s.value?.user_role?.role);const w=k(()=>s.value?.permissions||[]),d=k(()=>w.value.includes("company.manage")),b=k(()=>w.value.includes("company.invite"));k(()=>w.value.includes("settings.manage"));const $=B(!1),I=B(0),O=B([]),R=B([]),J=B([]),U=k(()=>n.props.currentCompany?.id===s.value?.id),se=k(()=>O.value.filter(u=>u.is_active).length),M=k(()=>R.value.filter(u=>u.status==="pending").length),q=k(()=>J.value.slice(0,10)),oe=async()=>{try{const u=await fetch(`/api/v1/companies/${s.value.id}/users`),o=await u.json();u.ok&&(O.value=o.data||[])}catch(u){console.error("Failed to load company users:",u)}},le=async()=>{try{const u=await fetch(`/api/v1/companies/${s.value.id}/invitations`),o=await u.json();u.ok&&(R.value=o.data||[])}catch(u){console.error("Failed to load company invitations:",u)}},ce=async()=>{try{const u=await fetch(`/api/v1/companies/${s.value.id}/audit-entries`),o=await u.json();u.ok&&(J.value=o.data||[])}catch(u){console.error("Failed to load audit entries:",u)}},de=async()=>{if(!U.value)try{(await fetch("/api/v1/company-context/switch",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({company_id:s.value.id})})).ok&&(r.value.add({severity:"success",summary:"Success",detail:`Switched to ${s.value.name}`,life:2e3}),setTimeout(()=>{window.location.reload()},1e3))}catch(u){console.error("Failed to switch company:",u),r.value.add({severity:"error",summary:"Error",detail:"Failed to switch company",life:3e3})}},ue=async()=>{if(confirm(`Are you sure you want to deactivate ${s.value.name}? This action can be reversed.`))try{(await fetch(`/api/v1/companies/${s.value.id}`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({is_active:!1})})).ok&&(r.value.add({severity:"success",summary:"Success",detail:"Company deactivated successfully",life:3e3}),setTimeout(()=>{ke.visit("/companies")},1500))}catch(u){console.error("Failed to deactivate company:",u),r.value.add({severity:"error",summary:"Error",detail:"Failed to deactivate company",life:3e3})}},A=u=>new Date(u).toLocaleDateString(),ve=u=>new Date(u).toLocaleString(),F=u=>{switch(u){case"owner":return"success";case"admin":return"info";case"accountant":return"warning";case"member":return"secondary";default:return"secondary"}},pe=u=>{switch(u){case"pending":return"warning";case"accepted":return"success";case"rejected":return"danger";case"expired":return"secondary";default:return"secondary"}},be=u=>{switch(u){case"create":return"success";case"update":return"info";case"delete":return"danger";case"activate":return"success";case"deactivate":return"warning";default:return"secondary"}};return we(async()=>{$.value=!0;try{await Promise.all([oe(),le(),ce()])}finally{$.value=!1}}),(u,o)=>(v(),h("div",Ye,[c(l(Ae),{ref_key:"toast",ref:r},null,512),$.value?(v(),h("div",Je,[c(l(Ie))])):s.value?(v(),h("div",Me,[a("div",qe,[a("div",Xe,[c(l(Q),{label:s.value.name.charAt(0),class:"bg-primary text-primary-contrast",size:"xlarge"},null,8,["label"]),a("div",null,[a("h1",Ge,f(s.value.name),1),a("div",Qe,[c(l(_),{value:s.value.industry,severity:"secondary"},null,8,["value"]),c(l(_),{value:s.value.user_role?.role,severity:F(s.value.user_role?.role)},null,8,["value","severity"]),c(l(_),{value:s.value.is_active?"Active":"Inactive",severity:s.value.is_active?"success":"danger"},null,8,["value","severity"]),U.value?g("",!0):(v(),h("span",Ze," Not currently active "))])])]),a("div",et,[!U.value&&s.value.is_active?(v(),T(l(C),{key:0,onClick:de,icon:"pi pi-sign-in",label:"Switch to Company",severity:"success"})):g("",!0),d.value?(v(),T(l(z),{key:1,href:`/companies/${s.value.id}/edit`},{default:y(()=>[c(l(C),{icon:"pi pi-pencil",label:"Edit",severity:"secondary",outlined:""})]),_:1},8,["href"])):g("",!0),d.value&&s.value.is_active&&s.value.user_role?.role==="owner"?(v(),T(l(C),{key:2,onClick:ue,icon:"pi pi-times",label:"Deactivate",severity:"danger",outlined:""})):g("",!0),c(l(z),{href:"/companies"},{default:y(()=>[c(l(C),{icon:"pi pi-arrow-left",label:"Back",severity:"secondary",outlined:""})]),_:1})])]),a("div",tt,[c(l(K),null,{content:y(()=>[a("div",at,[a("div",nt,f(se.value),1),o[2]||(o[2]=a("div",{class:"text-gray-600 dark:text-gray-400"},"Active Users",-1))])]),_:1}),c(l(K),null,{content:y(()=>[a("div",rt,[a("div",it,f(M.value),1),o[3]||(o[3]=a("div",{class:"text-gray-600 dark:text-gray-400"},"Pending Invitations",-1))])]),_:1}),c(l(K),null,{content:y(()=>[a("div",st,[a("div",ot,f(s.value.currency),1),o[4]||(o[4]=a("div",{class:"text-gray-600 dark:text-gray-400"},"Currency",-1))])]),_:1}),c(l(K),null,{content:y(()=>[a("div",lt,[a("div",ct,f(i.value?i.value.name:"N/A"),1),o[5]||(o[5]=a("div",{class:"text-gray-600 dark:text-gray-400"},"Fiscal Year",-1))])]),_:1})]),c(l(K),null,{default:y(()=>[c(l(ie),{activeIndex:I.value,"onUpdate:activeIndex":o[1]||(o[1]=p=>I.value=p)},{default:y(()=>[c(l(H),{header:"Overview"},{default:y(()=>[a("div",dt,[a("div",null,[o[12]||(o[12]=a("h3",{class:"text-lg font-semibold mb-4"},"Company Information",-1)),a("div",ut,[a("div",null,[o[6]||(o[6]=a("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Industry",-1)),a("p",vt,f(s.value.industry),1)]),a("div",null,[o[7]||(o[7]=a("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Country",-1)),a("p",pt,f(s.value.country),1)]),a("div",null,[o[8]||(o[8]=a("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Timezone",-1)),a("p",bt,f(s.value.timezone||"Not set"),1)]),a("div",null,[o[9]||(o[9]=a("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Language",-1)),a("p",ft,f(s.value.language||"en"),1)]),a("div",null,[o[10]||(o[10]=a("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Created",-1)),a("p",yt,f(A(s.value.created_at)),1)]),a("div",null,[o[11]||(o[11]=a("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Last Updated",-1)),a("p",ht,f(A(s.value.updated_at)),1)])])]),c(l(ee)),i.value?(v(),h("div",mt,[o[16]||(o[16]=a("h3",{class:"text-lg font-semibold mb-4"},"Fiscal Year",-1)),a("div",gt,[a("div",null,[o[13]||(o[13]=a("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Fiscal Year",-1)),a("p",xt,f(i.value.name),1)]),a("div",null,[o[14]||(o[14]=a("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Start Date",-1)),a("p",wt,f(A(i.value.start_date)),1)]),a("div",null,[o[15]||(o[15]=a("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"End Date",-1)),a("p",kt,f(A(i.value.end_date)),1)])])])):g("",!0),c(l(ee)),s.value.user_role?(v(),h("div",Tt,[o[17]||(o[17]=a("h3",{class:"text-lg font-semibold mb-4"},"Your Role in This Company",-1)),a("div",_t,[c(l(_),{value:s.value.user_role.role,severity:F(s.value.user_role.role),size:"large"},null,8,["value","severity"]),a("div",null,[a("p",Pt,f(s.value.user_role.role.charAt(0).toUpperCase()+s.value.user_role.role.slice(1)),1),a("p",At," Member since "+f(A(s.value.user_role.joined_at)),1)])])])):g("",!0)])]),_:1}),c(l(H),{header:"Users"},{default:y(()=>[a("div",It,[a("div",Ct,[a("h3",Bt,"Company Users ("+f(O.value.length)+")",1),b.value?(v(),T(l(C),{key:0,icon:"pi pi-user-plus",label:"Invite User",severity:"secondary",outlined:"",onClick:o[0]||(o[0]=p=>I.value=2)})):g("",!0)]),c(l(Z),{value:O.value,paginator:!0,rows:10,scrollable:"","scroll-height":"400px"},{empty:y(()=>[...o[18]||(o[18]=[a("div",{class:"text-center py-8"},[a("i",{class:"pi pi-users text-4xl text-gray-400"}),a("p",{class:"text-gray-500 dark:text-gray-400 mt-4"}," No users found in this company ")],-1)])]),default:y(()=>[c(l(P),{field:"name",header:"Name"},{body:y(({data:p})=>[a("div",St,[c(l(Q),{label:p.name.charAt(0),class:"bg-primary text-primary-contrast"},null,8,["label"]),a("div",null,[a("div",$t,f(p.name),1),a("div",Dt,f(p.email),1)])])]),_:1}),c(l(P),{field:"role",header:"Role"},{body:y(({data:p})=>[c(l(_),{value:p.pivot.role,severity:F(p.pivot.role)},null,8,["value","severity"])]),_:1}),c(l(P),{field:"pivot.is_active",header:"Status"},{body:y(({data:p})=>[c(l(_),{value:p.pivot.is_active?"Active":"Inactive",severity:p.pivot.is_active?"success":"danger"},null,8,["value","severity"])]),_:1}),c(l(P),{field:"pivot.created_at",header:"Joined"},{body:y(({data:p})=>[W(f(A(p.pivot.created_at)),1)]),_:1})]),_:1},8,["value"])])]),_:1}),c(l(H),{header:"Invitations"},{default:y(()=>[a("div",Kt,[a("div",Et,[a("h3",Nt," Pending Invitations ("+f(M.value)+") ",1),b.value?(v(),T(l(C),{key:0,icon:"pi pi-plus",label:"Send Invitation"})):g("",!0)]),c(l(Z),{value:R.value,paginator:!0,rows:10,scrollable:"","scroll-height":"400px"},{empty:y(()=>[...o[19]||(o[19]=[a("div",{class:"text-center py-8"},[a("i",{class:"pi pi-envelope text-4xl text-gray-400"}),a("p",{class:"text-gray-500 dark:text-gray-400 mt-4"}," No invitations found ")],-1)])]),default:y(()=>[c(l(P),{field:"email",header:"Email"}),c(l(P),{field:"role",header:"Role"},{body:y(({data:p})=>[c(l(_),{value:p.role,severity:F(p.role)},null,8,["value","severity"])]),_:1}),c(l(P),{field:"status",header:"Status"},{body:y(({data:p})=>[c(l(_),{value:p.status,severity:pe(p.status)},null,8,["value","severity"])]),_:1}),c(l(P),{field:"expires_at",header:"Expires"},{body:y(({data:p})=>[W(f(A(p.expires_at)),1)]),_:1}),c(l(P),{field:"created_at",header:"Sent"},{body:y(({data:p})=>[W(f(A(p.created_at)),1)]),_:1})]),_:1},8,["value"])])]),_:1}),c(l(H),{header:"Activity"},{default:y(()=>[a("div",Ht,[o[21]||(o[21]=a("h3",{class:"text-lg font-semibold"},"Recent Activity",-1)),q.value.length>0?(v(),h("div",jt,[(v(!0),h(S,null,Y(q.value,p=>(v(),h("div",{key:p.id,class:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},[c(l(_),{value:p.action,severity:be(p.action)},null,8,["value","severity"]),a("div",Lt,[a("p",Ot,f(p.entity_type)+" "+f(p.action),1),a("p",Ft,f(ve(p.created_at)),1)])]))),128))])):(v(),h("div",Vt,[...o[20]||(o[20]=[a("i",{class:"pi pi-history text-4xl text-gray-400"},null,-1),a("p",{class:"text-gray-500 dark:text-gray-400 mt-4"}," No recent activity found ",-1)])]))])]),_:1})]),_:1},8,["activeIndex"])]),_:1})])):(v(),h("div",Rt,[o[22]||(o[22]=a("i",{class:"pi pi-exclamation-triangle text-4xl text-yellow-500"},null,-1)),o[23]||(o[23]=a("h2",{class:"text-xl font-semibold mt-4"},"Company Not Found",-1)),o[24]||(o[24]=a("p",{class:"text-gray-600 dark:text-gray-400 mt-2"}," The company you're looking for doesn't exist or you don't have access to it. ",-1)),c(l(z),{href:"/companies"},{default:y(()=>[c(l(C),{label:"Back to Companies",class:"mt-4"})]),_:1})]))]))}},ra=Ce(Ut,[["__scopeId","data-v-aeec7ac0"]]);export{ra as default};
