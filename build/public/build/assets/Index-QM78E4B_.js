import{d as K,q as B,s as W,c as f,a as s,u as e,h as q,w as o,b as a,j as p,t as l,N as z,e as d,o as m,F as D,r as M,i as b,A as O,y as g,f as u}from"./app-B-wLZQl0.js";import{S as G,_ as H}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_}from"./index-D8JUok4n.js";import{_ as J}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{_ as S}from"./index-a73qSWOM.js";import{_ as N,a as V}from"./CardContent.vue_vue_type_script_setup_true_lang-f-xi8uWj.js";import{_ as Q}from"./Checkbox.vue_vue_type_script_setup_true_lang-yNvHsWJi.js";import{_ as X}from"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import{r as Y,b as Z,c as tt,d as et,e as v,s as st}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import{L as h}from"./plus-C63jdNg7.js";import{C as E}from"./circle-plus-Cwyhw5NW.js";import{W as nt}from"./wallet-DCTJfQEJ.js";import{C as at}from"./credit-card-CZIyPTcw.js";import{B as ot}from"./building-2-DLYGST8U.js";import{E as it}from"./ellipsis-DRk1q4ie.js";import{E as rt}from"./eye-pMepw5BK.js";import{P as lt}from"./pencil-R0Fiz8Cs.js";import{T as ct}from"./trash-2-BxVbfljz.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./loader-circle-BSwxCoSE.js";import"./createLucideIcon-CbxkoCx6.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./nullish-CHIgUVhi.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./Collection-DN_gmv-a.js";import"./RovingFocusItem-PDr5bOed.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";import"./check-DogY6QNG.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./file-text-CFHWSPvd.js";import"./users-CkYIFvpU.js";import"./calendar-B0yi2zLg.js";const dt={class:"flex items-center justify-between"},mt={class:"text-sm text-muted-foreground"},ut={class:"text-2xl font-bold"},ft={class:"text-right"},pt={class:"text-2xl font-bold"},gt={class:"mb-6 flex flex-wrap gap-4 items-center"},_t={class:"relative flex-1 max-w-sm"},kt={class:"flex items-center gap-2"},bt={class:"space-y-4"},vt={key:0,class:"text-center py-12 text-muted-foreground bg-muted/20 rounded-lg border border-dashed"},xt={class:"flex items-start justify-between"},yt={class:"flex items-start gap-4"},ht={class:"p-3 rounded-full bg-primary/10"},Ct={class:"flex items-center gap-2"},$t={class:"font-semibold text-lg"},wt={class:"text-sm text-muted-foreground"},At={key:0,class:"text-sm text-muted-foreground"},Bt={class:"flex items-center gap-4"},Dt={class:"text-right"},St={class:"font-bold text-lg"},Nt={class:"flex items-center gap-2 text-sm text-muted-foreground"},Vt={key:0,class:"text-amber-600"},Et={key:1,class:"text-green-600"},Pt={class:"text-xs text-muted-foreground"},Tt={key:0,class:"mt-6 flex justify-center gap-2"},Lt={class:"flex items-center px-4 text-sm text-muted-foreground"},he=K({__name:"Index",props:{company:{},bankAccounts:{},filters:{}},setup(i){const c=i,P=[{title:"Dashboard",href:`/${c.company.slug}`},{title:"Banking",href:`/${c.company.slug}/banking/accounts`}],x=B(c.filters.search),y=B(c.filters.include_inactive),T={checking:h,savings:ot,credit_card:at,cash:nt,other:Y},L={checking:"Checking",savings:"Savings",credit_card:"Credit Card",cash:"Petty Cash",other:"Other"},C=(r,t)=>new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(r),I=r=>r?new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never",$=()=>{u.get(`/${c.company.slug}/banking/accounts`,{search:x.value,include_inactive:y.value},{preserveState:!0})},w=()=>{u.get(`/${c.company.slug}/banking/accounts/create`)},A=r=>{u.get(`/${c.company.slug}/banking/accounts/${r}`)},j=r=>{u.get(`/${c.company.slug}/banking/accounts/${r}/edit`)},U=r=>{u.get(`/${c.company.slug}/banking/reconciliation/start`,{bank_account_id:r})},F=r=>{if(r.unreconciled_count>0){alert("Cannot delete account with unreconciled transactions.");return}confirm(`Delete "${r.account_name}"?`)&&u.delete(`/${c.company.slug}/banking/accounts/${r.id}`)},R=W(()=>c.bankAccounts.data.reduce((r,t)=>r+t.current_balance,0));return(r,t)=>(m(),f(D,null,[s(e(q),{title:"Bank Accounts"}),s(H,{title:"Bank Accounts",breadcrumbs:P,icon:e(h)},{actions:o(()=>[s(e(_),{onClick:w},{default:o(()=>[s(e(E),{class:"mr-2 h-4 w-4"}),t[5]||(t[5]=d(" Add Bank Account ",-1))]),_:1})]),default:o(()=>[s(e(N),{class:"mb-6"},{default:o(()=>[s(e(V),{class:"pt-6"},{default:o(()=>[a("div",dt,[a("div",null,[a("p",mt,"Total Balance ("+l(i.company.base_currency)+")",1),a("p",ut,l(C(R.value,i.company.base_currency)),1)]),a("div",ft,[t[6]||(t[6]=a("p",{class:"text-sm text-muted-foreground"},"Active Accounts",-1)),a("p",pt,l(i.bankAccounts.data.filter(n=>n.is_active).length),1)])])]),_:1})]),_:1}),a("div",gt,[a("div",_t,[s(e(G),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s(e(J),{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=n=>x.value=n),placeholder:"Search accounts...",class:"pl-10",onKeyup:z($,["enter"])},null,8,["modelValue"])]),a("div",kt,[s(e(Q),{id:"include-inactive",checked:y.value,"onUpdate:checked":t[1]||(t[1]=n=>{y.value=n,$()})},null,8,["checked"]),s(e(X),{for:"include-inactive",class:"text-sm cursor-pointer"},{default:o(()=>[...t[7]||(t[7]=[d("Show inactive",-1)])]),_:1})])]),a("div",bt,[i.bankAccounts.data.length===0?(m(),f("div",vt,[s(e(h),{class:"mx-auto h-12 w-12 mb-4 opacity-50"}),t[9]||(t[9]=a("p",{class:"text-lg font-medium"},"No bank accounts found",-1)),t[10]||(t[10]=a("p",{class:"text-sm mb-4"},"Add your first bank account to start tracking transactions",-1)),s(e(_),{onClick:w},{default:o(()=>[s(e(E),{class:"mr-2 h-4 w-4"}),t[8]||(t[8]=d(" Add Bank Account ",-1))]),_:1})])):p("",!0),(m(!0),f(D,null,M(i.bankAccounts.data,n=>(m(),b(e(N),{key:n.id,class:"hover:shadow-md transition-shadow cursor-pointer",onClick:k=>A(n.id)},{default:o(()=>[s(e(V),{class:"pt-6"},{default:o(()=>[a("div",xt,[a("div",yt,[a("div",ht,[(m(),b(O(T[n.account_type]),{class:"h-6 w-6 text-primary"}))]),a("div",null,[a("div",Ct,[a("h3",$t,l(n.account_name),1),n.is_primary?(m(),b(e(S),{key:0,variant:"secondary"},{default:o(()=>[...t[11]||(t[11]=[d("Primary",-1)])]),_:1})):p("",!0),n.is_active?p("",!0):(m(),b(e(S),{key:1,variant:"outline"},{default:o(()=>[...t[12]||(t[12]=[d("Inactive",-1)])]),_:1}))]),a("p",wt,l(L[n.account_type])+" â€¢ "+l(n.account_number),1),n.bank?(m(),f("p",At,l(n.bank.name),1)):p("",!0)])]),a("div",Bt,[a("div",Dt,[a("p",St,l(C(n.current_balance,n.currency)),1),a("div",Nt,[n.unreconciled_count>0?(m(),f("span",Vt,l(n.unreconciled_count)+" unreconciled ",1)):(m(),f("span",Et," All reconciled "))]),a("p",Pt," Last reconciled: "+l(I(n.last_reconciled_date)),1)]),s(e(Z),null,{default:o(()=>[s(e(tt),{"as-child":"",onClick:t[2]||(t[2]=g(()=>{},["stop"]))},{default:o(()=>[s(e(_),{variant:"ghost",size:"icon"},{default:o(()=>[s(e(it),{class:"h-4 w-4"})]),_:1})]),_:1}),s(e(et),{align:"end"},{default:o(()=>[s(e(v),{onClick:g(k=>A(n.id),["stop"])},{default:o(()=>[s(e(rt),{class:"mr-2 h-4 w-4"}),t[13]||(t[13]=d(" View Details ",-1))]),_:1},8,["onClick"]),s(e(v),{onClick:g(k=>j(n.id),["stop"])},{default:o(()=>[s(e(lt),{class:"mr-2 h-4 w-4"}),t[14]||(t[14]=d(" Edit ",-1))]),_:1},8,["onClick"]),s(e(v),{onClick:g(k=>U(n.id),["stop"])},{default:o(()=>[s(e(st),{class:"mr-2 h-4 w-4"}),t[15]||(t[15]=d(" Reconcile ",-1))]),_:1},8,["onClick"]),s(e(v),{onClick:g(k=>F(n),["stop"]),class:"text-destructive"},{default:o(()=>[s(e(ct),{class:"mr-2 h-4 w-4"}),t[16]||(t[16]=d(" Delete ",-1))]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),i.bankAccounts.last_page>1?(m(),f("div",Tt,[s(e(_),{variant:"outline",disabled:i.bankAccounts.current_page===1,onClick:t[3]||(t[3]=n=>e(u).get(`/${i.company.slug}/banking/accounts`,{page:i.bankAccounts.current_page-1,...i.filters}))},{default:o(()=>[...t[17]||(t[17]=[d(" Previous ",-1)])]),_:1},8,["disabled"]),a("span",Lt," Page "+l(i.bankAccounts.current_page)+" of "+l(i.bankAccounts.last_page),1),s(e(_),{variant:"outline",disabled:i.bankAccounts.current_page===i.bankAccounts.last_page,onClick:t[4]||(t[4]=n=>e(u).get(`/${i.company.slug}/banking/accounts`,{page:i.bankAccounts.current_page+1,...i.filters}))},{default:o(()=>[...t[18]||(t[18]=[d(" Next ",-1)])]),_:1},8,["disabled"])])):p("",!0)]),_:1},8,["icon"])],64))}});export{he as default};
