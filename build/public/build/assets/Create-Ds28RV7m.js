import{d as L,s as O,x as M,K as P,c as i,a as l,u as e,h as z,w as r,b as a,y as K,j as v,o as d,F as p,r as y,t as n,e as u,B as D,i as b,f as G}from"./app-B-wLZQl0.js";import{_ as H}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as F}from"./index-D8JUok4n.js";import{_ as I}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import{_ as R}from"./Textarea.vue_vue_type_script_setup_true_lang-DrbQ2zws.js";import{_ as k,a as $,b as w,c as N,d as _}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{_ as V,a as x}from"./CardContent.vue_vue_type_script_setup_true_lang-f-xi8uWj.js";import{_ as U}from"./CardDescription.vue_vue_type_script_setup_true_lang-D23jLuEj.js";import{_ as C}from"./CardHeader.vue_vue_type_script_setup_true_lang-Cn7HWfaF.js";import{_ as g}from"./CardTitle.vue_vue_type_script_setup_true_lang-DXA8XANX.js";import{A as J}from"./arrow-left-DSX0n2_N.js";import{S as Q}from"./save-CBmuHaqJ.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./Collection-DN_gmv-a.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./createLucideIcon-CbxkoCx6.js";import"./plus-C63jdNg7.js";import"./check-DogY6QNG.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./file-text-CFHWSPvd.js";import"./users-CkYIFvpU.js";import"./calendar-B0yi2zLg.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";import"./loader-circle-BSwxCoSE.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./index-a73qSWOM.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./nullish-CHIgUVhi.js";const W={key:0,class:"rounded-md bg-destructive/15 p-4"},X={class:"text-sm text-destructive"},Y={class:"list-disc list-inside mt-2"},Z={key:0,class:"text-sm text-destructive mt-1"},h={key:0,class:"text-sm text-destructive mt-1"},ee={key:1,class:"text-sm text-muted-foreground mt-1"},te={key:0,class:"text-sm text-destructive mt-1"},le={class:"flex justify-between"},re={class:"font-bold"},se={class:"flex justify-between text-sm text-muted-foreground"},oe={class:"flex justify-between text-sm text-muted-foreground"},ue={key:0,class:"flex justify-between text-sm text-muted-foreground"},Ge=L({__name:"Create",props:{company:{},customers:{},invoices:{},currencies:{}},setup(c){const f=c,T=O(()=>[{title:"Dashboard",href:"/dashboard"},{title:f.company.name,href:`/${f.company.slug}`},{title:"Credit Notes",href:`/${f.company.slug}/credit-notes`},{title:"Create"}]),s=M({customer_id:"",invoice_id:"",amount:0,base_currency:f.company.base_currency,reason:"",status:"draft",credit_date:new Date().toISOString().split("T")[0],notes:"",terms:""}),j=[{value:"draft",label:"Draft"},{value:"issued",label:"Issued"}],q=O(()=>s.customer_id?f.invoices.filter(S=>S.customer_id===s.customer_id):[]);P(()=>s.customer_id,()=>{s.invoice_id=""});const B=(S,t)=>new Intl.NumberFormat("en-US",{style:"currency",currency:t||s.base_currency||"USD"}).format(S),A=()=>{s.post(`/${f.company.slug}/credit-notes`)};return(S,t)=>(d(),i(p,null,[l(e(z),{title:"Create Credit Note"}),l(H,{title:"Create Credit Note",breadcrumbs:T.value},{actions:r(()=>[l(e(F),{variant:"outline",onClick:t[0]||(t[0]=o=>e(G).get(`/${c.company.slug}/credit-notes`))},{default:r(()=>[l(e(J),{class:"mr-2 h-4 w-4"}),t[10]||(t[10]=u(" Back ",-1))]),_:1}),l(e(F),{onClick:A,disabled:e(s).processing},{default:r(()=>[l(e(Q),{class:"mr-2 h-4 w-4"}),t[11]||(t[11]=u(" Create Credit Note ",-1))]),_:1},8,["disabled"])]),default:r(()=>[a("form",{onSubmit:K(A,["prevent"]),class:"space-y-6"},[Object.keys(e(s).errors).length>0?(d(),i("div",W,[a("div",X,[t[12]||(t[12]=a("p",{class:"font-medium"},"Please fix the following errors:",-1)),a("ul",Y,[(d(!0),i(p,null,y(e(s).errors,(o,E)=>(d(),i("li",{key:E},n(o),1))),128))])])])):v("",!0),l(e(V),null,{default:r(()=>[l(e(C),null,{default:r(()=>[l(e(g),null,{default:r(()=>[...t[13]||(t[13]=[u("Customer Information",-1)])]),_:1}),l(e(U),null,{default:r(()=>[...t[14]||(t[14]=[u("Select the customer for this credit note",-1)])]),_:1})]),_:1}),l(e(x),{class:"space-y-4"},{default:r(()=>[a("div",null,[l(e(m),{for:"customer_id"},{default:r(()=>[...t[15]||(t[15]=[u("Customer *",-1)])]),_:1}),l(e(k),{modelValue:e(s).customer_id,"onUpdate:modelValue":t[1]||(t[1]=o=>e(s).customer_id=o),required:""},{default:r(()=>[l(e($),{class:D({"border-destructive":e(s).errors.customer_id})},{default:r(()=>[l(e(w),{placeholder:"Select a customer"})]),_:1},8,["class"]),l(e(N),null,{default:r(()=>[(d(!0),i(p,null,y(c.customers.filter(o=>o.id&&o.id!==""),o=>(d(),b(e(_),{key:o.id,value:o.id},{default:r(()=>[u(n(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(s).errors.customer_id?(d(),i("p",Z,n(e(s).errors.customer_id),1)):v("",!0)]),a("div",null,[l(e(m),{for:"invoice_id"},{default:r(()=>[...t[16]||(t[16]=[u("Apply to Invoice (Optional)",-1)])]),_:1}),l(e(k),{modelValue:e(s).invoice_id,"onUpdate:modelValue":t[2]||(t[2]=o=>e(s).invoice_id=o),disabled:!e(s).customer_id},{default:r(()=>[l(e($),null,{default:r(()=>[l(e(w),{placeholder:e(s).customer_id?"Select an invoice":"Select a customer first"},null,8,["placeholder"])]),_:1}),l(e(N),null,{default:r(()=>[q.value.length>0?(d(!0),i(p,{key:0},y(q.value,o=>(d(),b(e(_),{key:o.id,value:o.id},{default:r(()=>[u(n(o.invoice_number)+" - "+n(B(o.total_amount,o.currency)),1)]),_:2},1032,["value"]))),128)):(d(),b(e(_),{key:1,value:"none",disabled:""},{default:r(()=>[u(n(e(s).customer_id?"No invoices for this customer":"Select a customer first"),1)]),_:1}))]),_:1})]),_:1},8,["modelValue","disabled"])])]),_:1})]),_:1}),l(e(V),null,{default:r(()=>[l(e(C),null,{default:r(()=>[l(e(g),null,{default:r(()=>[...t[17]||(t[17]=[u("Credit Note Details",-1)])]),_:1}),l(e(U),null,{default:r(()=>[...t[18]||(t[18]=[u("Basic information about the credit note",-1)])]),_:1})]),_:1}),l(e(x),{class:"grid grid-cols-1 md:grid-cols-2 gap-4"},{default:r(()=>[a("div",null,[l(e(m),{for:"amount"},{default:r(()=>[...t[19]||(t[19]=[u("Amount *",-1)])]),_:1}),l(e(I),{id:"amount",modelValue:e(s).amount,"onUpdate:modelValue":t[3]||(t[3]=o=>e(s).amount=o),modelModifiers:{number:!0},type:"number",min:"0.01",step:"0.01",placeholder:"0.00",required:"",class:D({"border-destructive":e(s).errors.amount})},null,8,["modelValue","class"]),e(s).errors.amount?(d(),i("p",h,n(e(s).errors.amount),1)):(d(),i("p",ee,n(B(e(s).amount)),1))]),a("div",null,[l(e(m),{for:"credit_date"},{default:r(()=>[...t[20]||(t[20]=[u("Credit Date *",-1)])]),_:1}),l(e(I),{id:"credit_date",modelValue:e(s).credit_date,"onUpdate:modelValue":t[4]||(t[4]=o=>e(s).credit_date=o),type:"date",required:""},null,8,["modelValue"])]),a("div",null,[l(e(m),{for:"status"},{default:r(()=>[...t[21]||(t[21]=[u("Status *",-1)])]),_:1}),l(e(k),{modelValue:e(s).status,"onUpdate:modelValue":t[5]||(t[5]=o=>e(s).status=o),required:""},{default:r(()=>[l(e($),null,{default:r(()=>[l(e(w),{placeholder:"Select status"})]),_:1}),l(e(N),null,{default:r(()=>[(d(),i(p,null,y(j,o=>l(e(_),{key:o.value,value:o.value},{default:r(()=>[u(n(o.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])]),a("div",null,[l(e(m),{for:"base_currency"},{default:r(()=>[...t[22]||(t[22]=[u("Currency *",-1)])]),_:1}),l(e(k),{modelValue:e(s).base_currency,"onUpdate:modelValue":t[6]||(t[6]=o=>e(s).base_currency=o),required:""},{default:r(()=>[l(e($),null,{default:r(()=>[l(e(w),{placeholder:"Select currency"})]),_:1}),l(e(N),null,{default:r(()=>[(d(!0),i(p,null,y(c.currencies,o=>(d(),b(e(_),{key:o.currency_code,value:o.currency_code},{default:r(()=>[u(n(o.currency_code)+n(o.is_base?" (Base)":""),1)]),_:2},1032,["value"]))),128)),c.currencies.length===0?(d(),b(e(_),{key:0,value:"USD"},{default:r(()=>[...t[23]||(t[23]=[u("USD",-1)])]),_:1})):v("",!0)]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),l(e(V),null,{default:r(()=>[l(e(C),null,{default:r(()=>[l(e(g),null,{default:r(()=>[...t[24]||(t[24]=[u("Reason for Credit",-1)])]),_:1}),l(e(U),null,{default:r(()=>[...t[25]||(t[25]=[u("Explain why this credit note is being issued",-1)])]),_:1})]),_:1}),l(e(x),null,{default:r(()=>[a("div",null,[l(e(m),{for:"reason"},{default:r(()=>[...t[26]||(t[26]=[u("Reason *",-1)])]),_:1}),l(e(I),{id:"reason",modelValue:e(s).reason,"onUpdate:modelValue":t[7]||(t[7]=o=>e(s).reason=o),placeholder:"e.g., Product return, Service discount, Billing error",required:"",class:D({"border-destructive":e(s).errors.reason})},null,8,["modelValue","class"]),e(s).errors.reason?(d(),i("p",te,n(e(s).errors.reason),1)):v("",!0)])]),_:1})]),_:1}),l(e(V),null,{default:r(()=>[l(e(C),null,{default:r(()=>[l(e(g),null,{default:r(()=>[...t[27]||(t[27]=[u("Additional Information",-1)])]),_:1}),l(e(U),null,{default:r(()=>[...t[28]||(t[28]=[u("Optional terms and notes",-1)])]),_:1})]),_:1}),l(e(x),{class:"space-y-4"},{default:r(()=>[a("div",null,[l(e(m),{for:"terms"},{default:r(()=>[...t[29]||(t[29]=[u("Terms",-1)])]),_:1}),l(e(R),{id:"terms",modelValue:e(s).terms,"onUpdate:modelValue":t[8]||(t[8]=o=>e(s).terms=o),placeholder:"Credit note terms and conditions...",rows:"3"},null,8,["modelValue"])]),a("div",null,[l(e(m),{for:"notes"},{default:r(()=>[...t[30]||(t[30]=[u("Internal Notes",-1)])]),_:1}),l(e(R),{id:"notes",modelValue:e(s).notes,"onUpdate:modelValue":t[9]||(t[9]=o=>e(s).notes=o),placeholder:"Internal notes about this credit note...",rows:"3"},null,8,["modelValue"])])]),_:1})]),_:1}),l(e(V),null,{default:r(()=>[l(e(C),null,{default:r(()=>[l(e(g),null,{default:r(()=>[...t[31]||(t[31]=[u("Credit Note Summary",-1)])]),_:1})]),_:1}),l(e(x),{class:"space-y-3"},{default:r(()=>[a("div",le,[t[32]||(t[32]=a("span",null,"Credit Amount:",-1)),a("span",re,n(B(e(s).amount)),1)]),a("div",se,[t[33]||(t[33]=a("span",null,"Customer:",-1)),a("span",null,n(e(s).customer_id?"Selected":"Not selected"),1)]),a("div",oe,[t[34]||(t[34]=a("span",null,"Status:",-1)),a("span",null,n(j.find(o=>o.value===e(s).status)?.label),1)]),e(s).reason?(d(),i("div",ue,[t[35]||(t[35]=a("span",null,"Reason:",-1)),a("span",null,n(e(s).reason),1)])):v("",!0)]),_:1})]),_:1})],32)]),_:1},8,["breadcrumbs"])],64))}});export{Ge as default};
