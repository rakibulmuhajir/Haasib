import{d as F,x as N,s as B,c as b,a as o,u as t,h as L,w as s,b as l,y as J,e as d,o as f,F as g,r as $,i as O,t as c,B as P}from"./app-B-wLZQl0.js";import{_ as A}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as V}from"./index-D8JUok4n.js";import{_}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{_ as r}from"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import{_ as q}from"./Checkbox.vue_vue_type_script_setup_true_lang-yNvHsWJi.js";import{_ as w,a as U,b as k,c as C,d as y}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{P as z}from"./plus-C63jdNg7.js";import{T as E}from"./trash-2-BxVbfljz.js";import{F as I}from"./file-text-CFHWSPvd.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./Collection-DN_gmv-a.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./createLucideIcon-CbxkoCx6.js";import"./check-DogY6QNG.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./users-CkYIFvpU.js";import"./calendar-B0yi2zLg.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";import"./loader-circle-BSwxCoSE.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./index-a73qSWOM.js";import"./nullish-CHIgUVhi.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./RovingFocusItem-PDr5bOed.js";const M={class:"grid gap-4 md:grid-cols-3"},Y={class:"flex items-center gap-2 pt-6"},G={class:"md:col-span-3"},H={class:"flex items-center justify-between"},K={class:"space-y-3"},Q={class:"md:col-span-4"},R={class:"md:col-span-2"},W={class:"md:col-span-3"},X={class:"md:col-span-2"},Z={class:"md:col-span-1 flex items-end justify-end"},h={class:"grid gap-2 md:w-1/3"},ee={class:"flex justify-between text-sm"},te={class:"flex justify-between text-sm"},oe={class:"flex justify-end gap-3"},Pe=F({__name:"Create",props:{company:{},accounts:{}},setup(x){const v=x,D=[{title:"Dashboard",href:`/${v.company.slug}`},{title:"Journals",href:`/${v.company.slug}/journals`},{title:"Create",href:`/${v.company.slug}/journals/create`}],i=N({transaction_date:new Date().toISOString().slice(0,10),posting_date:new Date().toISOString().slice(0,10),description:"",post:!0,entries:[{account_id:"",type:"debit",amount:"",description:""},{account_id:"",type:"credit",amount:"",description:""}]}),m=B(()=>{let u=0,e=0;return i.entries.forEach(a=>{const p=Number(a.amount)||0;a.type==="debit"?u+=p:e+=p}),{debit:u,credit:e,balanced:Math.abs(u-e)<1e-4}}),j=()=>{i.entries.push({account_id:"",type:"debit",amount:"",description:""})},S=u=>{i.entries.length>2&&i.entries.splice(u,1)},T=()=>{i.post(`/${v.company.slug}/journals`,{preserveScroll:!0})};return(u,e)=>(f(),b(g,null,[o(t(L),{title:"New Journal"}),o(A,{title:"New Journal",breadcrumbs:D,icon:t(I)},{default:s(()=>[l("form",{class:"space-y-6",onSubmit:J(T,["prevent"])},[l("div",M,[l("div",null,[o(t(r),{for:"transaction_date"},{default:s(()=>[...e[4]||(e[4]=[d("Transaction Date",-1)])]),_:1}),o(t(_),{id:"transaction_date",modelValue:t(i).transaction_date,"onUpdate:modelValue":e[0]||(e[0]=a=>t(i).transaction_date=a),type:"date",required:""},null,8,["modelValue"])]),l("div",null,[o(t(r),{for:"posting_date"},{default:s(()=>[...e[5]||(e[5]=[d("Posting Date",-1)])]),_:1}),o(t(_),{id:"posting_date",modelValue:t(i).posting_date,"onUpdate:modelValue":e[1]||(e[1]=a=>t(i).posting_date=a),type:"date",required:""},null,8,["modelValue"])]),l("div",Y,[o(t(q),{id:"post",checked:t(i).post,"onUpdate:checked":e[2]||(e[2]=a=>t(i).post=a)},null,8,["checked"]),o(t(r),{for:"post"},{default:s(()=>[...e[6]||(e[6]=[d("Post immediately",-1)])]),_:1})]),l("div",G,[o(t(r),{for:"description"},{default:s(()=>[...e[7]||(e[7]=[d("Description",-1)])]),_:1}),o(t(_),{id:"description",modelValue:t(i).description,"onUpdate:modelValue":e[3]||(e[3]=a=>t(i).description=a),placeholder:"Optional description"},null,8,["modelValue"])])]),l("div",H,[e[9]||(e[9]=l("div",{class:"text-lg font-semibold"},"Lines",-1)),o(t(V),{type:"button",variant:"outline",onClick:j},{default:s(()=>[o(t(z),{class:"mr-2 h-4 w-4"}),e[8]||(e[8]=d(" Add Line ",-1))]),_:1})]),l("div",K,[(f(!0),b(g,null,$(t(i).entries,(a,p)=>(f(),b("div",{key:p,class:"grid gap-3 rounded border p-3 md:grid-cols-12"},[l("div",Q,[o(t(r),null,{default:s(()=>[...e[10]||(e[10]=[d("Account",-1)])]),_:1}),o(t(w),{modelValue:a.account_id,"onUpdate:modelValue":n=>a.account_id=n},{default:s(()=>[o(t(U),null,{default:s(()=>[o(t(k),{placeholder:"Select account"})]),_:1}),o(t(C),null,{default:s(()=>[(f(!0),b(g,null,$(x.accounts,n=>(f(),O(t(y),{key:n.id,value:n.id},{default:s(()=>[d(c(n.code)+" â€” "+c(n.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),l("div",R,[o(t(r),null,{default:s(()=>[...e[11]||(e[11]=[d("Type",-1)])]),_:1}),o(t(w),{modelValue:a.type,"onUpdate:modelValue":n=>a.type=n},{default:s(()=>[o(t(U),null,{default:s(()=>[o(t(k),{placeholder:"Type"})]),_:1}),o(t(C),null,{default:s(()=>[o(t(y),{value:"debit"},{default:s(()=>[...e[12]||(e[12]=[d("Debit",-1)])]),_:1}),o(t(y),{value:"credit"},{default:s(()=>[...e[13]||(e[13]=[d("Credit",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),l("div",W,[o(t(r),null,{default:s(()=>[...e[14]||(e[14]=[d("Amount",-1)])]),_:1}),o(t(_),{modelValue:a.amount,"onUpdate:modelValue":n=>a.amount=n,type:"number",min:"0",step:"0.01"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",X,[o(t(r),null,{default:s(()=>[...e[15]||(e[15]=[d("Description",-1)])]),_:1}),o(t(_),{modelValue:a.description,"onUpdate:modelValue":n=>a.description=n,placeholder:"Optional"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",Z,[o(t(V),{type:"button",variant:"destructive",size:"icon",onClick:n=>S(p)},{default:s(()=>[o(t(E),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]))),128))]),l("div",h,[l("div",ee,[e[16]||(e[16]=l("span",null,"Total Debit",-1)),l("span",null,c(m.value.debit.toFixed(2)),1)]),l("div",te,[e[17]||(e[17]=l("span",null,"Total Credit",-1)),l("span",null,c(m.value.credit.toFixed(2)),1)]),l("div",{class:P(["flex justify-between text-sm font-semibold",m.value.balanced?"text-green-600":"text-red-600"])},[e[18]||(e[18]=l("span",null,"Balanced?",-1)),l("span",null,c(m.value.balanced?"Yes":"No"),1)],2)]),l("div",oe,[o(t(V),{type:"submit",disabled:!m.value.balanced||t(i).processing},{default:s(()=>[...e[19]||(e[19]=[d(" Save Journal ",-1)])]),_:1},8,["disabled"])])],32)]),_:1},8,["icon"])],64))}});export{Pe as default};
