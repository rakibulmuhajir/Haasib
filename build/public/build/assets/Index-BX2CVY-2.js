import{d as C,q as w,s as A,c as v,a as o,u as e,h as P,w as r,b as p,i as u,N as q,e as n,o as m,F as $,r as N,t as D,f as c}from"./app-B-wLZQl0.js";import{S as F,_ as I}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as U}from"./EmptyState.vue_vue_type_script_setup_true_lang-CrAvLLsO.js";import{_ as B}from"./DataTable.vue_vue_type_script_setup_true_lang-BQW8AXQk.js";import{_ as b}from"./index-a73qSWOM.js";import{_ as y}from"./index-D8JUok4n.js";import{_ as T}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{_ as K,a as R,b as W,c as j,d as x}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{_ as O}from"./Checkbox.vue_vue_type_script_setup_true_lang-yNvHsWJi.js";import{P as E}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import{T as H}from"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import{A as M}from"./arrow-right-left-CFtESBWp.js";import{C as Q}from"./circle-plus-Cwyhw5NW.js";import"./createLucideIcon-CbxkoCx6.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./Collection-DN_gmv-a.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./check-DogY6QNG.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./nullish-CHIgUVhi.js";import"./RovingFocusItem-PDr5bOed.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./building-2-DLYGST8U.js";import"./plus-C63jdNg7.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./file-text-CFHWSPvd.js";import"./users-CkYIFvpU.js";import"./calendar-B0yi2zLg.js";import"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import"./loader-circle-BSwxCoSE.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";const z={class:"mb-6 flex flex-wrap items-center gap-4"},G={class:"relative flex-1 min-w-[200px] max-w-sm"},J={class:"flex items-center space-x-2"},Ft=C({__name:"Index",props:{company:{},stockLevels:{},warehouses:{},filters:{}},setup(l){const i=l,f=w(i.filters.search),d=w(i.filters.warehouse_id||"all"),k=w(i.filters.low_stock_only),S=[{title:"Dashboard",href:`/${i.company.slug}`},{title:"Stock Levels",href:`/${i.company.slug}/stock`}],_=()=>{c.get(`/${i.company.slug}/stock`,{search:f.value,warehouse_id:d.value==="all"?"":d.value,low_stock_only:k.value?"1":""},{preserveState:!0})},g=a=>new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:3}).format(a),h=[{key:"sku",label:"SKU"},{key:"item_name",label:"Item"},{key:"warehouse",label:"Warehouse"},{key:"quantity",label:"On Hand"},{key:"available",label:"Available"},{key:"status",label:"Status"}],L=A(()=>i.stockLevels.data.map(a=>{const t=a.reorder_point??a.item_reorder_point??0,s=a.quantity<t&&t>0;return{id:a.id,item_id:a.item_id,sku:a.sku,item_name:a.item_name,warehouse:`${a.warehouse_name} (${a.warehouse_code})`,quantity:`${g(a.quantity)} ${a.unit_of_measure}`,available:`${g(a.available_quantity)} ${a.unit_of_measure}`,status:s?"low":"ok",_raw:a}})),V=a=>{c.get(`/${i.company.slug}/items/${a.item_id}`)};return(a,t)=>(m(),v($,null,[o(e(P),{title:"Stock Levels"}),o(I,{title:"Stock Levels",breadcrumbs:S},{actions:r(()=>[o(e(y),{variant:"outline",onClick:t[0]||(t[0]=s=>e(c).get(`/${l.company.slug}/stock/movements`))},{default:r(()=>[...t[6]||(t[6]=[n(" View Movements ",-1)])]),_:1}),o(e(y),{variant:"outline",onClick:t[1]||(t[1]=s=>e(c).get(`/${l.company.slug}/stock/transfer`))},{default:r(()=>[o(e(M),{class:"mr-2 h-4 w-4"}),t[7]||(t[7]=n(" Transfer ",-1))]),_:1}),o(e(y),{onClick:t[2]||(t[2]=s=>e(c).get(`/${l.company.slug}/stock/adjustment`))},{default:r(()=>[o(e(Q),{class:"mr-2 h-4 w-4"}),t[8]||(t[8]=n(" Adjustment ",-1))]),_:1})]),default:r(()=>[p("div",z,[p("div",G,[o(e(F),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),o(e(T),{modelValue:f.value,"onUpdate:modelValue":t[3]||(t[3]=s=>f.value=s),placeholder:"Search items...",class:"pl-9",onKeyup:q(_,["enter"])},null,8,["modelValue"])]),o(e(K),{modelValue:d.value,"onUpdate:modelValue":[t[4]||(t[4]=s=>d.value=s),_]},{default:r(()=>[o(e(R),{class:"w-[200px]"},{default:r(()=>[o(e(W),{placeholder:"All Warehouses"})]),_:1}),o(e(j),null,{default:r(()=>[o(e(x),{value:"all"},{default:r(()=>[...t[9]||(t[9]=[n("All Warehouses",-1)])]),_:1}),(m(!0),v($,null,N(l.warehouses,s=>(m(),u(e(x),{key:s.id,value:s.id},{default:r(()=>[n(D(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),p("div",J,[o(e(O),{id:"low_stock",checked:k.value,"onUpdate:checked":t[5]||(t[5]=s=>{k.value=s,_()})},null,8,["checked"]),t[10]||(t[10]=p("label",{for:"low_stock",class:"text-sm cursor-pointer"},"Low stock only",-1))])]),l.stockLevels.data.length===0?(m(),u(U,{key:0,title:"No stock records",description:"Stock levels will appear here once you start tracking inventory.",icon:e(E)},null,8,["icon"])):(m(),u(B,{key:1,columns:h,data:L.value,pagination:{currentPage:l.stockLevels.current_page,lastPage:l.stockLevels.last_page,perPage:l.stockLevels.per_page,total:l.stockLevels.total},onRowClick:V},{"cell-status":r(({row:s})=>[s.status==="low"?(m(),u(e(b),{key:0,variant:"destructive",class:"gap-1"},{default:r(()=>[o(e(H),{class:"h-3 w-3"}),t[11]||(t[11]=n(" Low Stock ",-1))]),_:1})):(m(),u(e(b),{key:1,variant:"success"},{default:r(()=>[...t[12]||(t[12]=[n("In Stock",-1)])]),_:1}))]),_:1},8,["data","pagination"]))]),_:1})],64))}});export{Ft as default};
