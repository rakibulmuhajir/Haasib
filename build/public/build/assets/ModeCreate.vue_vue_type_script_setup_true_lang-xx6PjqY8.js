import{d as E,z as L,x as N,s as S,E as B,c as p,b as l,a,w as n,e as u,u as s,F as g,r as x,i as _,j as w,o as r,t as f}from"./app-B-wLZQl0.js";import{_ as F}from"./index-D8JUok4n.js";import{_ as y}from"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import{_ as M}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{a as j,b as q,c as A,_ as D,d as O}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{_ as T}from"./SelectGroup.vue_vue_type_script_setup_true_lang-Cng8hgfl.js";import{_ as U}from"./SelectLabel.vue_vue_type_script_setup_true_lang-C2EqSPuI.js";import{L as z}from"./loader-circle-BSwxCoSE.js";const G={class:"space-y-4"},I={class:"grid gap-4"},P={class:"space-y-2"},R={class:"font-mono text-xs text-muted-foreground mr-2"},H={class:"space-y-2"},J={class:"flex justify-end pt-2"},os=E({__name:"ModeCreate",props:{transaction:{},accounts:{},suggestion:{}},emits:["success"],setup(b,{emit:v}){const i=b,$=v,V=L().props.company,t=N({bank_transaction_id:i.transaction.id,allocations:[{account_id:"",amount:Math.abs(Number(i.transaction.amount)),description:i.transaction.description}]}),h={expense:"Expenses",cogs:"Cost of Goods Sold",asset:"Assets",liability:"Liabilities",equity:"Equity",revenue:"Revenue",other_income:"Other Income",other_expense:"Other Expenses"},k=S(()=>{const c={};return i.accounts.forEach(e=>{const o=e.type||"other";c[o]||(c[o]=[]),c[o].push(e)}),c});B(()=>{i.suggestion&&(t.allocations[0].account_id=i.suggestion.account_id,t.allocations[0].description=i.suggestion.description)});const C=()=>{t.post(`/${V.slug}/banking/resolve/create`,{preserveScroll:!0,onSuccess:()=>$("success")})};return(c,e)=>(r(),p("div",G,[l("div",I,[l("div",P,[a(s(y),null,{default:n(()=>[...e[2]||(e[2]=[u("Category",-1)])]),_:1}),a(s(D),{modelValue:s(t).allocations[0].account_id,"onUpdate:modelValue":e[0]||(e[0]=o=>s(t).allocations[0].account_id=o)},{default:n(()=>[a(s(j),null,{default:n(()=>[a(s(q),{placeholder:"Select account..."})]),_:1}),a(s(A),{class:"max-h-[300px]"},{default:n(()=>[(r(!0),p(g,null,x(k.value,(o,m)=>(r(),_(s(T),{key:m},{default:n(()=>[a(s(U),{class:"px-2 py-1.5 text-xs font-semibold text-muted-foreground uppercase bg-muted/20"},{default:n(()=>[u(f(h[m]||m),1)]),_:2},1024),(r(!0),p(g,null,x(o,d=>(r(),_(s(O),{key:d.id,value:d.id},{default:n(()=>[l("span",R,f(d.code),1),u(" "+f(d.name),1)]),_:2},1032,["value"]))),128))]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])]),l("div",H,[a(s(y),null,{default:n(()=>[...e[3]||(e[3]=[u("Description",-1)])]),_:1}),a(s(M),{modelValue:s(t).allocations[0].description,"onUpdate:modelValue":e[1]||(e[1]=o=>s(t).allocations[0].description=o)},null,8,["modelValue"])])]),l("div",J,[a(s(F),{onClick:C,disabled:s(t).processing||!s(t).allocations[0].account_id},{default:n(()=>[s(t).processing?(r(),_(s(z),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):w("",!0),e[4]||(e[4]=u(" Create Transaction ",-1))]),_:1},8,["disabled"])])]))}});export{os as _};
