
   FAIL  Tests\Unit\Actions\Invoicing\InvoiceCreateTest
  â¨¯ it creates invoice successfully                                      0.69s  
  â¨¯ it handles idempotency key                                           0.17s  
  â¨¯ it returns existing invoice for duplicate idempotency key            0.18s  
  â¨¯ it logs duplicate request detection                                  0.18s  
  â¨¯ it uses user company_id when not provided                            0.17s  
  â¨¯ it handles nullable fields gracefully                                0.17s  
  â¨¯ it passes idempotency_key to service                                 0.17s  

   PASS  Tests\Unit\ExampleTest
  âœ“ that true is true                                                    0.16s  

   FAIL  Tests\Unit\Middleware\EnsureIdempotencyTest
  â¨¯ idempotency middleware stores payload hash instead of full payload
  â¨¯ idempotency middleware rejects key reuse with different payload
  â¨¯ idempotency middleware stores minimal response data
  â¨¯ idempotency middleware filters sensitive fields from hash
  â¨¯ idempotency middleware reconstructs minimal response from stored data

   FAIL  Tests\Unit\PermissionComposableTest
  â¨¯ Permission Composable Logic â†’ usePermissions composable returns correct structure
  â¨¯ Permission Composable Logic â†’ super admin has all can methods returning true
  â¨¯ Permission Composable Logic â†’ viewer has limited can methods
  â¨¯ Permission Composable Logic â†’ owner has most can methods
  â¨¯ Role-based Helper Methods â†’ role helpers return correct values
  â¨¯ Permission Inheritance â†’ super admin inherits all permissions
  â¨¯ Permission Inheritance â†’ regular users need explicit permissions
  â¨¯ Currency Permission Logic â†’ super admin can manage currencies anywhere
  â¨¯ Currency Permission Logic â†’ regular users need company currency permissions
  â¨¯ Company Management Permissions â†’ canManageCompany reflects role correctly
  â¨¯ Company Management Permissions â†’ super admin can manage any company

   FAIL  Tests\Unit\RbacTest
  â¨¯ RBAC Permission Tests â†’ it owner can manage company currencies       3.05s  
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\Actions\Invoicing\InvoiceCreateTest > it createâ€¦  Error   
  Class "App\Models\Invoice" not found

  at tests/Unit/Actions/Invoicing/InvoiceCreateTest.php:48
     44â–•         ],
     45â–•     ];
     46â–• 
     47â–•     // Mock the InvoiceService
  âžœ  48â–•     $expectedInvoice = Invoice::factory()->make([
     49â–•         'company_id' => $this->company->id,
     50â–•         'customer_id' => $this->customer->id,
     51â–•         'invoice_id' => (string) Str::uuid(),
     52â–•         'invoice_number' => 'INV-2025-001',

  1   tests/Unit/Actions/Invoicing/InvoiceCreateTest.php:48

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\Actions\Invoicing\InvoiceCreateTest > it handleâ€¦  Error   
  Class "App\Models\Invoice" not found

  at tests/Unit/Actions/Invoicing/InvoiceCreateTest.php:113
    109â–•             ],
    110â–•         ],
    111â–•     ];
    112â–• 
  âžœ 113â–•     $expectedInvoice = Invoice::factory()->make([
    114â–•         'company_id' => $this->company->id,
    115â–•         'customer_id' => $this->customer->id,
    116â–•         'invoice_id' => (string) \Illuminate\Support\Str::uuid(),
    117â–•         'invoice_number' => 'INV-2025-001',

  1   tests/Unit/Actions/Invoicing/InvoiceCreateTest.php:113

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\Actions\Invoicing\InvoiceCreateTest > it returnâ€¦  Error   
  Class "App\Models\Invoice" not found

  at tests/Unit/Actions/Invoicing/InvoiceCreateTest.php:139
    135â–•     // Arrange
    136â–•     $idempotencyKey = 'test-key-123';
    137â–• 
    138â–•     // Create an existing invoice with the idempotency key
  âžœ 139â–•     $existingInvoice = Invoice::factory()->create([
    140â–•         'company_id' => $this->company->id,
    141â–•         'customer_id' => $this->customer->id,
    142â–•         'idempotency_key' => $idempotencyKey,
    143â–•         'status' => 'draft',

  1   tests/Unit/Actions/Invoicing/InvoiceCreateTest.php:139

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\Actions\Invoicing\InvoiceCreateTest > it logs dâ€¦  Error   
  Class "App\Models\Invoice" not found

  at tests/Unit/Actions/Invoicing/InvoiceCreateTest.php:186
    182â–•     // Arrange
    183â–•     $idempotencyKey = 'test-key-123';
    184â–• 
    185â–•     // Create an existing invoice with the idempotency key
  âžœ 186â–•     $existingInvoice = Invoice::factory()->create([
    187â–•         'company_id' => $this->company->id,
    188â–•         'customer_id' => $this->customer->id,
    189â–•         'idempotency_key' => $idempotencyKey,
    190â–•     ]);

  1   tests/Unit/Actions/Invoicing/InvoiceCreateTest.php:186

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\Actions\Invoicing\InvoiceCreateTest > it uses uâ€¦  Error   
  Class "App\Models\Invoice" not found

  at tests/Unit/Actions/Invoicing/InvoiceCreateTest.php:235
    231â–•             ],
    232â–•         ],
    233â–•     ];
    234â–• 
  âžœ 235â–•     $expectedInvoice = Invoice::factory()->make([
    236â–•         'company_id' => $this->company->id,
    237â–•         'customer_id' => $this->customer->id,
    238â–•         'invoice_id' => (string) \Illuminate\Support\Str::uuid(),
    239â–•         'invoice_number' => 'INV-2025-001',

  1   tests/Unit/Actions/Invoicing/InvoiceCreateTest.php:235

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\Actions\Invoicing\InvoiceCreateTest > it handleâ€¦  Error   
  Class "App\Models\Invoice" not found

  at tests/Unit/Actions/Invoicing/InvoiceCreateTest.php:287
    283â–•         ],
    284â–•         // Optional fields omitted
    285â–•     ];
    286â–• 
  âžœ 287â–•     $expectedInvoice = Invoice::factory()->make([
    288â–•         'company_id' => $this->company->id,
    289â–•         'customer_id' => $this->customer->id,
    290â–•         'invoice_id' => (string) \Illuminate\Support\Str::uuid(),
    291â–•         'invoice_number' => 'INV-2025-001',

  1   tests/Unit/Actions/Invoicing/InvoiceCreateTest.php:287

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\Actions\Invoicing\InvoiceCreateTest > it passesâ€¦  Error   
  Class "App\Models\Invoice" not found

  at tests/Unit/Actions/Invoicing/InvoiceCreateTest.php:322
    318â–•             ],
    319â–•         ],
    320â–•     ];
    321â–• 
  âžœ 322â–•     $expectedInvoice = Invoice::factory()->make([
    323â–•         'company_id' => $this->company->id,
    324â–•         'customer_id' => $this->customer->id,
    325â–•         'invoice_id' => (string) \Illuminate\Support\Str::uuid(),
    326â–•         'invoice_number' => 'INV-2025-001',

  1   tests/Unit/Actions/Invoicing/InvoiceCreateTest.php:322

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\Middleware\EnsureIdempotencyTest > ideâ€¦  QueryException   
  SQLSTATE[42P07]: Duplicate table: 7 ERROR:  relation "customers" already exists (Connection: pgsql, SQL: create table "hrm"."customers" ("customer_id" uuid not null, "company_id" uuid not null, "name" varchar(255) not null, "email" varchar(255) null, "phone" varchar(50) null, "tax_number" varchar(100) null, "billing_address" text null, "shipping_address" text null, "currency_id" uuid null, "is_active" boolean not null default '1', "idempotency_key" varchar(128) null, "created_at" timestamp(0) without time zone null, "updated_at" timestamp(0) without time zone null, "deleted_at" timestamp(0) without time zone null, "created_by" uuid null, "updated_by" uuid null))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:570
    566â–•             $this->bindValues($statement, $this->prepareBindings($bindings));
    567â–• 
    568â–•             $this->recordsHaveBeenModified();
    569â–• 
  âžœ 570â–•             return $statement->execute();
    571â–•         });
    572â–•     }
    573â–• 
    574â–•     /**

      [2m+8 vendor frames [22m
  9   database/migrations/2025_09_13_074917_create_customers_table.php:14

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\Middleware\EnsureIdempotencyTest > ideâ€¦  QueryException   
  SQLSTATE[42P07]: Duplicate table: 7 ERROR:  relation "customers" already exists (Connection: pgsql, SQL: create table "hrm"."customers" ("customer_id" uuid not null, "company_id" uuid not null, "name" varchar(255) not null, "email" varchar(255) null, "phone" varchar(50) null, "tax_number" varchar(100) null, "billing_address" text null, "shipping_address" text null, "currency_id" uuid null, "is_active" boolean not null default '1', "idempotency_key" varchar(128) null, "created_at" timestamp(0) without time zone null, "updated_at" timestamp(0) without time zone null, "deleted_at" timestamp(0) without time zone null, "created_by" uuid null, "updated_by" uuid null))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:570
    566â–•             $this->bindValues($statement, $this->prepareBindings($bindings));
    567â–• 
    568â–•             $this->recordsHaveBeenModified();
    569â–• 
  âžœ 570â–•             return $statement->execute();
    571â–•         });
    572â–•     }
    573â–• 
    574â–•     /**

      [2m+8 vendor frames [22m
  9   database/migrations/2025_09_13_074917_create_customers_table.php:14

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\Middleware\EnsureIdempotencyTest > ideâ€¦  QueryException   
  SQLSTATE[42P07]: Duplicate table: 7 ERROR:  relation "customers" already exists (Connection: pgsql, SQL: create table "hrm"."customers" ("customer_id" uuid not null, "company_id" uuid not null, "name" varchar(255) not null, "email" varchar(255) null, "phone" varchar(50) null, "tax_number" varchar(100) null, "billing_address" text null, "shipping_address" text null, "currency_id" uuid null, "is_active" boolean not null default '1', "idempotency_key" varchar(128) null, "created_at" timestamp(0) without time zone null, "updated_at" timestamp(0) without time zone null, "deleted_at" timestamp(0) without time zone null, "created_by" uuid null, "updated_by" uuid null))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:570
    566â–•             $this->bindValues($statement, $this->prepareBindings($bindings));
    567â–• 
    568â–•             $this->recordsHaveBeenModified();
    569â–• 
  âžœ 570â–•             return $statement->execute();
    571â–•         });
    572â–•     }
    573â–• 
    574â–•     /**

      [2m+8 vendor frames [22m
  9   database/migrations/2025_09_13_074917_create_customers_table.php:14

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\Middleware\EnsureIdempotencyTest > ideâ€¦  QueryException   
  SQLSTATE[42P07]: Duplicate table: 7 ERROR:  relation "customers" already exists (Connection: pgsql, SQL: create table "hrm"."customers" ("customer_id" uuid not null, "company_id" uuid not null, "name" varchar(255) not null, "email" varchar(255) null, "phone" varchar(50) null, "tax_number" varchar(100) null, "billing_address" text null, "shipping_address" text null, "currency_id" uuid null, "is_active" boolean not null default '1', "idempotency_key" varchar(128) null, "created_at" timestamp(0) without time zone null, "updated_at" timestamp(0) without time zone null, "deleted_at" timestamp(0) without time zone null, "created_by" uuid null, "updated_by" uuid null))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:570
    566â–•             $this->bindValues($statement, $this->prepareBindings($bindings));
    567â–• 
    568â–•             $this->recordsHaveBeenModified();
    569â–• 
  âžœ 570â–•             return $statement->execute();
    571â–•         });
    572â–•     }
    573â–• 
    574â–•     /**

      [2m+8 vendor frames [22m
  9   database/migrations/2025_09_13_074917_create_customers_table.php:14

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\Middleware\EnsureIdempotencyTest > ideâ€¦  QueryException   
  SQLSTATE[42P07]: Duplicate table: 7 ERROR:  relation "customers" already exists (Connection: pgsql, SQL: create table "hrm"."customers" ("customer_id" uuid not null, "company_id" uuid not null, "name" varchar(255) not null, "email" varchar(255) null, "phone" varchar(50) null, "tax_number" varchar(100) null, "billing_address" text null, "shipping_address" text null, "currency_id" uuid null, "is_active" boolean not null default '1', "idempotency_key" varchar(128) null, "created_at" timestamp(0) without time zone null, "updated_at" timestamp(0) without time zone null, "deleted_at" timestamp(0) without time zone null, "created_by" uuid null, "updated_by" uuid null))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:570
    566â–•             $this->bindValues($statement, $this->prepareBindings($bindings));
    567â–• 
    568â–•             $this->recordsHaveBeenModified();
    569â–• 
  âžœ 570â–•             return $statement->execute();
    571â–•         });
    572â–•     }
    573â–• 
    574â–•     /**

      [2m+8 vendor frames [22m
  9   database/migrations/2025_09_13_074917_create_customers_table.php:14

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\PermissionComposableTest > `Permissiâ€¦  RoleDoesNotExist   
  There is no role named `super_admin` for guard `web`.

  at vendor/spatie/laravel-permission/src/Exceptions/RoleDoesNotExist.php:11
      7â–• class RoleDoesNotExist extends InvalidArgumentException
      8â–• {
      9â–•     public static function named(string $roleName, ?string $guardName)
     10â–•     {
  âžœ  11â–•         return new static(__('There is no role named `:role` for guard `:guard`.', [
     12â–•             'role' => $roleName,
     13â–•             'guard' => $guardName,
     14â–•         ]));
     15â–•     }

      [2m+7 vendor frames [22m
  8   tests/Unit/PermissionComposableTest.php:13

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\PermissionComposableTest > `Permissiâ€¦  RoleDoesNotExist   
  There is no role named `super_admin` for guard `web`.

  at vendor/spatie/laravel-permission/src/Exceptions/RoleDoesNotExist.php:11
      7â–• class RoleDoesNotExist extends InvalidArgumentException
      8â–• {
      9â–•     public static function named(string $roleName, ?string $guardName)
     10â–•     {
  âžœ  11â–•         return new static(__('There is no role named `:role` for guard `:guard`.', [
     12â–•             'role' => $roleName,
     13â–•             'guard' => $guardName,
     14â–•         ]));
     15â–•     }

      [2m+7 vendor frames [22m
  8   tests/Unit/PermissionComposableTest.php:13

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\PermissionComposableTest > `Permissiâ€¦  RoleDoesNotExist   
  There is no role named `super_admin` for guard `web`.

  at vendor/spatie/laravel-permission/src/Exceptions/RoleDoesNotExist.php:11
      7â–• class RoleDoesNotExist extends InvalidArgumentException
      8â–• {
      9â–•     public static function named(string $roleName, ?string $guardName)
     10â–•     {
  âžœ  11â–•         return new static(__('There is no role named `:role` for guard `:guard`.', [
     12â–•             'role' => $roleName,
     13â–•             'guard' => $guardName,
     14â–•         ]));
     15â–•     }

      [2m+7 vendor frames [22m
  8   tests/Unit/PermissionComposableTest.php:13

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\PermissionComposableTest > `Permissiâ€¦  RoleDoesNotExist   
  There is no role named `super_admin` for guard `web`.

  at vendor/spatie/laravel-permission/src/Exceptions/RoleDoesNotExist.php:11
      7â–• class RoleDoesNotExist extends InvalidArgumentException
      8â–• {
      9â–•     public static function named(string $roleName, ?string $guardName)
     10â–•     {
  âžœ  11â–•         return new static(__('There is no role named `:role` for guard `:guard`.', [
     12â–•             'role' => $roleName,
     13â–•             'guard' => $guardName,
     14â–•         ]));
     15â–•     }

      [2m+7 vendor frames [22m
  8   tests/Unit/PermissionComposableTest.php:13

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\PermissionComposableTest > `Role-basâ€¦  RoleDoesNotExist   
  There is no role named `super_admin` for guard `web`.

  at vendor/spatie/laravel-permission/src/Exceptions/RoleDoesNotExist.php:11
      7â–• class RoleDoesNotExist extends InvalidArgumentException
      8â–• {
      9â–•     public static function named(string $roleName, ?string $guardName)
     10â–•     {
  âžœ  11â–•         return new static(__('There is no role named `:role` for guard `:guard`.', [
     12â–•             'role' => $roleName,
     13â–•             'guard' => $guardName,
     14â–•         ]));
     15â–•     }

      [2m+7 vendor frames [22m
  8   tests/Unit/PermissionComposableTest.php:13

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\PermissionComposableTest > `Permissiâ€¦  RoleDoesNotExist   
  There is no role named `super_admin` for guard `web`.

  at vendor/spatie/laravel-permission/src/Exceptions/RoleDoesNotExist.php:11
      7â–• class RoleDoesNotExist extends InvalidArgumentException
      8â–• {
      9â–•     public static function named(string $roleName, ?string $guardName)
     10â–•     {
  âžœ  11â–•         return new static(__('There is no role named `:role` for guard `:guard`.', [
     12â–•             'role' => $roleName,
     13â–•             'guard' => $guardName,
     14â–•         ]));
     15â–•     }

      [2m+7 vendor frames [22m
  8   tests/Unit/PermissionComposableTest.php:13

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\PermissionComposableTest > `Permissiâ€¦  RoleDoesNotExist   
  There is no role named `super_admin` for guard `web`.

  at vendor/spatie/laravel-permission/src/Exceptions/RoleDoesNotExist.php:11
      7â–• class RoleDoesNotExist extends InvalidArgumentException
      8â–• {
      9â–•     public static function named(string $roleName, ?string $guardName)
     10â–•     {
  âžœ  11â–•         return new static(__('There is no role named `:role` for guard `:guard`.', [
     12â–•             'role' => $roleName,
     13â–•             'guard' => $guardName,
     14â–•         ]));
     15â–•     }

      [2m+7 vendor frames [22m
  8   tests/Unit/PermissionComposableTest.php:13

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\PermissionComposableTest > `Currencyâ€¦  RoleDoesNotExist   
  There is no role named `super_admin` for guard `web`.

  at vendor/spatie/laravel-permission/src/Exceptions/RoleDoesNotExist.php:11
      7â–• class RoleDoesNotExist extends InvalidArgumentException
      8â–• {
      9â–•     public static function named(string $roleName, ?string $guardName)
     10â–•     {
  âžœ  11â–•         return new static(__('There is no role named `:role` for guard `:guard`.', [
     12â–•             'role' => $roleName,
     13â–•             'guard' => $guardName,
     14â–•         ]));
     15â–•     }

      [2m+7 vendor frames [22m
  8   tests/Unit/PermissionComposableTest.php:13

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\PermissionComposableTest > `Currencyâ€¦  RoleDoesNotExist   
  There is no role named `super_admin` for guard `web`.

  at vendor/spatie/laravel-permission/src/Exceptions/RoleDoesNotExist.php:11
      7â–• class RoleDoesNotExist extends InvalidArgumentException
      8â–• {
      9â–•     public static function named(string $roleName, ?string $guardName)
     10â–•     {
  âžœ  11â–•         return new static(__('There is no role named `:role` for guard `:guard`.', [
     12â–•             'role' => $roleName,
     13â–•             'guard' => $guardName,
     14â–•         ]));
     15â–•     }

      [2m+7 vendor frames [22m
  8   tests/Unit/PermissionComposableTest.php:13

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\PermissionComposableTest > `Companyâ€¦   RoleDoesNotExist   
  There is no role named `super_admin` for guard `web`.

  at vendor/spatie/laravel-permission/src/Exceptions/RoleDoesNotExist.php:11
      7â–• class RoleDoesNotExist extends InvalidArgumentException
      8â–• {
      9â–•     public static function named(string $roleName, ?string $guardName)
     10â–•     {
  âžœ  11â–•         return new static(__('There is no role named `:role` for guard `:guard`.', [
     12â–•             'role' => $roleName,
     13â–•             'guard' => $guardName,
     14â–•         ]));
     15â–•     }

      [2m+7 vendor frames [22m
  8   tests/Unit/PermissionComposableTest.php:13

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\PermissionComposableTest > `Companyâ€¦   RoleDoesNotExist   
  There is no role named `super_admin` for guard `web`.

  at vendor/spatie/laravel-permission/src/Exceptions/RoleDoesNotExist.php:11
      7â–• class RoleDoesNotExist extends InvalidArgumentException
      8â–• {
      9â–•     public static function named(string $roleName, ?string $guardName)
     10â–•     {
  âžœ  11â–•         return new static(__('There is no role named `:role` for guard `:guard`.', [
     12â–•             'role' => $roleName,
     13â–•             'guard' => $guardName,
     14â–•         ]));
     15â–•     }

      [2m+7 vendor frames [22m
  8   tests/Unit/PermissionComposableTest.php:13

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\RbacTest > `RBAC Permission Tests` â†’ it owner can manaâ€¦   
  Failed asserting that false is true.

  at tests/Unit/RbacTest.php:30
     26â–•         // Test permission within team context
     27â–•         expect($owner->hasPermissionTo('companies.currencies.manage'))->toBeFalse();
     28â–• 
     29â–•         setPermissionsTeamId($company->id);
  âžœ  30â–•         expect($owner->hasPermissionTo('companies.currencies.manage'))->toBeTrue();
     31â–•         expect($owner->hasPermissionTo('companies.settings.update'))->toBeTrue();
     32â–•         expect($owner->hasPermissionTo('users.roles.assign'))->toBeTrue();
     33â–• 
     34â–•         // Clear context for clean state

  1   tests/Unit/RbacTest.php:30


  Tests:    24 failed, 1 passed, [2m324 pending[22m (3 assertions)
  Duration: 17.78s

