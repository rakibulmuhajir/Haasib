import{d as X,s as Y,x as I,c as _,a as d,u as e,h as Z,w as s,b as i,e as a,o as n,F as k,r as S,i as E,t as r}from"./app-B-wLZQl0.js";import{_ as h}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as P}from"./index-a73qSWOM.js";import{_ as N}from"./index-D8JUok4n.js";import{_ as A,a as F}from"./CardContent.vue_vue_type_script_setup_true_lang-f-xi8uWj.js";import{_ as q}from"./CardDescription.vue_vue_type_script_setup_true_lang-D23jLuEj.js";import{_ as D}from"./CardHeader.vue_vue_type_script_setup_true_lang-Cn7HWfaF.js";import{_ as G}from"./CardTitle.vue_vue_type_script_setup_true_lang-DXA8XANX.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import{_ as U,a as j,b as w,c as $,d as f}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{_ as C}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import{_ as J}from"./Textarea.vue_vue_type_script_setup_true_lang-DrbQ2zws.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./loader-circle-BSwxCoSE.js";import"./createLucideIcon-CbxkoCx6.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./Collection-DN_gmv-a.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./check-DogY6QNG.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./nullish-CHIgUVhi.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./plus-C63jdNg7.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./file-text-CFHWSPvd.js";import"./users-CkYIFvpU.js";import"./calendar-B0yi2zLg.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";const ee={class:"grid gap-6 lg:grid-cols-2"},te={class:"flex items-center justify-between rounded-lg border p-3"},de={class:"grid gap-4 md:grid-cols-2"},le={class:"space-y-2"},se={class:"space-y-2"},ie={class:"grid gap-4 md:grid-cols-2"},ae={class:"space-y-2"},oe={class:"space-y-2"},ue={class:"grid gap-4 md:grid-cols-2"},ne={class:"space-y-2"},re={class:"space-y-2"},me={class:"flex items-center justify-between rounded-lg border p-3"},fe={class:"flex items-center justify-between rounded-lg border p-3"},_e={class:"space-y-2"},pe={class:"grid gap-4 md:grid-cols-2"},ve={class:"space-y-2"},ge={class:"space-y-2"},ce={class:"grid gap-4 md:grid-cols-2"},xe={class:"space-y-2"},be={class:"space-y-2"},ye={class:"grid gap-4 md:grid-cols-2"},Ve={class:"space-y-2"},ke={class:"space-y-2"},Se={class:"flex items-center justify-between rounded-lg border p-3"},Ue={class:"grid gap-4 md:grid-cols-2"},je={class:"space-y-2"},we={class:"space-y-2"},$e={class:"flex items-center gap-3"},Ce={class:"flex items-center gap-3"},Re={class:"space-y-2"},Te={class:"grid gap-4 md:grid-cols-2"},Ee={class:"space-y-2"},Ne={class:"space-y-2"},Ae={class:"space-y-3"},Fe={class:"flex items-center justify-between"},qe={class:"space-y-3"},De={class:"space-y-2"},Ge={class:"space-y-2"},Me={class:"flex items-center gap-3"},Be={class:"flex items-center gap-3"},Ie={class:"space-y-2"},Pe={class:"grid gap-4 md:grid-cols-2"},Je={class:"space-y-2"},He={class:"space-y-2"},Oe={class:"grid gap-4 md:grid-cols-2"},We={class:"space-y-2"},ze={class:"space-y-2"},Le={class:"space-y-2"},Ke={class:"space-y-2"},Qe={class:"flex items-center gap-3"},Xe={class:"space-y-3"},Ye={key:0,class:"rounded-lg bg-muted p-3 text-sm text-muted-foreground"},Ze={key:1,class:"space-y-2"},he={class:"flex items-center justify-between"},et={class:"space-y-1"},tt={class:"font-medium"},dt={class:"text-sm text-muted-foreground"},lt={class:"text-xs text-muted-foreground"},st={class:"grid gap-4 md:grid-cols-2"},it={class:"space-y-2"},at={class:"space-y-2"},ot={class:"space-y-2"},ut={class:"space-y-2"},nt={class:"space-y-2"},rt={class:"flex items-center gap-3"},mt={class:"flex items-center gap-3"},ft={class:"space-y-3"},_t={key:0,class:"rounded-lg bg-muted p-3 text-sm text-muted-foreground"},pt={key:1,class:"space-y-2"},vt={class:"flex items-center justify-between"},gt={class:"font-medium"},ct={class:"text-sm text-muted-foreground"},xt={class:"space-y-3"},bt={key:0,class:"rounded-lg bg-muted p-3 text-sm text-muted-foreground"},yt={key:1,class:"space-y-2"},Vt={class:"flex items-center justify-between"},kt={class:"font-medium"},St={class:"text-sm text-muted-foreground"},Ut={class:"text-xs text-muted-foreground mt-1"},jt={class:"space-y-3"},wt={key:0,class:"rounded-lg bg-muted p-3 text-sm text-muted-foreground"},$t={key:1,class:"space-y-2"},Ct={class:"flex items-center justify-between"},Rt={class:"font-medium"},Tt={class:"text-xs text-muted-foreground"},R="__none",_d=X({__name:"Settings",props:{company:{},taxSettings:{},jurisdictions:{},taxRates:{},taxGroups:{},taxRegistrations:{},taxExemptions:{},canManageTax:{type:Boolean}},setup(y){const b=y,H=[{title:"Dashboard",href:`/${b.company.slug}`},{title:"Tax",href:`/${b.company.slug}/tax/settings`}],o=Y(()=>b.canManageTax),p=I({tax_enabled:b.taxSettings.tax_enabled??!1,default_jurisdiction_id:b.taxSettings.default_jurisdiction_id??R,default_sales_tax_rate_id:b.taxSettings.default_sales_tax_rate_id??R,default_purchase_tax_rate_id:b.taxSettings.default_purchase_tax_rate_id??R,price_includes_tax:b.taxSettings.price_includes_tax??!1,rounding_mode:b.taxSettings.rounding_mode??"half_up",rounding_precision:b.taxSettings.rounding_precision??2,tax_number_label:b.taxSettings.tax_number_label??"Tax ID",show_tax_column:b.taxSettings.show_tax_column??!0}),m=I({jurisdiction_id:"",code:"",name:"",rate:0,tax_type:"sales",is_compound:!1,compound_priority:0,gl_account_id:R,recoverable_account_id:R,effective_from:"",effective_to:"",is_default:!1,is_active:!0,description:""}),V=I({jurisdiction_id:"",code:"",name:"",is_default:!1,is_active:!0,description:"",components:[{tax_rate_id:"",priority:1}]}),v=I({jurisdiction_id:"",registration_number:"",registration_type:"vat",registered_name:"",effective_from:"",effective_to:"",is_active:!0,notes:""}),g=I({code:"",name:"",description:"",exemption_type:"full",override_rate:"",requires_certificate:!1,is_active:!0}),M=c=>c===R?null:c,O=()=>{p.transform(c=>({...c,default_jurisdiction_id:M(c.default_jurisdiction_id),default_sales_tax_rate_id:M(c.default_sales_tax_rate_id),default_purchase_tax_rate_id:M(c.default_purchase_tax_rate_id)})).post(`/${b.company.slug}/tax/settings`,{preserveScroll:!0,onFinish:()=>p.transform(c=>c)})},W=()=>{m.transform(c=>({...c,gl_account_id:M(c.gl_account_id),recoverable_account_id:M(c.recoverable_account_id),effective_to:c.effective_to||null})).post(`/${b.company.slug}/tax/rates`,{preserveScroll:!0,onSuccess:()=>m.reset("jurisdiction_id","code","name","rate","tax_type","is_compound","compound_priority","gl_account_id","recoverable_account_id","effective_from","effective_to","is_default","is_active","description")})},z=()=>{V.components.push({tax_rate_id:"",priority:V.components.length+1})},L=()=>{V.transform(c=>({...c,components:c.components.map((t,l)=>({tax_rate_id:t.tax_rate_id,priority:t.priority||l+1}))})).post(`/${b.company.slug}/tax/groups`,{preserveScroll:!0,onSuccess:()=>V.reset("jurisdiction_id","code","name","is_default","is_active","description","components")})},K=()=>{v.post(`/${b.company.slug}/tax/registrations`,{preserveScroll:!0,onSuccess:()=>v.reset("jurisdiction_id","registration_number","registration_type","registered_name","effective_from","effective_to","is_active","notes")})},Q=()=>{g.post(`/${b.company.slug}/tax/exemptions`,{preserveScroll:!0,onSuccess:()=>g.reset("code","name","description","exemption_type","override_rate","requires_certificate","is_active")})};return(c,t)=>(n(),_("div",null,[d(e(Z),{title:"Tax Settings"}),d(h,{title:"Tax Settings",description:"Configure jurisdictions, rates, and defaults.",breadcrumbs:H},{default:s(()=>[i("div",ee,[d(e(A),null,{default:s(()=>[d(e(D),null,{default:s(()=>[d(e(G),null,{default:s(()=>[...t[41]||(t[41]=[a("Company Tax Settings",-1)])]),_:1}),d(e(q),null,{default:s(()=>[...t[42]||(t[42]=[a("Defaults that drive invoice and bill tax calculation.",-1)])]),_:1})]),_:1}),d(e(F),{class:"space-y-4"},{default:s(()=>[i("div",te,[t[43]||(t[43]=i("div",null,[i("p",{class:"text-sm font-medium"},"Enable tax features"),i("p",{class:"text-sm text-muted-foreground"},"Turn on tax calculations and defaults.")],-1)),d(e(C),{checked:e(p).tax_enabled,"onUpdate:checked":t[0]||(t[0]=l=>e(p).tax_enabled=l),disabled:!o.value.value},null,8,["checked","disabled"])]),i("div",de,[i("div",le,[d(e(u),{for:"default_jurisdiction_id"},{default:s(()=>[...t[44]||(t[44]=[a("Default jurisdiction",-1)])]),_:1}),d(e(U),{modelValue:e(p).default_jurisdiction_id,"onUpdate:modelValue":t[1]||(t[1]=l=>e(p).default_jurisdiction_id=l),disabled:!o.value.value},{default:s(()=>[d(e(j),{id:"default_jurisdiction_id"},{default:s(()=>[d(e(w),{placeholder:"Select jurisdiction"})]),_:1}),d(e($),null,{default:s(()=>[d(e(f),{value:R},{default:s(()=>[...t[45]||(t[45]=[a("None",-1)])]),_:1}),(n(!0),_(k,null,S(y.jurisdictions,l=>(n(),E(e(f),{key:l.id,value:l.id},{default:s(()=>[a(r(l.name)+" ("+r(l.code)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),i("div",se,[d(e(u),{for:"rounding_mode"},{default:s(()=>[...t[46]||(t[46]=[a("Rounding mode",-1)])]),_:1}),d(e(U),{modelValue:e(p).rounding_mode,"onUpdate:modelValue":t[2]||(t[2]=l=>e(p).rounding_mode=l),disabled:!o.value.value},{default:s(()=>[d(e(j),{id:"rounding_mode"},{default:s(()=>[d(e(w),{placeholder:"Select rounding"})]),_:1}),d(e($),null,{default:s(()=>[d(e(f),{value:"half_up"},{default:s(()=>[...t[47]||(t[47]=[a("Half up",-1)])]),_:1}),d(e(f),{value:"half_down"},{default:s(()=>[...t[48]||(t[48]=[a("Half down",-1)])]),_:1}),d(e(f),{value:"floor"},{default:s(()=>[...t[49]||(t[49]=[a("Floor",-1)])]),_:1}),d(e(f),{value:"ceiling"},{default:s(()=>[...t[50]||(t[50]=[a("Ceiling",-1)])]),_:1}),d(e(f),{value:"bankers"},{default:s(()=>[...t[51]||(t[51]=[a("Bankers",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","disabled"])])]),i("div",ie,[i("div",ae,[d(e(u),{for:"default_sales_tax_rate_id"},{default:s(()=>[...t[52]||(t[52]=[a("Default sales rate",-1)])]),_:1}),d(e(U),{modelValue:e(p).default_sales_tax_rate_id,"onUpdate:modelValue":t[3]||(t[3]=l=>e(p).default_sales_tax_rate_id=l),disabled:!o.value.value},{default:s(()=>[d(e(j),{id:"default_sales_tax_rate_id"},{default:s(()=>[d(e(w),{placeholder:"Select sales rate"})]),_:1}),d(e($),null,{default:s(()=>[d(e(f),{value:R},{default:s(()=>[...t[53]||(t[53]=[a("None",-1)])]),_:1}),(n(!0),_(k,null,S(y.taxRates,l=>(n(),E(e(f),{key:l.id,value:l.id},{default:s(()=>[a(r(l.code)+" — "+r(l.rate)+"% ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),i("div",oe,[d(e(u),{for:"default_purchase_tax_rate_id"},{default:s(()=>[...t[54]||(t[54]=[a("Default purchase rate",-1)])]),_:1}),d(e(U),{modelValue:e(p).default_purchase_tax_rate_id,"onUpdate:modelValue":t[4]||(t[4]=l=>e(p).default_purchase_tax_rate_id=l),disabled:!o.value.value},{default:s(()=>[d(e(j),{id:"default_purchase_tax_rate_id"},{default:s(()=>[d(e(w),{placeholder:"Select purchase rate"})]),_:1}),d(e($),null,{default:s(()=>[d(e(f),{value:R},{default:s(()=>[...t[55]||(t[55]=[a("None",-1)])]),_:1}),(n(!0),_(k,null,S(y.taxRates,l=>(n(),E(e(f),{key:l.id,value:l.id},{default:s(()=>[a(r(l.code)+" — "+r(l.rate)+"% ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])])]),i("div",ue,[i("div",ne,[d(e(u),{for:"rounding_precision"},{default:s(()=>[...t[56]||(t[56]=[a("Rounding precision",-1)])]),_:1}),d(e(x),{id:"rounding_precision",modelValue:e(p).rounding_precision,"onUpdate:modelValue":t[5]||(t[5]=l=>e(p).rounding_precision=l),modelModifiers:{number:!0},type:"number",min:"0",max:"6",disabled:!o.value.value},null,8,["modelValue","disabled"])]),i("div",re,[d(e(u),{for:"tax_number_label"},{default:s(()=>[...t[57]||(t[57]=[a("Tax number label",-1)])]),_:1}),d(e(x),{id:"tax_number_label",modelValue:e(p).tax_number_label,"onUpdate:modelValue":t[6]||(t[6]=l=>e(p).tax_number_label=l),type:"text",maxlength:"50",disabled:!o.value.value},null,8,["modelValue","disabled"])])]),i("div",me,[t[58]||(t[58]=i("div",null,[i("p",{class:"text-sm font-medium"},"Prices include tax"),i("p",{class:"text-sm text-muted-foreground"},"Treat line prices as tax-inclusive.")],-1)),d(e(C),{checked:e(p).price_includes_tax,"onUpdate:checked":t[7]||(t[7]=l=>e(p).price_includes_tax=l),disabled:!o.value.value},null,8,["checked","disabled"])]),i("div",fe,[t[59]||(t[59]=i("div",null,[i("p",{class:"text-sm font-medium"},"Show tax column"),i("p",{class:"text-sm text-muted-foreground"},"Expose tax amounts on documents.")],-1)),d(e(C),{checked:e(p).show_tax_column,"onUpdate:checked":t[8]||(t[8]=l=>e(p).show_tax_column=l),disabled:!o.value.value},null,8,["checked","disabled"])]),d(e(N),{class:"w-full",disabled:!o.value.value||e(p).processing,onClick:O},{default:s(()=>[...t[60]||(t[60]=[a(" Save settings ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1}),d(e(A),null,{default:s(()=>[d(e(D),null,{default:s(()=>[d(e(G),null,{default:s(()=>[...t[61]||(t[61]=[a("Create Tax Rate",-1)])]),_:1}),d(e(q),null,{default:s(()=>[...t[62]||(t[62]=[a("Company-scoped rate tied to a jurisdiction.",-1)])]),_:1})]),_:1}),d(e(F),{class:"space-y-4"},{default:s(()=>[i("div",_e,[d(e(u),{for:"rate_jurisdiction"},{default:s(()=>[...t[63]||(t[63]=[a("Jurisdiction",-1)])]),_:1}),d(e(U),{modelValue:e(m).jurisdiction_id,"onUpdate:modelValue":t[9]||(t[9]=l=>e(m).jurisdiction_id=l),disabled:!o.value.value},{default:s(()=>[d(e(j),{id:"rate_jurisdiction"},{default:s(()=>[d(e(w),{placeholder:"Select jurisdiction"})]),_:1}),d(e($),null,{default:s(()=>[(n(!0),_(k,null,S(y.jurisdictions,l=>(n(),E(e(f),{key:l.id,value:l.id},{default:s(()=>[a(r(l.name)+" ("+r(l.code)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),i("div",pe,[i("div",ve,[d(e(u),{for:"rate_code"},{default:s(()=>[...t[64]||(t[64]=[a("Code",-1)])]),_:1}),d(e(x),{id:"rate_code",modelValue:e(m).code,"onUpdate:modelValue":t[10]||(t[10]=l=>e(m).code=l),disabled:!o.value.value},null,8,["modelValue","disabled"])]),i("div",ge,[d(e(u),{for:"rate_name"},{default:s(()=>[...t[65]||(t[65]=[a("Name",-1)])]),_:1}),d(e(x),{id:"rate_name",modelValue:e(m).name,"onUpdate:modelValue":t[11]||(t[11]=l=>e(m).name=l),disabled:!o.value.value},null,8,["modelValue","disabled"])])]),i("div",ce,[i("div",xe,[d(e(u),{for:"rate_percentage"},{default:s(()=>[...t[66]||(t[66]=[a("Rate (%)",-1)])]),_:1}),d(e(x),{id:"rate_percentage",modelValue:e(m).rate,"onUpdate:modelValue":t[12]||(t[12]=l=>e(m).rate=l),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",disabled:!o.value.value},null,8,["modelValue","disabled"])]),i("div",be,[d(e(u),{for:"rate_type"},{default:s(()=>[...t[67]||(t[67]=[a("Type",-1)])]),_:1}),d(e(U),{modelValue:e(m).tax_type,"onUpdate:modelValue":t[13]||(t[13]=l=>e(m).tax_type=l),disabled:!o.value.value},{default:s(()=>[d(e(j),{id:"rate_type"},{default:s(()=>[d(e(w),{placeholder:"Select type"})]),_:1}),d(e($),null,{default:s(()=>[d(e(f),{value:"sales"},{default:s(()=>[...t[68]||(t[68]=[a("Sales",-1)])]),_:1}),d(e(f),{value:"purchase"},{default:s(()=>[...t[69]||(t[69]=[a("Purchase",-1)])]),_:1}),d(e(f),{value:"withholding"},{default:s(()=>[...t[70]||(t[70]=[a("Withholding",-1)])]),_:1}),d(e(f),{value:"both"},{default:s(()=>[...t[71]||(t[71]=[a("Both",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","disabled"])])]),i("div",ye,[i("div",Ve,[d(e(u),{for:"rate_effective_from"},{default:s(()=>[...t[72]||(t[72]=[a("Effective from",-1)])]),_:1}),d(e(x),{id:"rate_effective_from",modelValue:e(m).effective_from,"onUpdate:modelValue":t[14]||(t[14]=l=>e(m).effective_from=l),type:"date",disabled:!o.value.value},null,8,["modelValue","disabled"])]),i("div",ke,[d(e(u),{for:"rate_effective_to"},{default:s(()=>[...t[73]||(t[73]=[a("Effective to",-1)])]),_:1}),d(e(x),{id:"rate_effective_to",modelValue:e(m).effective_to,"onUpdate:modelValue":t[15]||(t[15]=l=>e(m).effective_to=l),type:"date",disabled:!o.value.value},null,8,["modelValue","disabled"])])]),i("div",Se,[t[74]||(t[74]=i("div",null,[i("p",{class:"text-sm font-medium"},"Compound"),i("p",{class:"text-sm text-muted-foreground"},"Apply on running total in sequence.")],-1)),d(e(C),{checked:e(m).is_compound,"onUpdate:checked":t[16]||(t[16]=l=>e(m).is_compound=l),disabled:!o.value.value},null,8,["checked","disabled"])]),i("div",Ue,[i("div",je,[d(e(u),{for:"compound_priority"},{default:s(()=>[...t[75]||(t[75]=[a("Compound priority",-1)])]),_:1}),d(e(x),{id:"compound_priority",modelValue:e(m).compound_priority,"onUpdate:modelValue":t[17]||(t[17]=l=>e(m).compound_priority=l),modelModifiers:{number:!0},type:"number",min:"0",disabled:!o.value.value},null,8,["modelValue","disabled"])]),i("div",we,[d(e(u),{for:"rate_description"},{default:s(()=>[...t[76]||(t[76]=[a("Description",-1)])]),_:1}),d(e(J),{id:"rate_description",modelValue:e(m).description,"onUpdate:modelValue":t[18]||(t[18]=l=>e(m).description=l),rows:"2",disabled:!o.value.value},null,8,["modelValue","disabled"])])]),i("div",$e,[d(e(C),{id:"rate_default",checked:e(m).is_default,"onUpdate:checked":t[19]||(t[19]=l=>e(m).is_default=l),disabled:!o.value.value},null,8,["checked","disabled"]),d(e(u),{for:"rate_default"},{default:s(()=>[...t[77]||(t[77]=[a("Set as default",-1)])]),_:1})]),i("div",Ce,[d(e(C),{id:"rate_active",checked:e(m).is_active,"onUpdate:checked":t[20]||(t[20]=l=>e(m).is_active=l),disabled:!o.value.value},null,8,["checked","disabled"]),d(e(u),{for:"rate_active"},{default:s(()=>[...t[78]||(t[78]=[a("Active",-1)])]),_:1})]),d(e(N),{class:"w-full",disabled:!o.value.value||e(m).processing,onClick:W},{default:s(()=>[...t[79]||(t[79]=[a(" Create rate ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1}),d(e(A),null,{default:s(()=>[d(e(D),null,{default:s(()=>[d(e(G),null,{default:s(()=>[...t[80]||(t[80]=[a("Create Tax Group",-1)])]),_:1}),d(e(q),null,{default:s(()=>[...t[81]||(t[81]=[a("Combine multiple rates for quick assignment.",-1)])]),_:1})]),_:1}),d(e(F),{class:"space-y-4"},{default:s(()=>[i("div",Re,[d(e(u),{for:"group_jurisdiction"},{default:s(()=>[...t[82]||(t[82]=[a("Jurisdiction",-1)])]),_:1}),d(e(U),{modelValue:e(V).jurisdiction_id,"onUpdate:modelValue":t[21]||(t[21]=l=>e(V).jurisdiction_id=l),disabled:!o.value.value},{default:s(()=>[d(e(j),{id:"group_jurisdiction"},{default:s(()=>[d(e(w),{placeholder:"Select jurisdiction"})]),_:1}),d(e($),null,{default:s(()=>[(n(!0),_(k,null,S(y.jurisdictions,l=>(n(),E(e(f),{key:l.id,value:l.id},{default:s(()=>[a(r(l.name)+" ("+r(l.code)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),i("div",Te,[i("div",Ee,[d(e(u),{for:"group_code"},{default:s(()=>[...t[83]||(t[83]=[a("Code",-1)])]),_:1}),d(e(x),{id:"group_code",modelValue:e(V).code,"onUpdate:modelValue":t[22]||(t[22]=l=>e(V).code=l),disabled:!o.value.value},null,8,["modelValue","disabled"])]),i("div",Ne,[d(e(u),{for:"group_name"},{default:s(()=>[...t[84]||(t[84]=[a("Name",-1)])]),_:1}),d(e(x),{id:"group_name",modelValue:e(V).name,"onUpdate:modelValue":t[23]||(t[23]=l=>e(V).name=l),disabled:!o.value.value},null,8,["modelValue","disabled"])])]),i("div",Ae,[i("div",Fe,[t[86]||(t[86]=i("span",{class:"text-sm font-medium"},"Components",-1)),d(e(N),{variant:"secondary",size:"sm",disabled:!o.value.value,onClick:z},{default:s(()=>[...t[85]||(t[85]=[a("Add",-1)])]),_:1},8,["disabled"])]),i("div",qe,[(n(!0),_(k,null,S(e(V).components,(l,B)=>(n(),_("div",{key:B,class:"grid gap-3 rounded-lg border p-3 md:grid-cols-2"},[i("div",De,[d(e(u),{for:`component_rate_${B}`},{default:s(()=>[...t[87]||(t[87]=[a("Tax rate",-1)])]),_:1},8,["for"]),d(e(U),{modelValue:l.tax_rate_id,"onUpdate:modelValue":T=>l.tax_rate_id=T,disabled:!o.value.value},{default:s(()=>[d(e(j),{id:`component_rate_${B}`},{default:s(()=>[d(e(w),{placeholder:"Select rate"})]),_:1},8,["id"]),d(e($),null,{default:s(()=>[(n(!0),_(k,null,S(y.taxRates,T=>(n(),E(e(f),{key:T.id,value:T.id},{default:s(()=>[a(r(T.code)+" — "+r(T.rate)+"% ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),i("div",Ge,[d(e(u),{for:`component_priority_${B}`},{default:s(()=>[...t[88]||(t[88]=[a("Priority",-1)])]),_:1},8,["for"]),d(e(x),{id:`component_priority_${B}`,modelValue:l.priority,"onUpdate:modelValue":T=>l.priority=T,modelModifiers:{number:!0},type:"number",min:"1",disabled:!o.value.value},null,8,["id","modelValue","onUpdate:modelValue","disabled"])])]))),128))])]),i("div",Me,[d(e(C),{id:"group_default",checked:e(V).is_default,"onUpdate:checked":t[24]||(t[24]=l=>e(V).is_default=l),disabled:!o.value.value},null,8,["checked","disabled"]),d(e(u),{for:"group_default"},{default:s(()=>[...t[89]||(t[89]=[a("Set as default",-1)])]),_:1})]),i("div",Be,[d(e(C),{id:"group_active",checked:e(V).is_active,"onUpdate:checked":t[25]||(t[25]=l=>e(V).is_active=l),disabled:!o.value.value},null,8,["checked","disabled"]),d(e(u),{for:"group_active"},{default:s(()=>[...t[90]||(t[90]=[a("Active",-1)])]),_:1})]),d(e(N),{class:"w-full",disabled:!o.value.value||e(V).processing,onClick:L},{default:s(()=>[...t[91]||(t[91]=[a(" Create group ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1}),d(e(A),null,{default:s(()=>[d(e(D),null,{default:s(()=>[d(e(G),null,{default:s(()=>[...t[92]||(t[92]=[a("Tax Registrations",-1)])]),_:1}),d(e(q),null,{default:s(()=>[...t[93]||(t[93]=[a("Store registration numbers by jurisdiction.",-1)])]),_:1})]),_:1}),d(e(F),{class:"space-y-4"},{default:s(()=>[i("div",Ie,[d(e(u),{for:"registration_jurisdiction"},{default:s(()=>[...t[94]||(t[94]=[a("Jurisdiction",-1)])]),_:1}),d(e(U),{modelValue:e(v).jurisdiction_id,"onUpdate:modelValue":t[26]||(t[26]=l=>e(v).jurisdiction_id=l),disabled:!o.value.value},{default:s(()=>[d(e(j),{id:"registration_jurisdiction"},{default:s(()=>[d(e(w),{placeholder:"Select jurisdiction"})]),_:1}),d(e($),null,{default:s(()=>[(n(!0),_(k,null,S(y.jurisdictions,l=>(n(),E(e(f),{key:l.id,value:l.id},{default:s(()=>[a(r(l.name)+" ("+r(l.code)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),i("div",Pe,[i("div",Je,[d(e(u),{for:"registration_number"},{default:s(()=>[...t[95]||(t[95]=[a("Registration number",-1)])]),_:1}),d(e(x),{id:"registration_number",modelValue:e(v).registration_number,"onUpdate:modelValue":t[27]||(t[27]=l=>e(v).registration_number=l),disabled:!o.value.value},null,8,["modelValue","disabled"])]),i("div",He,[d(e(u),{for:"registration_type"},{default:s(()=>[...t[96]||(t[96]=[a("Type",-1)])]),_:1}),d(e(U),{modelValue:e(v).registration_type,"onUpdate:modelValue":t[28]||(t[28]=l=>e(v).registration_type=l),disabled:!o.value.value},{default:s(()=>[d(e(j),{id:"registration_type"},{default:s(()=>[d(e(w),{placeholder:"Select type"})]),_:1}),d(e($),null,{default:s(()=>[d(e(f),{value:"vat"},{default:s(()=>[...t[97]||(t[97]=[a("VAT",-1)])]),_:1}),d(e(f),{value:"gst"},{default:s(()=>[...t[98]||(t[98]=[a("GST",-1)])]),_:1}),d(e(f),{value:"sales_tax"},{default:s(()=>[...t[99]||(t[99]=[a("Sales Tax",-1)])]),_:1}),d(e(f),{value:"withholding"},{default:s(()=>[...t[100]||(t[100]=[a("Withholding",-1)])]),_:1}),d(e(f),{value:"other"},{default:s(()=>[...t[101]||(t[101]=[a("Other",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","disabled"])])]),i("div",Oe,[i("div",We,[d(e(u),{for:"registered_name"},{default:s(()=>[...t[102]||(t[102]=[a("Registered name",-1)])]),_:1}),d(e(x),{id:"registered_name",modelValue:e(v).registered_name,"onUpdate:modelValue":t[29]||(t[29]=l=>e(v).registered_name=l),disabled:!o.value.value},null,8,["modelValue","disabled"])]),i("div",ze,[d(e(u),{for:"registration_from"},{default:s(()=>[...t[103]||(t[103]=[a("Effective from",-1)])]),_:1}),d(e(x),{id:"registration_from",modelValue:e(v).effective_from,"onUpdate:modelValue":t[30]||(t[30]=l=>e(v).effective_from=l),type:"date",disabled:!o.value.value},null,8,["modelValue","disabled"])]),i("div",Le,[d(e(u),{for:"registration_to"},{default:s(()=>[...t[104]||(t[104]=[a("Effective to",-1)])]),_:1}),d(e(x),{id:"registration_to",modelValue:e(v).effective_to,"onUpdate:modelValue":t[31]||(t[31]=l=>e(v).effective_to=l),type:"date",disabled:!o.value.value},null,8,["modelValue","disabled"])]),i("div",Ke,[d(e(u),{for:"registration_notes"},{default:s(()=>[...t[105]||(t[105]=[a("Notes",-1)])]),_:1}),d(e(J),{id:"registration_notes",modelValue:e(v).notes,"onUpdate:modelValue":t[32]||(t[32]=l=>e(v).notes=l),rows:"2",disabled:!o.value.value},null,8,["modelValue","disabled"])])]),i("div",Qe,[d(e(C),{id:"registration_active",checked:e(v).is_active,"onUpdate:checked":t[33]||(t[33]=l=>e(v).is_active=l),disabled:!o.value.value},null,8,["checked","disabled"]),d(e(u),{for:"registration_active"},{default:s(()=>[...t[106]||(t[106]=[a("Active",-1)])]),_:1})]),d(e(N),{class:"w-full",disabled:!o.value.value||e(v).processing,onClick:K},{default:s(()=>[...t[107]||(t[107]=[a(" Save registration ",-1)])]),_:1},8,["disabled"]),i("div",Xe,[t[108]||(t[108]=i("p",{class:"text-sm font-semibold"},"Existing registrations",-1)),y.taxRegistrations.length===0?(n(),_("div",Ye," No registrations yet. ")):(n(),_("div",Ze,[(n(!0),_(k,null,S(y.taxRegistrations,l=>(n(),_("div",{key:l.id,class:"rounded-lg border p-3"},[i("div",he,[i("div",et,[i("p",tt,r(l.registration_number),1),i("p",dt,r(l.registration_type.toUpperCase()),1)]),d(e(P),{variant:l.is_active?"default":"secondary"},{default:s(()=>[a(r(l.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),i("p",lt,"Effective "+r(l.effective_from),1)]))),128))]))])]),_:1})]),_:1}),d(e(A),null,{default:s(()=>[d(e(D),null,{default:s(()=>[d(e(G),null,{default:s(()=>[...t[109]||(t[109]=[a("Exemptions",-1)])]),_:1}),d(e(q),null,{default:s(()=>[...t[110]||(t[110]=[a("Manage exemption reasons and overrides.",-1)])]),_:1})]),_:1}),d(e(F),{class:"space-y-4"},{default:s(()=>[i("div",st,[i("div",it,[d(e(u),{for:"exemption_code"},{default:s(()=>[...t[111]||(t[111]=[a("Code",-1)])]),_:1}),d(e(x),{id:"exemption_code",modelValue:e(g).code,"onUpdate:modelValue":t[34]||(t[34]=l=>e(g).code=l),disabled:!o.value.value},null,8,["modelValue","disabled"])]),i("div",at,[d(e(u),{for:"exemption_name"},{default:s(()=>[...t[112]||(t[112]=[a("Name",-1)])]),_:1}),d(e(x),{id:"exemption_name",modelValue:e(g).name,"onUpdate:modelValue":t[35]||(t[35]=l=>e(g).name=l),disabled:!o.value.value},null,8,["modelValue","disabled"])])]),i("div",ot,[d(e(u),{for:"exemption_type"},{default:s(()=>[...t[113]||(t[113]=[a("Type",-1)])]),_:1}),d(e(U),{modelValue:e(g).exemption_type,"onUpdate:modelValue":t[36]||(t[36]=l=>e(g).exemption_type=l),disabled:!o.value.value},{default:s(()=>[d(e(j),{id:"exemption_type"},{default:s(()=>[d(e(w),{placeholder:"Select type"})]),_:1}),d(e($),null,{default:s(()=>[d(e(f),{value:"full"},{default:s(()=>[...t[114]||(t[114]=[a("Full",-1)])]),_:1}),d(e(f),{value:"partial"},{default:s(()=>[...t[115]||(t[115]=[a("Partial",-1)])]),_:1}),d(e(f),{value:"rate_override"},{default:s(()=>[...t[116]||(t[116]=[a("Rate override",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","disabled"])]),i("div",ut,[d(e(u),{for:"override_rate"},{default:s(()=>[...t[117]||(t[117]=[a("Override rate (%)",-1)])]),_:1}),d(e(x),{id:"override_rate",modelValue:e(g).override_rate,"onUpdate:modelValue":t[37]||(t[37]=l=>e(g).override_rate=l),type:"number",min:"0",step:"0.01",disabled:!o.value.value||e(g).exemption_type!=="rate_override"},null,8,["modelValue","disabled"])]),i("div",nt,[d(e(u),{for:"exemption_description"},{default:s(()=>[...t[118]||(t[118]=[a("Description",-1)])]),_:1}),d(e(J),{id:"exemption_description",modelValue:e(g).description,"onUpdate:modelValue":t[38]||(t[38]=l=>e(g).description=l),rows:"2",disabled:!o.value.value},null,8,["modelValue","disabled"])]),i("div",rt,[d(e(C),{id:"requires_certificate",checked:e(g).requires_certificate,"onUpdate:checked":t[39]||(t[39]=l=>e(g).requires_certificate=l),disabled:!o.value.value},null,8,["checked","disabled"]),d(e(u),{for:"requires_certificate"},{default:s(()=>[...t[119]||(t[119]=[a("Requires certificate",-1)])]),_:1})]),i("div",mt,[d(e(C),{id:"exemption_active",checked:e(g).is_active,"onUpdate:checked":t[40]||(t[40]=l=>e(g).is_active=l),disabled:!o.value.value},null,8,["checked","disabled"]),d(e(u),{for:"exemption_active"},{default:s(()=>[...t[120]||(t[120]=[a("Active",-1)])]),_:1})]),d(e(N),{class:"w-full",disabled:!o.value.value||e(g).processing,onClick:Q},{default:s(()=>[...t[121]||(t[121]=[a(" Save exemption ",-1)])]),_:1},8,["disabled"]),i("div",ft,[t[122]||(t[122]=i("p",{class:"text-sm font-semibold"},"Existing exemptions",-1)),y.taxExemptions.length===0?(n(),_("div",_t," No exemptions yet. ")):(n(),_("div",pt,[(n(!0),_(k,null,S(y.taxExemptions,l=>(n(),_("div",{key:l.id,class:"rounded-lg border p-3"},[i("div",vt,[i("div",null,[i("p",gt,r(l.code)+" — "+r(l.name),1),i("p",ct,r(l.exemption_type),1)]),d(e(P),{variant:l.is_active?"default":"secondary"},{default:s(()=>[a(r(l.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])])]))),128))]))])]),_:1})]),_:1}),d(e(A),{class:"lg:col-span-2"},{default:s(()=>[d(e(D),null,{default:s(()=>[d(e(G),null,{default:s(()=>[...t[123]||(t[123]=[a("Current Rates & Groups",-1)])]),_:1}),d(e(q),null,{default:s(()=>[...t[124]||(t[124]=[a("Reference data applied across AR/AP.",-1)])]),_:1})]),_:1}),d(e(F),{class:"grid gap-4 md:grid-cols-2"},{default:s(()=>[i("div",xt,[t[125]||(t[125]=i("p",{class:"text-sm font-semibold"},"Rates",-1)),y.taxRates.length===0?(n(),_("div",bt,"No tax rates yet.")):(n(),_("div",yt,[(n(!0),_(k,null,S(y.taxRates,l=>(n(),_("div",{key:l.id,class:"rounded-lg border p-3"},[i("div",Vt,[i("div",null,[i("p",kt,r(l.code)+" — "+r(l.rate)+"%",1),i("p",St,r(l.name),1)]),d(e(P),{variant:l.is_active?"default":"secondary"},{default:s(()=>[a(r(l.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),i("p",Ut,"Type: "+r(l.tax_type),1)]))),128))]))]),i("div",jt,[t[126]||(t[126]=i("p",{class:"text-sm font-semibold"},"Groups",-1)),y.taxGroups.length===0?(n(),_("div",wt,"No tax groups yet.")):(n(),_("div",$t,[(n(!0),_(k,null,S(y.taxGroups,l=>(n(),_("div",{key:l.id,class:"rounded-lg border p-3"},[i("div",Ct,[i("div",null,[i("p",Rt,r(l.code)+" — "+r(l.name),1),i("p",Tt,r(l.tax_rates?.length||0)+" rates ",1)]),d(e(P),{variant:l.is_active?"default":"secondary"},{default:s(()=>[a(r(l.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])])]))),128))]))])]),_:1})]),_:1})])]),_:1})]))}});export{_d as default};
