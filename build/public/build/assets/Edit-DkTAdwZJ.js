import{d as I,s as S,x as R,c as f,a as l,u as e,h as J,w as n,j as w,b as a,o as i,e as r,t as u,y as Y,i as A,F as C,r as D,O as G,ao as L,A as O,f as z}from"./app-B-wLZQl0.js";import{_ as H}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as B}from"./index-D8JUok4n.js";import{_ as k}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import{_ as K}from"./Textarea.vue_vue_type_script_setup_true_lang-DrbQ2zws.js";import{_ as E,a as j,b as N,c as q,d as b}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{_ as y,a as _}from"./CardContent.vue_vue_type_script_setup_true_lang-f-xi8uWj.js";import{_ as x}from"./CardDescription.vue_vue_type_script_setup_true_lang-D23jLuEj.js";import{_ as v}from"./CardHeader.vue_vue_type_script_setup_true_lang-Cn7HWfaF.js";import{_ as g}from"./CardTitle.vue_vue_type_script_setup_true_lang-DXA8XANX.js";import{_ as Q}from"./index-a73qSWOM.js";import{z as F}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import{B as W}from"./building-YkSJqe0l.js";import{C as X}from"./credit-card-CZIyPTcw.js";import{F as Z}from"./file-text-CFHWSPvd.js";import{A as h}from"./arrow-left-DSX0n2_N.js";import{S as ee}from"./save-CBmuHaqJ.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./loader-circle-BSwxCoSE.js";import"./createLucideIcon-CbxkoCx6.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./Collection-DN_gmv-a.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./check-DogY6QNG.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./nullish-CHIgUVhi.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./plus-C63jdNg7.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./users-CkYIFvpU.js";import"./calendar-B0yi2zLg.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";const te={key:0,class:"mb-6"},le={class:"flex items-center"},ne={class:"text-sm"},ae={class:"text-sm text-muted-foreground mt-1"},oe={class:"grid grid-cols-2 md:grid-cols-3 gap-3"},re=["id","value"],se=["for"],me={class:"text-sm font-medium"},ue={class:"space-y-2"},de={class:"font-medium"},ie={class:"font-medium"},fe={class:"flex justify-between items-center pt-2 border-t"},pe={class:"font-bold"},ye={class:"flex justify-between"},_e={class:"font-bold"},ce={class:"flex justify-between text-sm text-muted-foreground"},be={key:0,class:"flex justify-between text-sm text-muted-foreground"},at=I({__name:"Edit",props:{company:{},payment:{}},setup(d){const m=d,M=S(()=>[{title:"Dashboard",href:"/dashboard"},{title:m.company.name,href:`/${m.company.slug}`},{title:"Payments",href:`/${m.company.slug}/payments`},{title:m.payment.payment_number,href:`/${m.company.slug}/payments/${m.payment.id}`},{title:"Edit"}]),s=R({customer_id:m.payment.customer.id,amount:m.payment.amount,currency:m.payment.currency,payment_method:m.payment.payment_method,reference_number:m.payment.reference_number||"",payment_date:m.payment.payment_date,notes:m.payment.notes||""}),U=[{value:"cash",label:"Cash",icon:F},{value:"bank_transfer",label:"Bank Transfer",icon:W},{value:"card",label:"Card",icon:X},{value:"cheque",label:"Cheque",icon:Z},{value:"other",label:"Other",icon:F}],c=$=>new Intl.NumberFormat("en-US",{style:"currency",currency:s.currency||"USD"}).format($),P=()=>{s.put(`/${m.company.slug}/payments/${m.payment.id}`)},V=S(()=>m.payment.payment_allocations.reduce(($,t)=>$+t.amount,0));return($,t)=>(i(),f(C,null,[l(e(J),{title:`Edit Payment ${d.payment.payment_number}`},null,8,["title"]),l(H,{title:`Edit Payment ${d.payment.payment_number}`,breadcrumbs:M.value},{actions:n(()=>[l(e(B),{variant:"outline",onClick:t[0]||(t[0]=o=>e(z).get(`/${d.company.slug}/payments/${d.payment.id}`))},{default:n(()=>[l(e(h),{class:"mr-2 h-4 w-4"}),t[8]||(t[8]=r(" Cancel ",-1))]),_:1}),l(e(B),{onClick:P,disabled:e(s).processing},{default:n(()=>[l(e(ee),{class:"mr-2 h-4 w-4"}),t[9]||(t[9]=r(" Save Changes ",-1))]),_:1},8,["disabled"])]),default:n(()=>[V.value>0?(i(),f("div",te,[l(e(y),{class:"border-yellow-200 bg-yellow-50"},{default:n(()=>[l(e(_),{class:"pt-6"},{default:n(()=>[a("div",le,[l(e(Q),{variant:"secondary",class:"mr-2"},{default:n(()=>[...t[10]||(t[10]=[r("Allocated",-1)])]),_:1}),a("span",ne," This payment has "+u(d.payment.payment_allocations.length)+" allocation(s) totaling "+u(c(V.value))+". Editing may affect the allocations. ",1)])]),_:1})]),_:1})])):w("",!0),a("form",{onSubmit:Y(P,["prevent"]),class:"space-y-6"},[l(e(y),null,{default:n(()=>[l(e(v),null,{default:n(()=>[l(e(g),null,{default:n(()=>[...t[11]||(t[11]=[r("Payment Information",-1)])]),_:1}),l(e(x),null,{default:n(()=>[...t[12]||(t[12]=[r("Update the basic payment details",-1)])]),_:1})]),_:1}),l(e(_),{class:"grid grid-cols-1 md:grid-cols-2 gap-4"},{default:n(()=>[a("div",null,[l(e(p),{for:"customer_id"},{default:n(()=>[...t[13]||(t[13]=[r("Customer *",-1)])]),_:1}),l(e(E),{modelValue:e(s).customer_id,"onUpdate:modelValue":t[1]||(t[1]=o=>e(s).customer_id=o),required:""},{default:n(()=>[l(e(j),null,{default:n(()=>[l(e(N),{placeholder:"Select a customer"})]),_:1}),l(e(q),null,{default:n(()=>[l(e(b),{value:d.payment.customer.id},{default:n(()=>[r(u(d.payment.customer.name),1)]),_:1},8,["value"])]),_:1})]),_:1},8,["modelValue"])]),a("div",null,[l(e(p),{for:"amount"},{default:n(()=>[...t[14]||(t[14]=[r("Amount *",-1)])]),_:1}),l(e(k),{id:"amount",modelValue:e(s).amount,"onUpdate:modelValue":t[2]||(t[2]=o=>e(s).amount=o),modelModifiers:{number:!0},type:"number",min:"0.01",step:"0.01",placeholder:"0.00",required:""},null,8,["modelValue"]),a("p",ae,u(c(e(s).amount)),1)]),a("div",null,[l(e(p),{for:"payment_date"},{default:n(()=>[...t[15]||(t[15]=[r("Payment Date *",-1)])]),_:1}),l(e(k),{id:"payment_date",modelValue:e(s).payment_date,"onUpdate:modelValue":t[3]||(t[3]=o=>e(s).payment_date=o),type:"date",required:""},null,8,["modelValue"])]),a("div",null,[l(e(p),{for:"currency"},{default:n(()=>[...t[16]||(t[16]=[r("Currency *",-1)])]),_:1}),l(e(E),{modelValue:e(s).currency,"onUpdate:modelValue":t[4]||(t[4]=o=>e(s).currency=o),required:""},{default:n(()=>[l(e(j),null,{default:n(()=>[l(e(N),{placeholder:"Select currency"})]),_:1}),l(e(q),null,{default:n(()=>[l(e(b),{value:"USD"},{default:n(()=>[...t[17]||(t[17]=[r("USD - US Dollar",-1)])]),_:1}),l(e(b),{value:"EUR"},{default:n(()=>[...t[18]||(t[18]=[r("EUR - Euro",-1)])]),_:1}),l(e(b),{value:"GBP"},{default:n(()=>[...t[19]||(t[19]=[r("GBP - British Pound",-1)])]),_:1}),l(e(b),{value:"JPY"},{default:n(()=>[...t[20]||(t[20]=[r("JPY - Japanese Yen",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),a("div",null,[l(e(p),{for:"reference_number"},{default:n(()=>[...t[21]||(t[21]=[r("Reference Number",-1)])]),_:1}),l(e(k),{id:"reference_number",modelValue:e(s).reference_number,"onUpdate:modelValue":t[5]||(t[5]=o=>e(s).reference_number=o),placeholder:"Check #, transaction ID, etc."},null,8,["modelValue"])])]),_:1})]),_:1}),l(e(y),null,{default:n(()=>[l(e(v),null,{default:n(()=>[l(e(g),null,{default:n(()=>[...t[22]||(t[22]=[r("Payment Method",-1)])]),_:1}),l(e(x),null,{default:n(()=>[...t[23]||(t[23]=[r("How was this payment made?",-1)])]),_:1})]),_:1}),l(e(_),null,{default:n(()=>[a("div",oe,[(i(),f(C,null,D(U,o=>a("div",{key:o.value,class:"relative"},[G(a("input",{id:o.value,"onUpdate:modelValue":t[6]||(t[6]=T=>e(s).payment_method=T),value:o.value,type:"radio",class:"peer sr-only"},null,8,re),[[L,e(s).payment_method]]),a("label",{for:o.value,class:"flex flex-col items-center justify-center rounded-lg border-2 border-muted bg-popover p-4 hover:bg-accent hover:text-accent-foreground peer-checked:border-primary peer-checked:bg-primary peer-checked:text-primary-foreground cursor-pointer"},[(i(),A(O(o.icon),{class:"h-6 w-6 mb-2"})),a("span",me,u(o.label),1)],8,se)])),64))])]),_:1})]),_:1}),l(e(y),null,{default:n(()=>[l(e(v),null,{default:n(()=>[l(e(g),null,{default:n(()=>[...t[24]||(t[24]=[r("Additional Information",-1)])]),_:1}),l(e(x),null,{default:n(()=>[...t[25]||(t[25]=[r("Any additional notes about this payment",-1)])]),_:1})]),_:1}),l(e(_),null,{default:n(()=>[a("div",null,[l(e(p),{for:"notes"},{default:n(()=>[...t[26]||(t[26]=[r("Notes",-1)])]),_:1}),l(e(K),{id:"notes",modelValue:e(s).notes,"onUpdate:modelValue":t[7]||(t[7]=o=>e(s).notes=o),placeholder:"Additional payment notes...",rows:"3"},null,8,["modelValue"])])]),_:1})]),_:1}),d.payment.payment_allocations.length>0?(i(),A(e(y),{key:0},{default:n(()=>[l(e(v),null,{default:n(()=>[l(e(g),null,{default:n(()=>[...t[27]||(t[27]=[r("Current Allocations",-1)])]),_:1}),l(e(x),null,{default:n(()=>[...t[28]||(t[28]=[r("This payment is currently allocated to the following invoices",-1)])]),_:1})]),_:1}),l(e(_),null,{default:n(()=>[a("div",ue,[(i(!0),f(C,null,D(d.payment.payment_allocations,o=>(i(),f("div",{key:o.id,class:"flex justify-between items-center p-3 border rounded"},[a("span",de,"Invoice #"+u(o.invoice_id),1),a("span",ie,u(c(o.amount)),1)]))),128)),a("div",fe,[t[29]||(t[29]=a("span",{class:"font-bold"},"Total Allocated:",-1)),a("span",pe,u(c(V.value)),1)])])]),_:1})]),_:1})):w("",!0),l(e(y),null,{default:n(()=>[l(e(v),null,{default:n(()=>[l(e(g),null,{default:n(()=>[...t[30]||(t[30]=[r("Payment Summary",-1)])]),_:1})]),_:1}),l(e(_),{class:"space-y-3"},{default:n(()=>[a("div",ye,[t[31]||(t[31]=a("span",null,"Payment Amount:",-1)),a("span",_e,u(c(e(s).amount)),1)]),a("div",ce,[t[32]||(t[32]=a("span",null,"Payment Method:",-1)),a("span",null,u(U.find(o=>o.value===e(s).payment_method)?.label),1)]),e(s).reference_number?(i(),f("div",be,[t[33]||(t[33]=a("span",null,"Reference:",-1)),a("span",null,u(e(s).reference_number),1)])):w("",!0)]),_:1})]),_:1})],32)]),_:1},8,["title","breadcrumbs"])],64))}});export{at as default};
