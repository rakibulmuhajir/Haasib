import{d as B,s as F,c as _,a as o,u as e,h as T,w as s,b as r,e as n,t as d,i as y,o as m,j as b,f,F as A}from"./app-B-wLZQl0.js";import{_ as j}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as w}from"./index-a73qSWOM.js";import{_ as g}from"./index-D8JUok4n.js";import{_ as p,a as c}from"./CardContent.vue_vue_type_script_setup_true_lang-f-xi8uWj.js";import{_ as P}from"./CardHeader.vue_vue_type_script_setup_true_lang-Cn7HWfaF.js";import{_ as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-DXA8XANX.js";import{_ as E}from"./DataTable.vue_vue_type_script_setup_true_lang-BQW8AXQk.js";import{C as R}from"./calendar-B0yi2zLg.js";import{F as G}from"./file-text-CFHWSPvd.js";import{A as I}from"./arrow-left-DSX0n2_N.js";import{P as q}from"./plus-C63jdNg7.js";import{L as z}from"./lock-Dh_3770W.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./Collection-DN_gmv-a.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./createLucideIcon-CbxkoCx6.js";import"./check-DogY6QNG.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./users-CkYIFvpU.js";import"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";import"./loader-circle-BSwxCoSE.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";const H={class:"grid grid-cols-1 lg:grid-cols-4 gap-6"},J={class:"flex items-center justify-between"},K={class:"flex items-center justify-between"},M={class:"text-2xl font-bold"},O={class:"text-2xl font-bold"},Q={class:"text-2xl font-bold text-primary"},W={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},X={class:"font-medium"},Y={class:"font-medium"},Z={class:"font-medium"},tt={key:0,class:"text-center py-8 text-muted-foreground"},Ft=B({__name:"Show",props:{company:{},period:{}},setup(l){const i=l,S=[{title:"Dashboard",href:`/${i.company.slug}`},{title:"Payroll Periods",href:`/${i.company.slug}/payroll-periods`},{title:x(i.period),href:`/${i.company.slug}/payroll-periods/${i.period.id}`}];function x(a){const t=new Date(a.period_start).toLocaleDateString("en-US",{month:"short",day:"numeric"}),u=new Date(a.period_end).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${t} - ${u}`}const v=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),$=(a,t)=>new Intl.NumberFormat("en-US",{style:"currency",currency:t||"USD"}).format(a),D=a=>({open:"outline",processing:"secondary",closed:"success",posted:"success"})[a]||"secondary",k=a=>a.charAt(0).toUpperCase()+a.slice(1),N=a=>({draft:"outline",approved:"secondary",paid:"success",cancelled:"destructive"})[a]||"secondary",L=[{key:"payslip_number",label:"Number"},{key:"employee_name",label:"Employee"},{key:"net_pay",label:"Net Pay"},{key:"status",label:"Status"}],U=F(()=>i.period.payslips.map(a=>({id:a.id,payslip_number:a.payslip_number,employee_name:a.employee_name,net_pay:$(a.net_pay,a.currency),status:a.status,_raw:a}))),V=a=>{f.get(`/${i.company.slug}/payslips/${a.id}`)},h=()=>{confirm("Are you sure you want to close this payroll period? This action cannot be undone.")&&f.post(`/${i.company.slug}/payroll-periods/${i.period.id}/close`)};return(a,t)=>(m(),_(A,null,[o(e(T),{title:`Payroll Period - ${x(l.period)}`},null,8,["title"]),o(j,{title:x(l.period),breadcrumbs:S},{actions:s(()=>[o(e(g),{variant:"outline",onClick:t[0]||(t[0]=u=>e(f).get(`/${l.company.slug}/payroll-periods`))},{default:s(()=>[o(e(I),{class:"mr-2 h-4 w-4"}),t[3]||(t[3]=n(" Back ",-1))]),_:1}),l.period.status==="open"?(m(),y(e(g),{key:0,variant:"outline",onClick:t[1]||(t[1]=u=>e(f).get(`/${l.company.slug}/payslips/create?period_id=${l.period.id}`))},{default:s(()=>[o(e(q),{class:"mr-2 h-4 w-4"}),t[4]||(t[4]=n(" Create Payslip ",-1))]),_:1})):b("",!0),l.period.status==="open"?(m(),y(e(g),{key:1,onClick:h},{default:s(()=>[o(e(z),{class:"mr-2 h-4 w-4"}),t[5]||(t[5]=n(" Close Period ",-1))]),_:1})):b("",!0)]),default:s(()=>[r("div",H,[o(e(p),null,{default:s(()=>[o(e(c),{class:"pt-6"},{default:s(()=>[r("div",J,[r("div",null,[t[6]||(t[6]=r("p",{class:"text-sm text-muted-foreground"},"Status",-1)),o(e(w),{variant:D(l.period.status),class:"mt-1"},{default:s(()=>[n(d(k(l.period.status)),1)]),_:1},8,["variant"])]),o(e(R),{class:"h-8 w-8 text-muted-foreground"})])]),_:1})]),_:1}),o(e(p),null,{default:s(()=>[o(e(c),{class:"pt-6"},{default:s(()=>[r("div",K,[r("div",null,[t[7]||(t[7]=r("p",{class:"text-sm text-muted-foreground"},"Payslips",-1)),r("p",M,d(l.period.payslips_count),1)]),o(e(G),{class:"h-8 w-8 text-muted-foreground"})])]),_:1})]),_:1}),o(e(p),null,{default:s(()=>[o(e(c),{class:"pt-6"},{default:s(()=>[r("div",null,[t[8]||(t[8]=r("p",{class:"text-sm text-muted-foreground"},"Total Gross",-1)),r("p",O,d($(l.period.total_gross,l.period.currency)),1)])]),_:1})]),_:1}),o(e(p),null,{default:s(()=>[o(e(c),{class:"pt-6"},{default:s(()=>[r("div",null,[t[9]||(t[9]=r("p",{class:"text-sm text-muted-foreground"},"Total Net",-1)),r("p",Q,d($(l.period.total_net,l.period.currency)),1)])]),_:1})]),_:1})]),o(e(p),{class:"mt-6"},{default:s(()=>[o(e(P),null,{default:s(()=>[o(e(C),null,{default:s(()=>[...t[10]||(t[10]=[n("Period Details",-1)])]),_:1})]),_:1}),o(e(c),null,{default:s(()=>[r("div",W,[r("div",null,[t[11]||(t[11]=r("p",{class:"text-muted-foreground"},"Period Start",-1)),r("p",X,d(v(l.period.period_start)),1)]),r("div",null,[t[12]||(t[12]=r("p",{class:"text-muted-foreground"},"Period End",-1)),r("p",Y,d(v(l.period.period_end)),1)]),r("div",null,[t[13]||(t[13]=r("p",{class:"text-muted-foreground"},"Payment Date",-1)),r("p",Z,d(v(l.period.payment_date)),1)])])]),_:1})]),_:1}),o(e(p),{class:"mt-6"},{default:s(()=>[o(e(P),null,{default:s(()=>[o(e(C),null,{default:s(()=>[...t[14]||(t[14]=[n("Payslips in this Period",-1)])]),_:1})]),_:1}),o(e(c),null,{default:s(()=>[l.period.payslips.length===0?(m(),_("div",tt,[t[16]||(t[16]=n(" No payslips created for this period yet. ",-1)),l.period.status==="open"?(m(),y(e(g),{key:0,variant:"link",onClick:t[2]||(t[2]=u=>e(f).get(`/${l.company.slug}/payslips/create?period_id=${l.period.id}`))},{default:s(()=>[...t[15]||(t[15]=[n(" Create the first payslip ",-1)])]),_:1})):b("",!0)])):(m(),y(E,{key:1,columns:L,data:U.value,onRowClick:V},{"cell-status":s(({row:u})=>[o(e(w),{variant:N(u._raw.status)},{default:s(()=>[n(d(k(u.status)),1)]),_:2},1032,["variant"])]),_:1},8,["data"]))]),_:1})]),_:1})]),_:1},8,["title"])],64))}});export{Ft as default};
