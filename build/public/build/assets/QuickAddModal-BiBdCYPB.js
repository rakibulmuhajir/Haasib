import{d as K,z as W,s as h,q as R,K as j,E as ae,c,B as P,u as e,a as d,j as w,w as $,b as C,i as M,A as X,t as p,e as E,F as Y,r as G,o as a,H as se,x as re,y as ue,an as ie}from"./app-B-wLZQl0.js";import{u as z,x as ce,y as de}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import{c as L,_ as J}from"./index-D8JUok4n.js";import{_ as me,a as fe,b as pe}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-BiuISOh6.js";import{_ as O}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{U as le}from"./user-tDll6vy-.js";import{B as oe}from"./building-2-DLYGST8U.js";import{S as ye}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{L as Q}from"./loader-circle-BSwxCoSE.js";import{C as ne}from"./clock-9a58COAh.js";import{P as ve}from"./plus-C63jdNg7.js";import{C as ee}from"./check-DogY6QNG.js";import{s as he}from"./useForwardExpose-Ca12vFmR.js";import{_ as be,a as ge,b as xe,c as _e,d as ke}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{_ as we}from"./SelectGroup.vue_vue_type_script_setup_true_lang-Cng8hgfl.js";import{C as te}from"./calendar-B0yi2zLg.js";import{_ as De}from"./Checkbox.vue_vue_type_script_setup_true_lang-yNvHsWJi.js";import{_ as Z}from"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import{P as $e}from"./percent-CJFopfja.js";import{u as Ve}from"./useFormFeedback-CE35LO4q.js";import{a as Ce,b as Te,c as Se,d as Ie,_ as Re}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DUuIDTHQ.js";import{_ as Pe}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CLZwVYr3.js";const Fe={class:"flex items-center gap-2 truncate"},Ae={key:0,class:"truncate"},Me={key:1,class:"truncate"},Ee={class:"flex items-center border-b px-3"},Le={class:"max-h-[300px] overflow-y-auto"},Ne={key:0,class:"py-1"},qe={class:"px-2 py-1.5 text-xs font-medium text-muted-foreground flex items-center gap-1"},Be=["onClick"],Ue={class:"flex-1 text-left"},je={class:"font-medium"},He={key:0,class:"text-xs text-muted-foreground"},Oe={key:1,class:"py-6 text-center text-sm text-muted-foreground"},Ke={key:2,class:"py-1"},Xe=["onClick"],Qe={class:"flex-1 text-left"},We={class:"font-medium"},ze={key:0,class:"text-xs text-muted-foreground"},Ye={key:3,class:"py-6 text-center text-sm text-muted-foreground"},Ge={key:4,class:"py-6 text-center text-sm text-muted-foreground"},Je={key:5,class:"py-6 text-center text-sm text-muted-foreground"},Ze={key:0,class:"border-t p-1"},et={key:0,class:"ml-1 text-muted-foreground truncate max-w-[150px]"},tt={key:0,class:"text-sm text-destructive mt-1"},Ut=K({__name:"EntitySearch",props:{modelValue:{},entityType:{},placeholder:{},recentLimit:{default:5},allowQuickAdd:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},error:{},class:{}},emits:["update:modelValue","entity-selected","quick-add-click"],setup(n,{emit:q}){const t=n,m=q,{t:i}=z(),S=W(),V=h(()=>S.props.auth?.currentCompany),D=R(!1),o=R(""),b=R([]),u=R([]),_=R(null),I=R(!1),y=R(!1),A=h(()=>t.entityType==="customer"?le:oe),k=h(()=>t.placeholder||(t.entityType==="customer"?i("searchCustomers"):i("searchVendors"))),T=h(()=>t.entityType==="customer"?i("addNewCustomer"):i("addNewVendor")),F=h(()=>t.entityType==="customer"?i("recentCustomers"):i("recentVendors")),B=h(()=>o.value?t.entityType==="customer"?i("noCustomersFound"):i("noVendorsFound"):""),U=he(async l=>{if(!l||l.length<2||!V.value){b.value=[],I.value=!1;return}I.value=!0;try{const x=`/${V.value.slug}/${t.entityType}s/search`,g=await fetch(`${x}?q=${encodeURIComponent(l)}&limit=10`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(g.ok){const H=await g.json();b.value=H.results||H.data||[]}else b.value=[]}catch(x){console.error("[EntitySearch] Search failed:",x),b.value=[]}finally{I.value=!1}},300),f=async()=>{if(V.value){y.value=!0;try{const l=`/${V.value.slug}/${t.entityType}s/recent`,x=await fetch(`${l}?limit=${t.recentLimit}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(x.ok){const g=await x.json();u.value=g.results||g.data||[]}}catch(l){console.error("[EntitySearch] Failed to load recent items:",l)}finally{y.value=!1}}},r=async()=>{if(!t.modelValue||!V.value){_.value=null;return}const l=[...u.value,...b.value].find(x=>x.id===t.modelValue);if(l){_.value=l;return}try{const x=`/${V.value.slug}/${t.entityType}s/${t.modelValue}`,g=await fetch(x,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(g.ok){const H=await g.json();_.value=H[t.entityType]||H.data||H}}catch(x){console.error("[EntitySearch] Failed to load entity:",x)}},v=l=>{_.value=l,m("update:modelValue",l.id),m("entity-selected",l),D.value=!1,o.value="",b.value=[]},s=()=>{m("quick-add-click",o.value),D.value=!1},N=l=>{l.key==="Escape"&&(D.value=!1)};return j(o,l=>{l&&l.length>=2?U(l):(b.value=[],I.value=!1)}),j(D,l=>{l&&u.value.length===0&&f(),l&&setTimeout(()=>{document.querySelector("[data-entity-search-input]")?.focus()},50)}),j(()=>t.modelValue,l=>{l&&(!_.value||_.value.id!==l)?r():l||(_.value=null)},{immediate:!0}),ae(()=>{t.modelValue&&r()}),(l,x)=>(a(),c("div",{class:P(e(L)("entity-search",t.class))},[d(e(me),{open:D.value,"onUpdate:open":x[1]||(x[1]=g=>D.value=g)},{default:$(()=>[d(e(fe),{"as-child":""},{default:$(()=>[d(e(J),{variant:"outline",role:"combobox","aria-expanded":D.value,disabled:n.disabled,class:P(e(L)("w-full justify-between font-normal",!_.value&&"text-muted-foreground",n.error&&"border-destructive focus-visible:ring-destructive/20"))},{default:$(()=>[C("div",Fe,[(a(),M(X(A.value),{class:"h-4 w-4 shrink-0 opacity-50"})),_.value?(a(),c("span",Ae,p(_.value.name),1)):(a(),c("span",Me,p(k.value),1))]),d(e(ce),{class:"ml-2 h-4 w-4 shrink-0 opacity-50"})]),_:1},8,["aria-expanded","disabled","class"])]),_:1}),d(e(pe),{class:"w-[--reka-popover-trigger-width] min-w-[280px] p-0",align:"start",onKeydown:N},{default:$(()=>[C("div",Ee,[d(e(ye),{class:"h-4 w-4 shrink-0 text-muted-foreground"}),d(e(O),{modelValue:o.value,"onUpdate:modelValue":x[0]||(x[0]=g=>o.value=g),"data-entity-search-input":"",placeholder:k.value,class:"flex h-10 w-full border-0 bg-transparent py-3 text-sm outline-none focus-visible:ring-0 focus-visible:ring-offset-0"},null,8,["modelValue","placeholder"]),I.value?(a(),M(e(Q),{key:0,class:"h-4 w-4 shrink-0 animate-spin text-muted-foreground"})):w("",!0)]),C("div",Le,[!o.value&&u.value.length>0?(a(),c("div",Ne,[C("div",qe,[d(e(ne),{class:"h-3 w-3"}),E(" "+p(F.value),1)]),(a(!0),c(Y,null,G(u.value,g=>(a(),c("button",{key:g.id,type:"button",class:"relative flex w-full cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-accent hover:text-accent-foreground",onClick:H=>v(g)},[(a(),M(X(A.value),{class:"mr-2 h-4 w-4 opacity-50"})),C("div",Ue,[C("div",je,p(g.name),1),g.email?(a(),c("div",He,p(g.email),1)):w("",!0)]),n.modelValue===g.id?(a(),M(e(ee),{key:0,class:"h-4 w-4 text-primary"})):w("",!0)],8,Be))),128))])):!o.value&&y.value?(a(),c("div",Oe,[d(e(Q),{class:"h-5 w-5 animate-spin mx-auto mb-2"}),x[2]||(x[2]=E(" Loading... ",-1))])):w("",!0),o.value&&b.value.length>0?(a(),c("div",Ke,[x[3]||(x[3]=C("div",{class:"px-2 py-1.5 text-xs font-medium text-muted-foreground"}," Results ",-1)),(a(!0),c(Y,null,G(b.value,g=>(a(),c("button",{key:g.id,type:"button",class:"relative flex w-full cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-accent hover:text-accent-foreground",onClick:H=>v(g)},[(a(),M(X(A.value),{class:"mr-2 h-4 w-4 opacity-50"})),C("div",Qe,[C("div",We,p(g.name),1),g.email?(a(),c("div",ze,p(g.email),1)):w("",!0)]),n.modelValue===g.id?(a(),M(e(ee),{key:0,class:"h-4 w-4 text-primary"})):w("",!0)],8,Xe))),128))])):o.value&&o.value.length>=2&&!I.value&&b.value.length===0?(a(),c("div",Ye,p(B.value),1)):o.value&&o.value.length<2?(a(),c("div",Ge," Type at least 2 characters to search ")):!o.value&&!y.value&&u.value.length===0?(a(),c("div",Je," Start typing to search ")):w("",!0)]),n.allowQuickAdd?(a(),c("div",Ze,[C("button",{type:"button",class:"relative flex w-full cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-accent hover:text-accent-foreground",onClick:s},[d(e(ve),{class:"mr-2 h-4 w-4"}),C("span",null,p(T.value),1),o.value?(a(),c("span",et,' "'+p(o.value)+'" ',1)):w("",!0)])])):w("",!0)]),_:1})]),_:1},8,["open"]),n.error?(a(),c("p",tt,p(n.error),1)):w("",!0)],2))}}),at={key:1,class:"text-sm text-destructive mt-1"},jt=K({__name:"AmountInput",props:{modelValue:{},currency:{},placeholder:{},disabled:{type:Boolean},error:{},size:{default:"md"},showCurrency:{type:Boolean,default:!0},min:{default:0},max:{},class:{}},emits:["update:modelValue","blur","focus"],setup(n,{emit:q}){const t={USD:{symbol:"$",decimals:2,symbolPosition:"before"},EUR:{symbol:"€",decimals:2,symbolPosition:"before"},GBP:{symbol:"£",decimals:2,symbolPosition:"before"},SAR:{symbol:"SAR",decimals:2,symbolPosition:"before"},AED:{symbol:"AED",decimals:2,symbolPosition:"before"},QAR:{symbol:"QAR",decimals:2,symbolPosition:"before"},KWD:{symbol:"KWD",decimals:3,symbolPosition:"before"},BHD:{symbol:"BHD",decimals:3,symbolPosition:"before"},OMR:{symbol:"OMR",decimals:3,symbolPosition:"before"},EGP:{symbol:"EGP",decimals:2,symbolPosition:"before"},JOD:{symbol:"JOD",decimals:3,symbolPosition:"before"},INR:{symbol:"₹",decimals:2,symbolPosition:"before"},PKR:{symbol:"PKR",decimals:2,symbolPosition:"before"},JPY:{symbol:"¥",decimals:0,symbolPosition:"before"},CNY:{symbol:"¥",decimals:2,symbolPosition:"before"}},m=n,i=q,S=W(),V=h(()=>S.props.auth?.currentCompany),D=R(),o=R(""),b=R(!1),u=h(()=>m.currency||V.value?.base_currency||"USD"),_=h(()=>t[u.value]||t.USD),I=h(()=>_.value.symbol),y=h(()=>_.value.decimals),A=h(()=>{switch(m.size){case"sm":return"h-8 text-sm";case"lg":return"h-12 text-2xl font-semibold tracking-tight";default:return"h-9 text-base"}}),k=h(()=>{if(!m.showCurrency)return"";const s=I.value.length;return s<=1?"pl-12":s<=3?"pl-16":"pl-20"}),T=s=>s===null||isNaN(s)?"":new Intl.NumberFormat("en-US",{minimumFractionDigits:y.value,maximumFractionDigits:y.value,useGrouping:!0}).format(s),F=s=>{if(!s||s.trim()==="")return null;let N=s.replace(/[^\d.,\-]/g,"").replace(/,/g,"");const l=parseFloat(N);if(isNaN(l))return null;const x=Math.pow(10,y.value);return Math.round(l*x)/x},B=()=>{b.value?o.value=m.modelValue!==null?String(m.modelValue):"":o.value=T(m.modelValue)},U=s=>{const l=s.target.value;o.value=l},f=s=>{b.value=!0,o.value=m.modelValue!==null?String(m.modelValue):"",se(()=>{s.target.select()}),i("focus",s)},r=s=>{b.value=!1;let l=F(o.value);l!==null&&(m.min!==void 0&&l<m.min&&(l=m.min),m.max!==void 0&&l>m.max&&(l=m.max)),i("update:modelValue",l),o.value=T(l),i("blur",s)},v=s=>{if(![8,9,27,13,46].includes(s.keyCode)&&!((s.ctrlKey||s.metaKey)&&[65,67,86,88].includes(s.keyCode))&&!(s.keyCode>=35&&s.keyCode<=40)&&!(s.key==="-"&&m.min!==void 0&&m.min<0&&s.target.selectionStart===0&&!o.value.includes("-"))){if((s.key==="."||s.key===",")&&y.value>0){if(!o.value.includes("."))return;s.preventDefault();return}/^\d$/.test(s.key)||s.preventDefault()}};return j(()=>m.modelValue,()=>{b.value||B()},{immediate:!0}),j(u,()=>{b.value||B()}),(s,N)=>(a(),c("div",{class:P(e(L)("amount-input relative",m.class))},[n.showCurrency?(a(),c("span",{key:0,class:P(["absolute left-2 top-1/2 -translate-y-1/2 select-none pointer-events-none rounded-md border border-border/70 bg-muted/60 px-2 py-1 text-xs font-medium text-muted-foreground",n.size==="sm"?"py-0.5 text-[11px]":"text-xs"])},p(I.value),3)):w("",!0),d(e(O),{ref_key:"inputRef",ref:D,type:"text",inputmode:"decimal",value:o.value,onInput:U,onFocus:f,onBlur:r,onKeydown:v,placeholder:n.placeholder||"0.00",disabled:n.disabled,class:P(e(L)(A.value,k.value,"text-right font-mono tabular-nums bg-muted/10 border-border/70",n.error&&"border-destructive focus-visible:ring-destructive/20")),"aria-invalid":!!n.error},null,8,["value","placeholder","disabled","class","aria-invalid"]),n.error?(a(),c("p",at,p(n.error),1)):w("",!0)],2))}}),st={key:0,class:"space-y-2"},lt={key:0,class:"flex items-center gap-2 text-sm text-muted-foreground"},ot={key:1,class:"mt-2"},nt={key:1,class:"flex items-center gap-2"},rt={class:"relative flex-1"},ut={key:2,class:"text-sm text-destructive mt-1"},Ht=K({__name:"DueDatePicker",props:{modelValue:{},invoiceDate:{},defaultTerms:{default:30},disabled:{type:Boolean},error:{},class:{}},emits:["update:modelValue"],setup(n,{emit:q}){const t=n,m=q,{t:i,tpl:S}=z(),{isAccountantMode:V}=de(),D=R("30"),o=R(!1),b=h(()=>[{value:"receipt",label:i("dueOnReceipt"),getDays:()=>0},{value:"7",label:S("dueInDays",{days:7}),getDays:()=>7},{value:"14",label:S("dueInDays",{days:14}),getDays:()=>14},{value:"15",label:S("dueInDays",{days:15}),getDays:()=>15},{value:"30",label:S("dueInDays",{days:30}),getDays:()=>30},{value:"45",label:S("dueInDays",{days:45}),getDays:()=>45},{value:"60",label:S("dueInDays",{days:60}),getDays:()=>60},{value:"90",label:S("dueInDays",{days:90}),getDays:()=>90},{value:"eom",label:i("dueEndOfMonth"),getDays:()=>null},{value:"custom",label:i("customDate"),getDays:()=>null}]),u=h(()=>t.invoiceDate?new Date(t.invoiceDate):new Date),_=h(()=>t.modelValue?new Date(t.modelValue):null),I=h(()=>_.value?_.value.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""),y=h(()=>{if(!_.value)return null;const f=new Date;f.setHours(0,0,0,0);const r=new Date(_.value);r.setHours(0,0,0,0);const v=r.getTime()-f.getTime();return Math.ceil(v/(1e3*60*60*24))}),A=h(()=>y.value===null?"":y.value===0?"Due today":y.value===1?"Due tomorrow":y.value<0?`${Math.abs(y.value)} days overdue`:`Due in ${y.value} days`),k=f=>{const r=new Date(u.value);switch(r.setHours(0,0,0,0),f){case"receipt":return F(r);case"eom":const v=new Date(r.getFullYear(),r.getMonth()+1,0);return F(v);case"custom":return t.modelValue;default:const s=parseInt(f,10);return isNaN(s)?null:(r.setDate(r.getDate()+s),F(r))}},T=f=>{if(!f)return String(t.defaultTerms);const r=new Date(f),v=new Date(u.value);v.setHours(0,0,0,0),r.setHours(0,0,0,0);const s=new Date(v.getFullYear(),v.getMonth()+1,0);if(r.getTime()===s.getTime())return"eom";const N=r.getTime()-v.getTime(),l=Math.round(N/(1e3*60*60*24));return l===0?"receipt":[7,14,15,30,45,60,90].includes(l)?String(l):"custom"},F=f=>{const r=f.getFullYear(),v=String(f.getMonth()+1).padStart(2,"0"),s=String(f.getDate()).padStart(2,"0");return`${r}-${v}-${s}`},B=f=>{const r=String(f);if(D.value=r,r==="custom"){o.value=!0;return}o.value=!1;const v=k(r);m("update:modelValue",v)},U=f=>{const v=f.target.value;m("update:modelValue",v||null)};return j(()=>t.modelValue,f=>{if(!V.value){const r=T(f);D.value=r,o.value=r==="custom"}},{immediate:!0}),j(u,()=>{if(!V.value&&D.value!=="custom"){const f=k(D.value);f!==t.modelValue&&m("update:modelValue",f)}}),(f,r)=>(a(),c("div",{class:P(e(L)("due-date-picker",t.class))},[e(V)?(a(),c("div",nt,[C("div",rt,[d(e(te),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),d(e(O),{type:"date",value:n.modelValue,onInput:U,disabled:n.disabled,min:n.invoiceDate,class:P(["pl-10",e(L)(n.error&&"border-destructive")])},null,8,["value","disabled","min","class"])]),y.value!==null?(a(),c("span",{key:0,class:P(["text-sm whitespace-nowrap",{"text-destructive":y.value<0,"text-amber-600":y.value===0,"text-muted-foreground":y.value>0}])},p(A.value),3)):w("",!0)])):(a(),c("div",st,[d(e(be),{modelValue:D.value,"onUpdate:modelValue":B,disabled:n.disabled},{default:$(()=>[d(e(ge),{class:P(e(L)("cursor-pointer transition-colors hover:bg-muted/30 data-[placeholder]:text-foreground/70",n.error&&"border-destructive"))},{default:$(()=>[d(e(ne),{class:"h-4 w-4 mr-2 opacity-60"}),d(e(xe),{placeholder:e(i)("dueIn")},null,8,["placeholder"])]),_:1},8,["class"]),d(e(_e),null,{default:$(()=>[d(e(we),null,{default:$(()=>[(a(!0),c(Y,null,G(b.value,v=>(a(),M(e(ke),{key:v.value,value:v.value},{default:$(()=>[E(p(v.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]),n.modelValue?(a(),c("div",lt,[d(e(te),{class:"h-3.5 w-3.5"}),C("span",null,p(I.value),1),y.value!==null?(a(),c("span",{key:0,class:P({"text-destructive":y.value<0,"text-amber-600":y.value===0})}," ("+p(A.value)+") ",3)):w("",!0)])):w("",!0),o.value?(a(),c("div",ot,[d(e(O),{type:"date",value:n.modelValue,onInput:U,disabled:n.disabled,min:n.invoiceDate,class:P(e(L)(n.error&&"border-destructive"))},null,8,["value","disabled","min","class"])])):w("",!0)])),n.error?(a(),c("p",ut,p(n.error),1)):w("",!0)],2))}}),it={class:"flex items-center gap-2 flex-1 min-w-0"},ct={key:1,class:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-xs bg-muted text-muted-foreground"},dt={key:2,class:"text-xs text-amber-600"},Ot=K({__name:"TaxToggle",props:{modelValue:{type:Boolean},entityId:{},entityType:{},label:{},inclusive:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},class:{}},emits:["update:modelValue","tax-code-resolved"],setup(n,{emit:q}){const t=n,m=q,{t:i}=z(),S=W(),V=h(()=>S.props.auth?.currentCompany),D=`tax-toggle-${Math.random().toString(36).slice(2,9)}`,o=R(null),b=R(!1),u=h(()=>t.label?t.label:t.entityType==="vendor"?t.inclusive?i("includesTax"):i("taxDeductible"):i("addTax")),_=h(()=>{if(!o.value)return null;const k=o.value.rate;return`${o.value.name||o.value.code} (${k}%)`}),I=async()=>{if(!t.entityId||!V.value){o.value=null;return}b.value=!0;try{const k=`/${V.value.slug}/${t.entityType}s/${t.entityId}/tax-default`,T=await fetch(k,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(T.ok){const F=await T.json();o.value=F.tax_code||null,m("tax-code-resolved",o.value)}else await y()}catch(k){console.error("[TaxToggle] Failed to fetch entity tax code:",k),await y()}finally{b.value=!1}},y=async()=>{if(V.value)try{const k=`/${V.value.slug}/settings/tax-default`,T=await fetch(k,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(T.ok){const F=await T.json();o.value=F.tax_code||null,m("tax-code-resolved",o.value)}}catch(k){console.error("[TaxToggle] Failed to fetch company tax default:",k)}},A=k=>{m("update:modelValue",k===!0)};return j(()=>t.entityId,k=>{k?I():y()},{immediate:!0}),ae(()=>{t.entityId||y()}),(k,T)=>(a(),c("div",{class:P(e(L)("tax-toggle flex items-center gap-2 rounded-lg border border-border/70 bg-muted/20 px-3 py-2 transition-colors hover:bg-muted/30",t.class))},[d(e(De),{id:D,checked:n.modelValue,"onUpdate:checked":A,disabled:n.disabled},null,8,["checked","disabled"]),C("div",it,[d(e(Z),{for:D,class:P(["text-sm font-medium cursor-pointer select-none",{"opacity-50":n.disabled}])},{default:$(()=>[E(p(u.value),1)]),_:1},8,["class"]),b.value?(a(),M(e(Q),{key:0,class:"h-3.5 w-3.5 animate-spin text-muted-foreground"})):n.modelValue&&_.value?(a(),c("span",ct,[d(e($e),{class:"h-3 w-3"}),E(" "+p(_.value),1)])):n.modelValue&&!_.value&&!b.value?(a(),c("span",dt,p(e(i)("noTaxProfileConfigured")),1)):w("",!0)])],2))}}),mt={class:"space-y-2"},ft={key:0,class:"text-sm text-destructive"},pt={class:"space-y-2"},yt={class:"text-muted-foreground font-normal"},vt={key:0,class:"text-sm text-destructive"},ht={class:"text-sm text-muted-foreground"},bt=K({__name:"QuickAddModal",props:{open:{type:Boolean},entityType:{},initialName:{default:""}},emits:["update:open","created"],setup(n,{emit:q}){const t=n,m=q,{t:i}=z(),{showSuccess:S,showError:V}=Ve(),D=W(),o=h(()=>D.props.auth?.currentCompany),b=R(null),u=re({name:"",email:""}),_=h(()=>t.entityType==="customer"?le:oe),I=h(()=>t.entityType==="customer"?i("quickAddCustomer"):i("quickAddVendor")),y=h(()=>t.entityType==="customer"?i("quickAddCustomerDescription"):i("quickAddVendorDescription")),A=h(()=>t.entityType==="customer"?"Acme Corporation":"Office Depot"),k=h(()=>i("createAndSelect")),T=h(()=>u.name.trim().length>0),F=async()=>{if(!o.value||!T.value)return;const f=`/${o.value.slug}/${t.entityType}s/quick-store`;u.post(f,{preserveScroll:!0,onSuccess:r=>{const s=r.props.flash?.entity||r.props.entity;s&&(m("created",s),S(t.entityType==="customer"?i("customerCreated"):i("vendorCreated"))),m("update:open",!1),B()},onError:r=>{V(r)}})},B=()=>{u.reset(),u.clearErrors()},U=f=>{m("update:open",f),f||B()};return j(()=>t.open,f=>{f&&(u.name=t.initialName||"",u.email="",u.clearErrors(),se(()=>{setTimeout(()=>{b.value?.focus(),b.value?.select()},50)}))}),(f,r)=>(a(),M(e(Re),{open:n.open,"onUpdate:open":U},{default:$(()=>[d(e(Ce),{class:"sm:max-w-md"},{default:$(()=>[d(e(Te),null,{default:$(()=>[d(e(Se),{class:"flex items-center gap-2"},{default:$(()=>[(a(),M(X(_.value),{class:"h-5 w-5"})),E(" "+p(I.value),1)]),_:1}),d(e(Ie),null,{default:$(()=>[E(p(y.value),1)]),_:1})]),_:1}),C("form",{onSubmit:ue(F,["prevent"]),class:"space-y-4"},[C("div",mt,[d(e(Z),{for:"quick-add-name",class:"required"},{default:$(()=>[E(p(e(i)("name")),1)]),_:1}),d(e(O),{id:"quick-add-name",ref_key:"nameInputRef",ref:b,modelValue:e(u).name,"onUpdate:modelValue":r[0]||(r[0]=v=>e(u).name=v),placeholder:A.value,disabled:e(u).processing,class:P(e(L)(e(u).errors.name&&"border-destructive")),autocomplete:"off"},null,8,["modelValue","placeholder","disabled","class"]),e(u).errors.name?(a(),c("p",ft,p(e(u).errors.name),1)):w("",!0)]),C("div",pt,[d(e(Z),{for:"quick-add-email"},{default:$(()=>[E(p(e(i)("email"))+" ",1),C("span",yt,"("+p(e(i)("optional"))+")",1)]),_:1}),d(e(O),{id:"quick-add-email",type:"email",modelValue:e(u).email,"onUpdate:modelValue":r[1]||(r[1]=v=>e(u).email=v),placeholder:"billing@example.com",disabled:e(u).processing,class:P(e(L)(e(u).errors.email&&"border-destructive")),autocomplete:"off"},null,8,["modelValue","disabled","class"]),e(u).errors.email?(a(),c("p",vt,p(e(u).errors.email),1)):w("",!0)]),C("p",ht,p(e(i)("addDetailsLater")),1),d(e(Pe),{class:"gap-2 sm:gap-0"},{default:$(()=>[d(e(J),{type:"button",variant:"outline",onClick:r[2]||(r[2]=v=>U(!1)),disabled:e(u).processing},{default:$(()=>[E(p(e(i)("cancel")),1)]),_:1},8,["disabled"]),d(e(J),{type:"submit",disabled:e(u).processing||!T.value},{default:$(()=>[e(u).processing?(a(),M(e(Q),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):w("",!0),E(" "+p(k.value),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]))}}),Kt=ie(bt,[["__scopeId","data-v-ebce5c69"]]);export{Kt as Q,Ut as _,jt as a,Ot as b,Ht as c};
