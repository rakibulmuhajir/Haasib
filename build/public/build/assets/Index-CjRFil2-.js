import{d as D,s as x,c as N,a,u as e,h as S,w as s,i as d,o as m,f as n,e as p,j as _,t as E,F as V}from"./app-B-wLZQl0.js";import{_ as A}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as B}from"./EmptyState.vue_vue_type_script_setup_true_lang-CrAvLLsO.js";import{_ as L}from"./DataTable.vue_vue_type_script_setup_true_lang-BQW8AXQk.js";import{_ as T}from"./index-a73qSWOM.js";import{_ as u}from"./index-D8JUok4n.js";import{b as F,c as R,d as U,e as y}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import{C as j}from"./calendar-B0yi2zLg.js";import{P as g}from"./plus-C63jdNg7.js";import{E as z}from"./ellipsis-DRk1q4ie.js";import{E as I}from"./eye-pMepw5BK.js";import{L as q}from"./lock-Dh_3770W.js";import{T as G}from"./trash-2-BxVbfljz.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./loader-circle-BSwxCoSE.js";import"./createLucideIcon-CbxkoCx6.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./Collection-DN_gmv-a.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./check-DogY6QNG.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./file-text-CFHWSPvd.js";import"./users-CkYIFvpU.js";import"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";const ht=D({__name:"Index",props:{company:{},periods:{},filters:{}},setup(i){const l=i,$=[{title:"Dashboard",href:`/${l.company.slug}`},{title:"Payroll Periods",href:`/${l.company.slug}/payroll-periods`}],k=[{key:"period",label:"Period"},{key:"payment_date",label:"Payment Date"},{key:"payslips_count",label:"Payslips"},{key:"status",label:"Status"},{key:"_actions",label:"",sortable:!1}],c=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),C=x(()=>l.periods.data.map(t=>({id:t.id,period:`${c(t.period_start)} - ${c(t.period_end)}`,payment_date:c(t.payment_date),payslips_count:t.payslips_count,status:t.status,_raw:t}))),P=t=>{n.get(`/${l.company.slug}/payroll-periods/${t.id}`)},w=t=>{confirm("Are you sure you want to close this payroll period?")&&n.post(`/${l.company.slug}/payroll-periods/${t}/close`)},h=t=>{confirm("Are you sure you want to delete this payroll period?")&&n.delete(`/${l.company.slug}/payroll-periods/${t}`)},v=t=>({open:"outline",processing:"secondary",closed:"success",posted:"success"})[t]||"secondary",b=t=>t.charAt(0).toUpperCase()+t.slice(1);return(t,o)=>(m(),N(V,null,[a(e(S),{title:"Payroll Periods"}),a(A,{title:"Payroll Periods",breadcrumbs:$},{actions:s(()=>[a(e(u),{onClick:o[0]||(o[0]=r=>e(n).get(`/${i.company.slug}/payroll-periods/create`))},{default:s(()=>[a(e(g),{class:"mr-2 h-4 w-4"}),o[2]||(o[2]=p(" New Period ",-1))]),_:1})]),default:s(()=>[i.periods.data.length===0?(m(),d(B,{key:0,title:"No payroll periods yet",description:"Create a payroll period to start processing payroll.",icon:e(j)},{default:s(()=>[a(e(u),{onClick:o[1]||(o[1]=r=>e(n).get(`/${i.company.slug}/payroll-periods/create`))},{default:s(()=>[a(e(g),{class:"mr-2 h-4 w-4"}),o[3]||(o[3]=p(" New Period ",-1))]),_:1})]),_:1},8,["icon"])):(m(),d(L,{key:1,columns:k,data:C.value,pagination:{currentPage:i.periods.current_page,lastPage:i.periods.last_page,perPage:i.periods.per_page,total:i.periods.total},onRowClick:P},{"cell-status":s(({row:r})=>[a(e(T),{variant:v(r._raw.status)},{default:s(()=>[p(E(b(r.status)),1)]),_:2},1032,["variant"])]),"cell-_actions":s(({row:r})=>[a(e(F),null,{default:s(()=>[a(e(R),{"as-child":""},{default:s(()=>[a(e(u),{variant:"ghost",size:"icon",class:"h-8 w-8"},{default:s(()=>[a(e(z),{class:"h-4 w-4"})]),_:1})]),_:1}),a(e(U),{align:"end"},{default:s(()=>[a(e(y),{onClick:f=>e(n).get(`/${i.company.slug}/payroll-periods/${r.id}`)},{default:s(()=>[a(e(I),{class:"mr-2 h-4 w-4"}),o[4]||(o[4]=p(" View ",-1))]),_:1},8,["onClick"]),r._raw.status==="open"?(m(),d(e(y),{key:0,onClick:f=>w(r.id)},{default:s(()=>[a(e(q),{class:"mr-2 h-4 w-4"}),o[5]||(o[5]=p(" Close Period ",-1))]),_:1},8,["onClick"])):_("",!0),r._raw.status==="open"?(m(),d(e(y),{key:1,class:"text-destructive",onClick:f=>h(r.id)},{default:s(()=>[a(e(G),{class:"mr-2 h-4 w-4"}),o[6]||(o[6]=p(" Delete ",-1))]),_:1},8,["onClick"])):_("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["data","pagination"]))]),_:1})],64))}});export{ht as default};
