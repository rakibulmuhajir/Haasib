import{d as j,q as D,s as w,c as f,a as s,u as e,h as M,w as i,b as a,e as r,o as m,F as N,r as q,i as L,t as l,f as p,y as d}from"./app-B-wLZQl0.js";import{_ as G}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as H}from"./DataTable.vue_vue_type_script_setup_true_lang-BQW8AXQk.js";import{_ as J}from"./EmptyState.vue_vue_type_script_setup_true_lang-CrAvLLsO.js";import{_ as S}from"./index-a73qSWOM.js";import{_}from"./index-D8JUok4n.js";import{_ as z,a as E,b as R,c as B,d as y}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{E as K}from"./eye-pMepw5BK.js";import{P as O}from"./pencil-R0Fiz8Cs.js";import{T as Q}from"./trash-2-BxVbfljz.js";import{P as W}from"./plus-C63jdNg7.js";import{F as X}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./loader-circle-BSwxCoSE.js";import"./createLucideIcon-CbxkoCx6.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./Collection-DN_gmv-a.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./check-DogY6QNG.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./nullish-CHIgUVhi.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./file-text-CFHWSPvd.js";import"./users-CkYIFvpU.js";import"./calendar-B0yi2zLg.js";import"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";const Y={class:"mb-4 grid gap-3 md:grid-cols-3"},Z={key:0},tt={key:1},et=["onClick"],st=["onClick"],ot={key:1},it={class:"flex items-center gap-1"},nt={class:"p-4 space-y-3 border-b"},at={class:"flex justify-between items-start"},rt=["onClick"],lt={class:"text-sm text-muted-foreground mt-1"},dt={key:0},ut=["onClick"],ct={key:1},mt={class:"flex justify-between items-center"},vt={class:"text-sm text-muted-foreground"},ft={class:"font-medium"},pt={class:"text-lg font-bold"},_t={class:"flex gap-2 pt-2"},$="__all_vendors",C="__all_status",Yt=j({__name:"Index",props:{company:{},credits:{},vendors:{},filters:{}},setup(v){const u=v,b=D(u.filters.vendor_id??$),g=D(u.filters.status??C),F=[{title:"Dashboard",href:`/${u.company.slug}`},{title:"Vendor Credits",href:`/${u.company.slug}/vendor-credits`}],P=[{key:"credit_number",label:"Credit #"},{key:"vendor",label:"Vendor"},{key:"credit_date",label:"Date"},{key:"amount",label:"Amount"},{key:"reason",label:"Reason"},{key:"status",label:"Status"},{key:"actions",label:"Actions"}],T=(n,o)=>new Intl.NumberFormat("en-US",{style:"currency",currency:o||"USD"}).format(n),U=w(()=>u.credits.data.map(n=>({...n,id:n.id,credit_number:n.credit_number,vendor:n.vendor?.name??"â€”",credit_date:n.credit_date,amount:T(n.amount,n.currency),reason:n.reason,status:n.status,_original:n}))),x=n=>n==="draft"?"secondary":n==="received"?"default":n==="applied"?"success":"secondary",h=()=>{p.get(`/${u.company.slug}/vendor-credits`,{vendor_id:b.value===$?"":b.value,status:g.value===C?"":g.value},{preserveState:!0})},k=n=>{p.get(`/${u.company.slug}/vendor-credits/${n}`)},V=n=>{p.get(`/${u.company.slug}/vendor-credits/${n}/edit`)},A=n=>{confirm("Are you sure you want to delete this vendor credit?")&&p.delete(`/${u.company.slug}/vendor-credits/${n}`)},I=n=>{k(n.id)};return(n,o)=>(m(),f(N,null,[s(e(M),{title:"Vendor Credits"}),s(G,{title:"Vendor Credits",breadcrumbs:F,icon:e(X)},{actions:i(()=>[s(e(_),{onClick:o[0]||(o[0]=t=>e(p).get(`/${v.company.slug}/vendor-credits/create`))},{default:i(()=>[s(e(W),{class:"mr-2 h-4 w-4"}),o[4]||(o[4]=r(" New Credit ",-1))]),_:1})]),default:i(()=>[a("div",Y,[s(e(z),{modelValue:b.value,"onUpdate:modelValue":[o[1]||(o[1]=t=>b.value=t),h]},{default:i(()=>[s(e(E),null,{default:i(()=>[s(e(R),{placeholder:"All vendors"})]),_:1}),s(e(B),null,{default:i(()=>[s(e(y),{value:$},{default:i(()=>[...o[5]||(o[5]=[r("All vendors",-1)])]),_:1}),(m(!0),f(N,null,q(v.vendors,t=>(m(),L(e(y),{key:t.id,value:t.id},{default:i(()=>[r(l(t.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),s(e(z),{modelValue:g.value,"onUpdate:modelValue":[o[2]||(o[2]=t=>g.value=t),h]},{default:i(()=>[s(e(E),null,{default:i(()=>[s(e(R),{placeholder:"All status"})]),_:1}),s(e(B),null,{default:i(()=>[s(e(y),{value:C},{default:i(()=>[...o[6]||(o[6]=[r("All status",-1)])]),_:1}),s(e(y),{value:"draft"},{default:i(()=>[...o[7]||(o[7]=[r("Draft",-1)])]),_:1}),s(e(y),{value:"received"},{default:i(()=>[...o[8]||(o[8]=[r("Received",-1)])]),_:1}),s(e(y),{value:"applied"},{default:i(()=>[...o[9]||(o[9]=[r("Applied",-1)])]),_:1}),s(e(y),{value:"void"},{default:i(()=>[...o[10]||(o[10]=[r("Void",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),v.credits.data.length?(m(),f("div",tt,[s(H,{columns:P,data:U.value,pagination:v.credits,clickable:"",hoverable:"",onRowClick:I},{credit_number:i(({row:t})=>[a("button",{class:"font-medium text-primary hover:text-primary/80 transition-colors",onClick:d(c=>k(t.id),["stop"])},l(t.credit_number),9,et)]),vendor:i(({row:t})=>[t._original.vendor?(m(),f("button",{key:0,class:"text-blue-600 hover:text-blue-800 transition-colors",onClick:d(c=>e(p).get(`/${v.company.slug}/vendors/${t._original.vendor.id}`),["stop"])},l(t.vendor),9,st)):(m(),f("span",ot,l(t.vendor),1))]),status:i(({value:t})=>[s(e(S),{variant:x(t)},{default:i(()=>[r(l(t),1)]),_:2},1032,["variant"])]),"cell-actions":i(({row:t})=>[a("div",it,[s(e(_),{variant:"ghost",size:"icon",class:"h-8 w-8",onClick:d(c=>k(t.id),["stop"]),title:"View"},{default:i(()=>[s(e(K),{class:"h-4 w-4"})]),_:1},8,["onClick"]),s(e(_),{variant:"ghost",size:"icon",class:"h-8 w-8",onClick:d(c=>V(t.id),["stop"]),title:"Edit"},{default:i(()=>[s(e(O),{class:"h-4 w-4"})]),_:1},8,["onClick"]),s(e(_),{variant:"ghost",size:"icon",class:"h-8 w-8 text-destructive hover:text-destructive",onClick:d(c=>A(t.id),["stop"]),title:"Delete"},{default:i(()=>[s(e(Q),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),"mobile-card":i(({row:t})=>[a("div",nt,[a("div",at,[a("div",null,[a("button",{class:"font-semibold text-primary hover:text-primary/80 transition-colors",onClick:d(c=>k(t.id),["stop"])},l(t.credit_number),9,rt),a("div",lt,[t._original.vendor?(m(),f("span",dt,[a("button",{class:"text-blue-600 hover:text-blue-800 transition-colors",onClick:d(c=>e(p).get(`/${v.company.slug}/vendors/${t._original.vendor.id}`),["stop"])},l(t.vendor),9,ut)])):(m(),f("span",ct,l(t.vendor),1))])]),s(e(S),{variant:x(t.status)},{default:i(()=>[r(l(t.status),1)]),_:2},1032,["variant"])]),a("div",mt,[a("div",null,[a("div",vt,l(t.credit_date),1),a("div",ft,l(t.reason),1)]),a("div",pt,l(t.amount),1)]),a("div",_t,[s(e(_),{size:"sm",onClick:d(c=>k(t.id),["stop"])},{default:i(()=>[...o[11]||(o[11]=[r("View",-1)])]),_:1},8,["onClick"]),s(e(_),{size:"sm",variant:"outline",onClick:d(c=>V(t.id),["stop"])},{default:i(()=>[...o[12]||(o[12]=[r("Edit",-1)])]),_:1},8,["onClick"]),s(e(_),{size:"sm",variant:"destructive",onClick:d(c=>A(t.id),["stop"])},{default:i(()=>[...o[13]||(o[13]=[r("Delete",-1)])]),_:1},8,["onClick"])])])]),_:1},8,["data","pagination"])])):(m(),f("div",Z,[s(J,{title:"No vendor credits yet",description:"Create your first vendor credit.","cta-text":"New Credit",onClick:o[3]||(o[3]=t=>e(p).get(`/${v.company.slug}/vendor-credits/create`))})]))]),_:1},8,["icon"])],64))}});export{Yt as default};
