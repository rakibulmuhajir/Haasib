import{d as x,s as N,c as E,a as s,u as e,h as F,w as r,i as c,o as m,f as n,e as p,j as y,t as V,F as A}from"./app-B-wLZQl0.js";import{_ as B}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as T}from"./EmptyState.vue_vue_type_script_setup_true_lang-CrAvLLsO.js";import{_ as U}from"./DataTable.vue_vue_type_script_setup_true_lang-BQW8AXQk.js";import{_ as z}from"./index-a73qSWOM.js";import{_ as f}from"./index-D8JUok4n.js";import{b as I,c as M,d as R,e as u,z as j}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import{F as L}from"./file-text-CFHWSPvd.js";import{P as $}from"./plus-C63jdNg7.js";import{E as q}from"./ellipsis-DRk1q4ie.js";import{E as G}from"./eye-pMepw5BK.js";import{C as H}from"./circle-check-big-lFRxU29B.js";import{T as J}from"./trash-2-BxVbfljz.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./loader-circle-BSwxCoSE.js";import"./createLucideIcon-CbxkoCx6.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./Collection-DN_gmv-a.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./check-DogY6QNG.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./users-CkYIFvpU.js";import"./calendar-B0yi2zLg.js";import"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";const Dt=x({__name:"Index",props:{company:{},payslips:{},filters:{}},setup(i){const l=i,g=[{title:"Dashboard",href:`/${l.company.slug}`},{title:"Payslips",href:`/${l.company.slug}/payslips`}],k=[{key:"payslip_number",label:"Number"},{key:"employee",label:"Employee"},{key:"period",label:"Period"},{key:"net_pay",label:"Net Pay"},{key:"status",label:"Status"},{key:"_actions",label:"",sortable:!1}],_=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),C=(t,a)=>new Intl.NumberFormat("en-US",{style:"currency",currency:a||"USD"}).format(t),v=N(()=>l.payslips.data.map(t=>({id:t.id,payslip_number:t.payslip_number,employee:`${t.employee.first_name} ${t.employee.last_name}`,period:`${_(t.payroll_period.period_start)} - ${_(t.payroll_period.period_end)}`,net_pay:C(t.net_pay,t.currency),status:t.status,_raw:t}))),b=t=>{n.get(`/${l.company.slug}/payslips/${t.id}`)},w=t=>{n.post(`/${l.company.slug}/payslips/${t}/approve`)},P=t=>{n.post(`/${l.company.slug}/payslips/${t}/mark-paid`)},h=t=>{confirm("Are you sure you want to delete this payslip?")&&n.delete(`/${l.company.slug}/payslips/${t}`)},D=t=>({draft:"outline",approved:"secondary",paid:"success",cancelled:"destructive"})[t]||"secondary",S=t=>t.charAt(0).toUpperCase()+t.slice(1);return(t,a)=>(m(),E(A,null,[s(e(F),{title:"Payslips"}),s(B,{title:"Payslips",breadcrumbs:g},{actions:r(()=>[s(e(f),{onClick:a[0]||(a[0]=o=>e(n).get(`/${i.company.slug}/payslips/create`))},{default:r(()=>[s(e($),{class:"mr-2 h-4 w-4"}),a[2]||(a[2]=p(" Create Payslip ",-1))]),_:1})]),default:r(()=>[i.payslips.data.length===0?(m(),c(T,{key:0,title:"No payslips yet",description:"Create payslips to process employee payments.",icon:e(L)},{default:r(()=>[s(e(f),{onClick:a[1]||(a[1]=o=>e(n).get(`/${i.company.slug}/payslips/create`))},{default:r(()=>[s(e($),{class:"mr-2 h-4 w-4"}),a[3]||(a[3]=p(" Create Payslip ",-1))]),_:1})]),_:1},8,["icon"])):(m(),c(U,{key:1,columns:k,data:v.value,pagination:{currentPage:i.payslips.current_page,lastPage:i.payslips.last_page,perPage:i.payslips.per_page,total:i.payslips.total},onRowClick:b},{"cell-status":r(({row:o})=>[s(e(z),{variant:D(o._raw.status)},{default:r(()=>[p(V(S(o.status)),1)]),_:2},1032,["variant"])]),"cell-_actions":r(({row:o})=>[s(e(I),null,{default:r(()=>[s(e(M),{"as-child":""},{default:r(()=>[s(e(f),{variant:"ghost",size:"icon",class:"h-8 w-8"},{default:r(()=>[s(e(q),{class:"h-4 w-4"})]),_:1})]),_:1}),s(e(R),{align:"end"},{default:r(()=>[s(e(u),{onClick:d=>e(n).get(`/${i.company.slug}/payslips/${o.id}`)},{default:r(()=>[s(e(G),{class:"mr-2 h-4 w-4"}),a[4]||(a[4]=p(" View ",-1))]),_:1},8,["onClick"]),o._raw.status==="draft"?(m(),c(e(u),{key:0,onClick:d=>w(o.id)},{default:r(()=>[s(e(H),{class:"mr-2 h-4 w-4"}),a[5]||(a[5]=p(" Approve ",-1))]),_:1},8,["onClick"])):y("",!0),o._raw.status==="approved"?(m(),c(e(u),{key:1,onClick:d=>P(o.id)},{default:r(()=>[s(e(j),{class:"mr-2 h-4 w-4"}),a[6]||(a[6]=p(" Mark Paid ",-1))]),_:1},8,["onClick"])):y("",!0),o._raw.status==="draft"?(m(),c(e(u),{key:2,class:"text-destructive",onClick:d=>h(o.id)},{default:r(()=>[s(e(J),{class:"mr-2 h-4 w-4"}),a[7]||(a[7]=p(" Delete ",-1))]),_:1},8,["onClick"])):y("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["data","pagination"]))]),_:1})],64))}});export{Dt as default};
