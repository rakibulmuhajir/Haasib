import{d as j,c as i,a as o,u as e,h as F,w as s,b as n,t as c,i as b,j as r,e as u,o as l,F as T,r as I,A as P,B as h,f as v}from"./app-B-wLZQl0.js";import{_ as z}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as p}from"./index-D8JUok4n.js";import{_ as $}from"./index-a73qSWOM.js";import{_ as k,a as g}from"./CardContent.vue_vue_type_script_setup_true_lang-f-xi8uWj.js";import{_ as O}from"./CardDescription.vue_vue_type_script_setup_true_lang-D23jLuEj.js";import{_ as C}from"./CardHeader.vue_vue_type_script_setup_true_lang-Cn7HWfaF.js";import{_ as w}from"./CardTitle.vue_vue_type_script_setup_true_lang-DXA8XANX.js";import{_ as G,a as M,b as L,c as y,d as W,e as x}from"./TableHeader.vue_vue_type_script_setup_true_lang-r2CqmNXq.js";import{A as q,a as H}from"./arrow-up-right-riTe9r83.js";import{C as J}from"./circle-check-YKnAkXoj.js";import{C as K}from"./clock-9a58COAh.js";import{s as D}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import{C as Q}from"./calendar-B0yi2zLg.js";import{P as X}from"./pencil-R0Fiz8Cs.js";import{T as Y}from"./trash-2-BxVbfljz.js";import{L as Z}from"./plus-C63jdNg7.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./loader-circle-BSwxCoSE.js";import"./createLucideIcon-CbxkoCx6.js";import"./info-_qQ0Rbsf.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./Collection-DN_gmv-a.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./check-DogY6QNG.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./file-text-CFHWSPvd.js";import"./users-CkYIFvpU.js";import"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";const tt={class:"flex gap-2"},nt={class:"grid gap-6 lg:grid-cols-3"},et={class:"lg:col-span-2 space-y-6"},at={class:"flex items-center justify-between"},ot={class:"text-3xl font-bold"},st={class:"flex items-center gap-2"},ct={class:"grid gap-4 md:grid-cols-2"},lt={class:"font-medium"},ut={class:"font-medium font-mono"},it={class:"font-medium"},dt={class:"font-medium"},rt={key:0},mt={class:"font-medium font-mono"},ft={key:1},bt={class:"font-medium font-mono"},kt={key:2},gt={class:"font-medium font-mono"},yt={key:3},xt={class:"font-medium"},At={key:0,class:"mt-4 pt-4 border-t"},_t={key:0,class:"font-medium"},vt={key:1,class:"text-sm text-muted-foreground"},pt={key:1,class:"mt-4 pt-4 border-t"},Ct={class:"text-sm"},wt={key:0,class:"text-center py-8 text-muted-foreground"},ht={class:"flex items-center gap-2"},$t={class:"font-medium"},Dt={key:0,class:"text-xs text-muted-foreground"},Bt={key:1,class:"text-muted-foreground text-sm"},Rt={class:"space-y-6"},Tt={class:"space-y-4"},Lt={key:0},Nt={class:"font-medium"},St={class:"text-sm text-muted-foreground"},Ut={key:1},Et={class:"font-medium"},Vt={class:"space-y-2"},jt={class:"font-medium"},Ft={class:"font-medium"},It={class:"space-y-2 text-sm"},Pt={class:"flex justify-between"},zt={class:"flex justify-between"},$n=j({__name:"Show",props:{company:{},bankAccount:{},recentTransactions:{},lastReconciliation:{},canEdit:{type:Boolean},canDelete:{type:Boolean}},setup(a){const d=a,N=[{title:"Dashboard",href:`/${d.company.slug}`},{title:"Banking",href:`/${d.company.slug}/banking/accounts`},{title:d.bankAccount.account_name,href:`/${d.company.slug}/banking/accounts/${d.bankAccount.id}`}],S={checking:"Checking Account",savings:"Savings Account",credit_card:"Credit Card",cash:"Petty Cash",other:"Other Account"},A=(f,t)=>new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(f),_=f=>f?new Date(f).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"—",B=f=>f?new Date(f).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}):"—",U=()=>{v.get(`/${d.company.slug}/banking/accounts/${d.bankAccount.id}/edit`)},E=()=>{if(d.bankAccount.unreconciled_count>0){alert("Cannot delete account with unreconciled transactions.");return}confirm(`Delete "${d.bankAccount.account_name}"?`)&&v.delete(`/${d.company.slug}/banking/accounts/${d.bankAccount.id}`)},R=()=>{v.get(`/${d.company.slug}/banking/reconciliation/start`,{bank_account_id:d.bankAccount.id})},V=f=>{v.get(`/${d.company.slug}/banking/feed`,{transaction_id:f})};return(f,t)=>(l(),i(T,null,[o(e(F),{title:a.bankAccount.account_name},null,8,["title"]),o(z,{title:a.bankAccount.account_name,breadcrumbs:N,icon:e(Z)},{actions:s(()=>[n("div",tt,[o(e(p),{variant:"outline",onClick:R},{default:s(()=>[o(e(D),{class:"mr-2 h-4 w-4"}),t[0]||(t[0]=u(" Reconcile ",-1))]),_:1}),a.canEdit?(l(),b(e(p),{key:0,variant:"outline",onClick:U},{default:s(()=>[o(e(X),{class:"mr-2 h-4 w-4"}),t[1]||(t[1]=u(" Edit ",-1))]),_:1})):r("",!0),a.canDelete&&a.bankAccount.unreconciled_count===0?(l(),b(e(p),{key:1,variant:"destructive",onClick:E},{default:s(()=>[o(e(Y),{class:"mr-2 h-4 w-4"}),t[2]||(t[2]=u(" Delete ",-1))]),_:1})):r("",!0)])]),default:s(()=>[n("div",nt,[n("div",et,[o(e(k),null,{default:s(()=>[o(e(g),{class:"pt-6"},{default:s(()=>[n("div",at,[n("div",null,[t[3]||(t[3]=n("p",{class:"text-sm text-muted-foreground"},"Current Balance",-1)),n("p",ot,c(A(a.bankAccount.current_balance,a.bankAccount.currency)),1)]),n("div",st,[o(e($),{variant:a.bankAccount.is_active?"default":"secondary"},{default:s(()=>[u(c(a.bankAccount.is_active?"Active":"Inactive"),1)]),_:1},8,["variant"]),a.bankAccount.is_primary?(l(),b(e($),{key:0,variant:"outline"},{default:s(()=>[...t[4]||(t[4]=[u("Primary",-1)])]),_:1})):r("",!0)])])]),_:1})]),_:1}),o(e(k),null,{default:s(()=>[o(e(C),null,{default:s(()=>[o(e(w),null,{default:s(()=>[...t[5]||(t[5]=[u("Account Details",-1)])]),_:1})]),_:1}),o(e(g),null,{default:s(()=>[n("div",ct,[n("div",null,[t[6]||(t[6]=n("p",{class:"text-sm text-muted-foreground"},"Account Type",-1)),n("p",lt,c(S[a.bankAccount.account_type]||a.bankAccount.account_type),1)]),n("div",null,[t[7]||(t[7]=n("p",{class:"text-sm text-muted-foreground"},"Account Number",-1)),n("p",ut,c(a.bankAccount.account_number),1)]),n("div",null,[t[8]||(t[8]=n("p",{class:"text-sm text-muted-foreground"},"Currency",-1)),n("p",it,c(a.bankAccount.currency),1)]),n("div",null,[t[9]||(t[9]=n("p",{class:"text-sm text-muted-foreground"},"Bank",-1)),n("p",dt,c(a.bankAccount.bank?.name||"—"),1)]),a.bankAccount.iban?(l(),i("div",rt,[t[10]||(t[10]=n("p",{class:"text-sm text-muted-foreground"},"IBAN",-1)),n("p",mt,c(a.bankAccount.iban),1)])):r("",!0),a.bankAccount.swift_code?(l(),i("div",ft,[t[11]||(t[11]=n("p",{class:"text-sm text-muted-foreground"},"SWIFT Code",-1)),n("p",bt,c(a.bankAccount.swift_code),1)])):r("",!0),a.bankAccount.routing_number?(l(),i("div",kt,[t[12]||(t[12]=n("p",{class:"text-sm text-muted-foreground"},"Routing Number",-1)),n("p",gt,c(a.bankAccount.routing_number),1)])):r("",!0),a.bankAccount.gl_account?(l(),i("div",yt,[t[13]||(t[13]=n("p",{class:"text-sm text-muted-foreground"},"GL Account",-1)),n("p",xt,c(a.bankAccount.gl_account.code)+" — "+c(a.bankAccount.gl_account.name),1)])):r("",!0)]),a.bankAccount.branch_name||a.bankAccount.branch_address?(l(),i("div",At,[t[14]||(t[14]=n("p",{class:"text-sm text-muted-foreground mb-1"},"Branch",-1)),a.bankAccount.branch_name?(l(),i("p",_t,c(a.bankAccount.branch_name),1)):r("",!0),a.bankAccount.branch_address?(l(),i("p",vt,c(a.bankAccount.branch_address),1)):r("",!0)])):r("",!0),a.bankAccount.notes?(l(),i("div",pt,[t[15]||(t[15]=n("p",{class:"text-sm text-muted-foreground mb-1"},"Notes",-1)),n("p",Ct,c(a.bankAccount.notes),1)])):r("",!0)]),_:1})]),_:1}),o(e(k),null,{default:s(()=>[o(e(C),null,{default:s(()=>[o(e(w),null,{default:s(()=>[...t[16]||(t[16]=[u("Recent Transactions",-1)])]),_:1}),o(e(O),null,{default:s(()=>[...t[17]||(t[17]=[u("Last 25 transactions",-1)])]),_:1})]),_:1}),o(e(g),null,{default:s(()=>[a.recentTransactions.length===0?(l(),i("div",wt," No transactions yet ")):(l(),b(e(G),{key:1},{default:s(()=>[o(e(M),null,{default:s(()=>[o(e(L),null,{default:s(()=>[o(e(y),null,{default:s(()=>[...t[18]||(t[18]=[u("Date",-1)])]),_:1}),o(e(y),null,{default:s(()=>[...t[19]||(t[19]=[u("Description",-1)])]),_:1}),o(e(y),null,{default:s(()=>[...t[20]||(t[20]=[u("Category",-1)])]),_:1}),o(e(y),{class:"text-right"},{default:s(()=>[...t[21]||(t[21]=[u("Amount",-1)])]),_:1}),o(e(y),{class:"text-center"},{default:s(()=>[...t[22]||(t[22]=[u("Status",-1)])]),_:1})]),_:1})]),_:1}),o(e(W),null,{default:s(()=>[(l(!0),i(T,null,I(a.recentTransactions,m=>(l(),b(e(L),{key:m.id,class:"cursor-pointer hover:bg-muted/50",onClick:Ot=>V(m.id)},{default:s(()=>[o(e(x),{class:"whitespace-nowrap"},{default:s(()=>[u(c(_(m.transaction_date)),1)]),_:2},1024),o(e(x),null,{default:s(()=>[n("div",ht,[(l(),b(P(m.amount>0?e(q):e(H)),{class:h([m.amount>0?"text-green-600":"text-red-600","h-4 w-4"])},null,8,["class"])),n("div",null,[n("p",$t,c(m.description),1),m.payee_name?(l(),i("p",Dt,c(m.payee_name),1)):r("",!0)])])]),_:2},1024),o(e(x),null,{default:s(()=>[m.category?(l(),b(e($),{key:0,variant:"outline"},{default:s(()=>[u(c(m.category),1)]),_:2},1024)):(l(),i("span",Bt,"Uncategorized"))]),_:2},1024),o(e(x),{class:h(["text-right font-mono",m.amount>0?"text-green-600":"text-red-600"])},{default:s(()=>[u(c(A(Math.abs(m.amount),a.bankAccount.currency)),1)]),_:2},1032,["class"]),o(e(x),{class:"text-center"},{default:s(()=>[m.is_reconciled?(l(),b(e(J),{key:0,class:"h-4 w-4 text-green-600 mx-auto"})):(l(),b(e(K),{key:1,class:"h-4 w-4 text-amber-500 mx-auto"}))]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}))]),_:1})]),_:1})]),n("div",Rt,[o(e(k),null,{default:s(()=>[o(e(C),null,{default:s(()=>[o(e(w),{class:"flex items-center gap-2"},{default:s(()=>[o(e(D),{class:"h-4 w-4"}),t[23]||(t[23]=u(" Reconciliation ",-1))]),_:1})]),_:1}),o(e(g),null,{default:s(()=>[n("div",Tt,[n("div",null,[t[24]||(t[24]=n("p",{class:"text-sm text-muted-foreground"},"Unreconciled Transactions",-1)),n("p",{class:h(["text-2xl font-bold",a.bankAccount.unreconciled_count>0?"text-amber-600":"text-green-600"])},c(a.bankAccount.unreconciled_count),3)]),a.lastReconciliation?(l(),i("div",Lt,[t[25]||(t[25]=n("p",{class:"text-sm text-muted-foreground"},"Last Reconciled",-1)),n("p",Nt,c(_(a.lastReconciliation.statement_date)),1),n("p",St," Balance: "+c(A(a.lastReconciliation.statement_ending_balance,a.bankAccount.currency)),1)])):r("",!0),a.bankAccount.last_reconciled_date?(l(),i("div",Ut,[t[26]||(t[26]=n("p",{class:"text-sm text-muted-foreground"},"Last Reconciled Date",-1)),n("p",Et,c(_(a.bankAccount.last_reconciled_date)),1)])):r("",!0),o(e(p),{class:"w-full",onClick:R},{default:s(()=>[o(e(D),{class:"mr-2 h-4 w-4"}),t[27]||(t[27]=u(" Start Reconciliation ",-1))]),_:1})])]),_:1})]),_:1}),o(e(k),null,{default:s(()=>[o(e(C),null,{default:s(()=>[o(e(w),{class:"flex items-center gap-2"},{default:s(()=>[o(e(Q),{class:"h-4 w-4"}),t[28]||(t[28]=u(" Opening Balance ",-1))]),_:1})]),_:1}),o(e(g),null,{default:s(()=>[n("div",Vt,[n("div",null,[t[29]||(t[29]=n("p",{class:"text-sm text-muted-foreground"},"Amount",-1)),n("p",jt,c(A(a.bankAccount.opening_balance,a.bankAccount.currency)),1)]),n("div",null,[t[30]||(t[30]=n("p",{class:"text-sm text-muted-foreground"},"As of",-1)),n("p",Ft,c(_(a.bankAccount.opening_balance_date)),1)])])]),_:1})]),_:1}),o(e(k),null,{default:s(()=>[o(e(g),{class:"pt-6"},{default:s(()=>[n("div",It,[n("div",Pt,[t[31]||(t[31]=n("span",{class:"text-muted-foreground"},"Created",-1)),n("span",null,c(B(a.bankAccount.created_at)),1)]),n("div",zt,[t[32]||(t[32]=n("span",{class:"text-muted-foreground"},"Updated",-1)),n("span",null,c(B(a.bankAccount.updated_at)),1)])])]),_:1})]),_:1})])])]),_:1},8,["title","icon"])],64))}});export{$n as default};
