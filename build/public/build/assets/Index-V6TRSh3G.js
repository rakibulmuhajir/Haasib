import{d as A,q as y,s as G,c as p,a,u as e,h as H,w as s,b as n,N as J,e as d,t as r,o as m,F as T,r as Q,i as R,f as h,y as j}from"./app-B-wLZQl0.js";import{S as W,_ as X}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as Y}from"./DataTable.vue_vue_type_script_setup_true_lang-BQW8AXQk.js";import{_ as Z}from"./EmptyState.vue_vue_type_script_setup_true_lang-CrAvLLsO.js";import{_ as w}from"./index-a73qSWOM.js";import{_ as ee}from"./index-D8JUok4n.js";import{_ as V}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{_ as I,a as L,b as P,c as K,d as c}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{u as te}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import{P as le}from"./plus-C63jdNg7.js";import{F as ae}from"./file-text-CFHWSPvd.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./loader-circle-BSwxCoSE.js";import"./createLucideIcon-CbxkoCx6.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./Collection-DN_gmv-a.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./check-DogY6QNG.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./nullish-CHIgUVhi.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./users-CkYIFvpU.js";import"./calendar-B0yi2zLg.js";import"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";const oe={class:"mb-4 grid gap-3 md:grid-cols-5"},se={class:"relative md:col-span-2"},ne={class:"grid grid-cols-2 gap-2"},ie={key:0},re={key:1},de=["onClick"],ue=["onClick"],ce={key:1,class:"text-muted-foreground"},me=["onClick"],_e=["onClick"],pe={class:"space-y-3"},fe={class:"flex items-center justify-between"},ve={class:"font-semibold text-primary"},be=["onClick"],ye={key:1,class:"text-sm text-muted-foreground"},he=["onClick"],ge={class:"grid grid-cols-2 gap-2 text-sm"},ke={class:"font-medium ml-1"},xe={class:"font-medium ml-1"},$e={class:"flex items-center justify-between pt-2 border-t border-zinc-100"},Ve={class:"font-medium ml-1"},Ce={class:"font-medium ml-1"},C="__all_vendors",S="__all_status",st=A({__name:"Index",props:{company:{},bills:{},filters:{},vendors:{}},setup(f){const u=f,{t:o}=te(),k=y(u.filters.search??""),g=y(u.filters.vendor_id??C),b=y(u.filters.status??S),x=y(u.filters.from_date??""),$=y(u.filters.to_date??""),M=[{title:o("dashboard"),href:`/${u.company.slug}`},{title:o("bills"),href:`/${u.company.slug}/bills`}],q=[{key:"bill_number",label:o("billNumber")},{key:"vendor",label:o("vendor")},{key:"bill_date",label:o("date")},{key:"due_date",label:o("due")},{key:"total_amount",label:o("total")},{key:"balance",label:o("balance")},{key:"status",label:o("status")}],B=(l,i)=>new Intl.NumberFormat("en-US",{style:"currency",currency:i||"USD"}).format(l),D=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),U=l=>l==="draft"?"secondary":l==="received"?"default":l==="partial"?"outline":l==="paid"?"default":l==="overdue"?"destructive":"secondary",E=G(()=>u.bills.data.map(l=>({id:l.id,bill_number:l.bill_number,vendor:l.vendor?.name??"â€”",vendor_id:l.vendor_id,bill_date:D(l.bill_date),due_date:D(l.due_date),total_amount:B(l.total_amount,l.currency),balance:B(l.balance,l.currency),status:l.status,_billObject:l}))),v=()=>{h.get(`/${u.company.slug}/bills`,{search:k.value,vendor_id:g.value===C?"":g.value,status:b.value===S?"":b.value,from_date:x.value,to_date:$.value},{preserveState:!0})},z=l=>{h.get(`/${u.company.slug}/bills/${l}`)},F=l=>{h.get(`/${u.company.slug}/vendors/${l}`)},N=l=>{b.value=l,v()};return(l,i)=>(m(),p(T,null,[a(e(H),{title:e(o)("bills")},null,8,["title"]),a(X,{title:e(o)("bills"),breadcrumbs:M,icon:e(ae)},{actions:s(()=>[a(e(ee),{onClick:i[0]||(i[0]=t=>e(h).get(`/${f.company.slug}/bills/create`))},{default:s(()=>[a(e(le),{class:"mr-2 h-4 w-4"}),d(" "+r(e(o)("newBill")),1)]),_:1})]),default:s(()=>[n("div",oe,[n("div",se,[a(e(W),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a(e(V),{modelValue:k.value,"onUpdate:modelValue":i[1]||(i[1]=t=>k.value=t),placeholder:e(o)("searchBillPlaceholder"),class:"pl-10",onKeyup:J(v,["enter"])},null,8,["modelValue","placeholder"])]),a(e(I),{modelValue:g.value,"onUpdate:modelValue":[i[2]||(i[2]=t=>g.value=t),v]},{default:s(()=>[a(e(L),null,{default:s(()=>[a(e(P),{placeholder:e(o)("allVendors")},null,8,["placeholder"])]),_:1}),a(e(K),null,{default:s(()=>[a(e(c),{value:C},{default:s(()=>[d(r(e(o)("allVendors")),1)]),_:1}),(m(!0),p(T,null,Q(f.vendors,t=>(m(),R(e(c),{key:t.id,value:t.id},{default:s(()=>[d(r(t.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),a(e(I),{modelValue:b.value,"onUpdate:modelValue":[i[3]||(i[3]=t=>b.value=t),v]},{default:s(()=>[a(e(L),null,{default:s(()=>[a(e(P),{placeholder:e(o)("allStatus")},null,8,["placeholder"])]),_:1}),a(e(K),null,{default:s(()=>[a(e(c),{value:S},{default:s(()=>[d(r(e(o)("allStatus")),1)]),_:1}),a(e(c),{value:"draft"},{default:s(()=>[d(r(e(o)("draft")),1)]),_:1}),a(e(c),{value:"received"},{default:s(()=>[d(r(e(o)("received")),1)]),_:1}),a(e(c),{value:"partial"},{default:s(()=>[d(r(e(o)("partial")),1)]),_:1}),a(e(c),{value:"paid"},{default:s(()=>[d(r(e(o)("paid")),1)]),_:1}),a(e(c),{value:"overdue"},{default:s(()=>[d(r(e(o)("overdue")),1)]),_:1}),a(e(c),{value:"void"},{default:s(()=>[d(r(e(o)("void")),1)]),_:1}),a(e(c),{value:"cancelled"},{default:s(()=>[d(r(e(o)("cancelled")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),n("div",ne,[a(e(V),{modelValue:x.value,"onUpdate:modelValue":i[4]||(i[4]=t=>x.value=t),type:"date",placeholder:"From",onChange:v},null,8,["modelValue"]),a(e(V),{modelValue:$.value,"onUpdate:modelValue":i[5]||(i[5]=t=>$.value=t),type:"date",placeholder:"To",onChange:v},null,8,["modelValue"])])]),f.bills.data.length?(m(),p("div",re,[a(Y,{columns:q,data:E.value,pagination:f.bills},{"cell-bill_number":s(({value:t,row:_})=>[n("button",{onClick:O=>z(_.id),class:"font-medium text-primary hover:underline focus:outline-none focus:underline"},r(t),9,de)]),"cell-vendor":s(({value:t,row:_})=>[_.vendor_id?(m(),p("button",{key:0,onClick:O=>F(_.vendor_id),class:"text-foreground hover:text-primary hover:underline focus:outline-none focus:underline transition-colors"},r(t),9,ue)):(m(),p("span",ce,r(t),1))]),"cell-status":s(({value:t})=>[n("button",{onClick:_=>N(t),class:"inline-flex transition-opacity hover:opacity-70 focus:outline-none"},[a(e(w),{variant:U(t)},{default:s(()=>[d(r(t),1)]),_:2},1032,["variant"])],8,me)]),"mobile-card":s(({row:t})=>[n("div",{onClick:_=>z(t.id),class:"rounded-xl border border-zinc-200 bg-white p-4 shadow-sm cursor-pointer hover:shadow-md transition-shadow"},[n("div",pe,[n("div",fe,[n("div",null,[n("h3",ve,r(t.bill_number),1),t.vendor_id?(m(),p("button",{key:0,onClick:j(_=>F(t.vendor_id),["stop"]),class:"text-sm text-zinc-500 hover:text-primary hover:underline"},r(t.vendor),9,be)):(m(),p("span",ye,r(t.vendor),1))]),n("button",{onClick:j(_=>N(t.status),["stop"]),class:"transition-opacity hover:opacity-70"},[a(e(w),{variant:U(t.status)},{default:s(()=>[d(r(t.status),1)]),_:2},1032,["variant"])],8,he)]),n("div",ge,[n("div",null,[i[7]||(i[7]=n("span",{class:"text-zinc-500"},"Date:",-1)),n("span",ke,r(t.bill_date),1)]),n("div",null,[i[8]||(i[8]=n("span",{class:"text-zinc-500"},"Due:",-1)),n("span",xe,r(t.due_date),1)])]),n("div",$e,[n("div",null,[i[9]||(i[9]=n("span",{class:"text-sm text-zinc-500"},"Total:",-1)),n("span",Ve,r(t.total_amount),1)]),n("div",null,[i[10]||(i[10]=n("span",{class:"text-sm text-zinc-500"},"Balance:",-1)),n("span",Ce,r(t.balance),1)])])])],8,_e)]),_:1},8,["data","pagination"])])):(m(),p("div",ie,[a(Z,{title:e(o)("noBills"),description:e(o)("noBillsDesc"),"cta-text":e(o)("newBill"),onClick:i[6]||(i[6]=t=>e(h).get(`/${f.company.slug}/bills/create`))},null,8,["title","description","cta-text"])]))]),_:1},8,["title","icon"])],64))}});export{st as default};
