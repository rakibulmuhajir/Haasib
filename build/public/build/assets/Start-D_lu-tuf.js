import{d as B,x as C,s as A,K as R,c as _,a,u as e,h as D,w as s,b as o,e as l,y as N,j as p,o as m,F as y,r as L,i as U,t as u,f as F}from"./app-B-wLZQl0.js";import{_ as T}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as v}from"./index-D8JUok4n.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{_ as b}from"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import{_ as I,a as j,b as q,c as E,d as $}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{_ as M,a as z}from"./CardContent.vue_vue_type_script_setup_true_lang-f-xi8uWj.js";import{_ as K}from"./CardDescription.vue_vue_type_script_setup_true_lang-D23jLuEj.js";import{_ as O}from"./CardHeader.vue_vue_type_script_setup_true_lang-Cn7HWfaF.js";import{_ as W}from"./CardTitle.vue_vue_type_script_setup_true_lang-DXA8XANX.js";import{_ as Y,a as G}from"./index-BLvrLCqs.js";import{_ as H}from"./AlertTitle.vue_vue_type_script_setup_true_lang-D0SM3BAQ.js";import{I as J}from"./info-_qQ0Rbsf.js";import{L as P}from"./plus-C63jdNg7.js";import{C as Q}from"./calendar-B0yi2zLg.js";import{A as X}from"./arrow-right-WKUoSUL-.js";import{s as Z}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./loader-circle-BSwxCoSE.js";import"./createLucideIcon-CbxkoCx6.js";import"./circle-check-YKnAkXoj.js";import"./useForwardExpose-Ca12vFmR.js";import"./index-a73qSWOM.js";import"./VisuallyHidden-BZkMfMV2.js";import"./Collection-DN_gmv-a.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./check-DogY6QNG.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./nullish-CHIgUVhi.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./file-text-CFHWSPvd.js";import"./users-CkYIFvpU.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";const tt={class:"max-w-2xl"},et={class:"space-y-2"},at={class:"flex items-center gap-2"},nt={class:"text-muted-foreground"},ot={key:0,class:"text-sm text-destructive"},st={key:0,class:"rounded-lg border p-4 bg-muted/50"},rt={class:"grid gap-3 sm:grid-cols-2 text-sm"},it={class:"font-medium text-lg"},lt={class:"font-medium"},dt={key:0,class:"text-xs text-muted-foreground"},mt={class:"space-y-2"},ut={class:"relative"},ct={key:0,class:"text-sm text-destructive"},_t={class:"space-y-2"},ft={key:0,class:"text-sm text-destructive"},pt={class:"flex justify-end gap-3 pt-4 border-t"},f="__none",te=B({__name:"Start",props:{company:{},bankAccounts:{}},setup(k){const d=k,S=[{title:"Dashboard",href:`/${d.company.slug}`},{title:"Banking",href:`/${d.company.slug}/banking/accounts`},{title:"Reconciliation",href:`/${d.company.slug}/banking/reconciliation`},{title:"Start",href:`/${d.company.slug}/banking/reconciliation/start`}],n=C({bank_account_id:f,statement_date:new Date().toISOString().split("T")[0],statement_ending_balance:0}),c=A(()=>n.bank_account_id===f?null:d.bankAccounts.find(i=>i.id===n.bank_account_id)||null),g=(i,t)=>new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(i),w=i=>i?new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never";R(()=>n.bank_account_id,i=>{if(i!==f){const t=d.bankAccounts.find(r=>r.id===i);t&&(n.statement_ending_balance=t.current_balance)}});const h=()=>{n.bank_account_id!==f&&n.post(`/${d.company.slug}/banking/reconciliation`,{preserveScroll:!0})},V=()=>{F.get(`/${d.company.slug}/banking/reconciliation`)};return(i,t)=>(m(),_(y,null,[a(e(D),{title:"Start Reconciliation"}),a(T,{title:"Start Bank Reconciliation",breadcrumbs:S,icon:e(Z)},{default:s(()=>[o("div",tt,[a(e(Y),{class:"mb-6"},{default:s(()=>[a(e(J),{class:"h-4 w-4"}),a(e(H),null,{default:s(()=>[...t[3]||(t[3]=[l("What is Bank Reconciliation?",-1)])]),_:1}),a(e(G),null,{default:s(()=>[...t[4]||(t[4]=[l(" Bank reconciliation compares your recorded transactions with your bank statement to ensure your books match your actual bank balance. You'll mark transactions as cleared until the difference is zero. ",-1)])]),_:1})]),_:1}),o("form",{onSubmit:N(h,["prevent"])},[a(e(M),null,{default:s(()=>[a(e(O),null,{default:s(()=>[a(e(W),null,{default:s(()=>[...t[5]||(t[5]=[l("Reconciliation Details",-1)])]),_:1}),a(e(K),null,{default:s(()=>[...t[6]||(t[6]=[l(" Select the bank account and enter your statement information ",-1)])]),_:1})]),_:1}),a(e(z),{class:"space-y-6"},{default:s(()=>[o("div",et,[a(e(b),{for:"bank_account_id"},{default:s(()=>[...t[7]||(t[7]=[l("Bank Account *",-1)])]),_:1}),a(e(I),{modelValue:e(n).bank_account_id,"onUpdate:modelValue":t[0]||(t[0]=r=>e(n).bank_account_id=r)},{default:s(()=>[a(e(j),{id:"bank_account_id"},{default:s(()=>[a(e(q),{placeholder:"Select a bank account"})]),_:1}),a(e(E),null,{default:s(()=>[a(e($),{value:f,disabled:""},{default:s(()=>[...t[8]||(t[8]=[l("Select a bank account",-1)])]),_:1}),(m(!0),_(y,null,L(k.bankAccounts,r=>(m(),U(e($),{key:r.id,value:r.id},{default:s(()=>[o("div",at,[a(e(P),{class:"h-4 w-4"}),o("span",null,u(r.account_name),1),o("span",nt,"("+u(r.account_number)+")",1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(n).errors.bank_account_id?(m(),_("p",ot,u(e(n).errors.bank_account_id),1)):p("",!0)]),c.value?(m(),_("div",st,[t[11]||(t[11]=o("h4",{class:"font-medium mb-3"},"Account Summary",-1)),o("div",rt,[o("div",null,[t[9]||(t[9]=o("p",{class:"text-muted-foreground"},"Current Book Balance",-1)),o("p",it,u(g(c.value.current_balance,c.value.currency)),1)]),o("div",null,[t[10]||(t[10]=o("p",{class:"text-muted-foreground"},"Last Reconciled",-1)),o("p",lt,u(w(c.value.last_reconciled_date)),1),c.value.last_reconciled_balance!==null?(m(),_("p",dt," Balance: "+u(g(c.value.last_reconciled_balance,c.value.currency)),1)):p("",!0)])])])):p("",!0),o("div",mt,[a(e(b),{for:"statement_date"},{default:s(()=>[...t[12]||(t[12]=[l("Statement Date *",-1)])]),_:1}),o("div",ut,[a(e(Q),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a(e(x),{id:"statement_date",modelValue:e(n).statement_date,"onUpdate:modelValue":t[1]||(t[1]=r=>e(n).statement_date=r),type:"date",class:"pl-10",required:""},null,8,["modelValue"])]),t[13]||(t[13]=o("p",{class:"text-xs text-muted-foreground"}," The ending date shown on your bank statement ",-1)),e(n).errors.statement_date?(m(),_("p",ct,u(e(n).errors.statement_date),1)):p("",!0)]),o("div",_t,[a(e(b),{for:"statement_ending_balance"},{default:s(()=>[...t[14]||(t[14]=[l("Statement Ending Balance *",-1)])]),_:1}),a(e(x),{id:"statement_ending_balance",modelValue:e(n).statement_ending_balance,"onUpdate:modelValue":t[2]||(t[2]=r=>e(n).statement_ending_balance=r),modelModifiers:{number:!0},type:"number",step:"0.01",placeholder:"0.00",required:""},null,8,["modelValue"]),t[15]||(t[15]=o("p",{class:"text-xs text-muted-foreground"}," The ending balance shown on your bank statement for the date above ",-1)),e(n).errors.statement_ending_balance?(m(),_("p",ft,u(e(n).errors.statement_ending_balance),1)):p("",!0)]),o("div",pt,[a(e(v),{type:"button",variant:"outline",onClick:V},{default:s(()=>[...t[16]||(t[16]=[l(" Cancel ",-1)])]),_:1}),a(e(v),{type:"submit",disabled:e(n).processing||e(n).bank_account_id===f},{default:s(()=>[t[17]||(t[17]=l(" Start Reconciliation ",-1)),a(e(X),{class:"ml-2 h-4 w-4"})]),_:1},8,["disabled"])])]),_:1})]),_:1})],32)])]),_:1},8,["icon"])],64))}});export{te as default};
