import{d as te,q as ae,x as se,K as oe,s as C,c as f,a as l,u as e,h as ne,w as t,b as d,y as ue,e as n,j as w,B as K,o as r,F as y,r as $,i as c,t as p}from"./app-B-wLZQl0.js";import{_ as de}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as k}from"./index-D8JUok4n.js";import{_ as g}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{_ as M}from"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import{_ as re}from"./Textarea.vue_vue_type_script_setup_true_lang-DrbQ2zws.js";import{_ as A,a as N,b as j,c as B,d as E}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{_ as D,a as P}from"./CardContent.vue_vue_type_script_setup_true_lang-f-xi8uWj.js";import{_ as F}from"./CardDescription.vue_vue_type_script_setup_true_lang-D23jLuEj.js";import{_ as S}from"./CardHeader.vue_vue_type_script_setup_true_lang-Cn7HWfaF.js";import{_ as T}from"./CardTitle.vue_vue_type_script_setup_true_lang-DXA8XANX.js";import{_ as H,a as J,b as v,c as _,d as O,e as m}from"./TableHeader.vue_vue_type_script_setup_true_lang-r2CqmNXq.js";import{P as W}from"./plus-C63jdNg7.js";import{T as X}from"./trash-2-BxVbfljz.js";import{S as ie}from"./save-CBmuHaqJ.js";import{A as me}from"./arrow-left-DSX0n2_N.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./Collection-DN_gmv-a.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./createLucideIcon-CbxkoCx6.js";import"./check-DogY6QNG.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./file-text-CFHWSPvd.js";import"./users-CkYIFvpU.js";import"./calendar-B0yi2zLg.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";import"./loader-circle-BSwxCoSE.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./index-a73qSWOM.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./nullish-CHIgUVhi.js";const pe={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},fe={class:"lg:col-span-2 space-y-6"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ye={class:"space-y-2"},ce={key:0,class:"text-sm text-destructive"},ve={class:"space-y-2"},ge={key:0,class:"text-sm text-destructive"},Ve={class:"space-y-2"},be={class:"flex items-center justify-between"},we={class:"flex items-center justify-between"},$e={class:"space-y-6"},ke={class:"flex justify-between items-center"},xe={class:"font-medium"},Ue={class:"flex justify-between items-center"},Ce={class:"font-medium text-destructive"},De={class:"flex justify-between items-center"},Pe={class:"font-bold text-xl text-primary"},Se={class:"pt-4"},cl=te({__name:"Create",props:{company:{},employees:{},periods:{},earningTypes:{},deductionTypes:{}},setup(V){const b=V,Y=[{title:"Dashboard",href:`/${b.company.slug}`},{title:"Payslips",href:`/${b.company.slug}/payslips`},{title:"Create",href:`/${b.company.slug}/payslips/create`}],Z=ae(null),o=se({employee_id:"",payroll_period_id:"",currency:b.company.base_currency,notes:"",lines:[]});oe(()=>o.employee_id,i=>{const a=b.employees.find(s=>s.id===i);a&&(Z.value=a,o.currency=a.currency,o.lines.length===0&&(L(),o.lines[0].description="Base Salary",o.lines[0].amount=a.base_salary))});const L=()=>{o.lines.push({line_type:"earning",earning_type_id:"",deduction_type_id:"",description:"",amount:0,quantity:null,rate:null})},h=()=>{o.lines.push({line_type:"deduction",earning_type_id:"",deduction_type_id:"",description:"",amount:0,quantity:null,rate:null})},G=i=>{o.lines.splice(i,1)},I=C(()=>o.lines.filter(i=>i.line_type==="earning")),Q=C(()=>o.lines.filter(i=>i.line_type==="deduction")),q=C(()=>I.value.reduce((i,a)=>i+Number(a.amount||0),0)),z=C(()=>Q.value.reduce((i,a)=>i+Number(a.amount||0),0)),ee=C(()=>q.value-z.value),x=(i,a)=>new Intl.NumberFormat("en-US",{style:"currency",currency:a||"USD"}).format(i),R=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),le=()=>{o.post(`/${b.company.slug}/payslips`)};return(i,a)=>(r(),f(y,null,[l(e(ne),{title:"Create Payslip"}),l(de,{title:"Create Payslip",breadcrumbs:Y},{actions:t(()=>[l(e(k),{variant:"outline",onClick:a[0]||(a[0]=s=>i.$inertia.get(`/${V.company.slug}/payslips`))},{default:t(()=>[l(e(me),{class:"mr-2 h-4 w-4"}),a[5]||(a[5]=n(" Back ",-1))]),_:1})]),default:t(()=>[d("form",{onSubmit:ue(le,["prevent"]),class:"space-y-6"},[d("div",pe,[d("div",fe,[l(e(D),null,{default:t(()=>[l(e(S),null,{default:t(()=>[l(e(T),null,{default:t(()=>[...a[6]||(a[6]=[n("Payslip Information",-1)])]),_:1}),l(e(F),null,{default:t(()=>[...a[7]||(a[7]=[n("Select the employee and payroll period",-1)])]),_:1})]),_:1}),l(e(P),{class:"space-y-4"},{default:t(()=>[d("div",_e,[d("div",ye,[l(e(M),{for:"employee"},{default:t(()=>[...a[8]||(a[8]=[n("Employee *",-1)])]),_:1}),l(e(A),{modelValue:e(o).employee_id,"onUpdate:modelValue":a[1]||(a[1]=s=>e(o).employee_id=s)},{default:t(()=>[l(e(N),{class:K({"border-destructive":e(o).errors.employee_id})},{default:t(()=>[l(e(j),{placeholder:"Select employee"})]),_:1},8,["class"]),l(e(B),null,{default:t(()=>[(r(!0),f(y,null,$(V.employees,s=>(r(),c(e(E),{key:s.id,value:s.id},{default:t(()=>[n(p(s.first_name)+" "+p(s.last_name)+" ("+p(s.employee_number)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(o).errors.employee_id?(r(),f("p",ce,p(e(o).errors.employee_id),1)):w("",!0)]),d("div",ve,[l(e(M),{for:"period"},{default:t(()=>[...a[9]||(a[9]=[n("Payroll Period *",-1)])]),_:1}),l(e(A),{modelValue:e(o).payroll_period_id,"onUpdate:modelValue":a[2]||(a[2]=s=>e(o).payroll_period_id=s)},{default:t(()=>[l(e(N),{class:K({"border-destructive":e(o).errors.payroll_period_id})},{default:t(()=>[l(e(j),{placeholder:"Select period"})]),_:1},8,["class"]),l(e(B),null,{default:t(()=>[(r(!0),f(y,null,$(V.periods,s=>(r(),c(e(E),{key:s.id,value:s.id},{default:t(()=>[n(p(R(s.period_start))+" - "+p(R(s.period_end)),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(o).errors.payroll_period_id?(r(),f("p",ge,p(e(o).errors.payroll_period_id),1)):w("",!0)])]),d("div",Ve,[l(e(M),{for:"currency"},{default:t(()=>[...a[10]||(a[10]=[n("Currency",-1)])]),_:1}),l(e(g),{id:"currency",modelValue:e(o).currency,"onUpdate:modelValue":a[3]||(a[3]=s=>e(o).currency=s),maxlength:"3",readonly:"",class:"w-24"},null,8,["modelValue"])])]),_:1})]),_:1}),l(e(D),null,{default:t(()=>[l(e(S),null,{default:t(()=>[d("div",be,[d("div",null,[l(e(T),null,{default:t(()=>[...a[11]||(a[11]=[n("Earnings",-1)])]),_:1}),l(e(F),null,{default:t(()=>[...a[12]||(a[12]=[n("Add earnings for this payslip",-1)])]),_:1})]),l(e(k),{type:"button",variant:"outline",size:"sm",onClick:L},{default:t(()=>[l(e(W),{class:"mr-2 h-4 w-4"}),a[13]||(a[13]=n(" Add Earning ",-1))]),_:1})])]),_:1}),l(e(P),null,{default:t(()=>[l(e(H),null,{default:t(()=>[l(e(J),null,{default:t(()=>[l(e(v),null,{default:t(()=>[l(e(_),null,{default:t(()=>[...a[14]||(a[14]=[n("Type",-1)])]),_:1}),l(e(_),null,{default:t(()=>[...a[15]||(a[15]=[n("Description",-1)])]),_:1}),l(e(_),{class:"w-28"},{default:t(()=>[...a[16]||(a[16]=[n("Qty",-1)])]),_:1}),l(e(_),{class:"w-28"},{default:t(()=>[...a[17]||(a[17]=[n("Rate",-1)])]),_:1}),l(e(_),{class:"w-32"},{default:t(()=>[...a[18]||(a[18]=[n("Amount",-1)])]),_:1}),l(e(_),{class:"w-12"})]),_:1})]),_:1}),l(e(O),null,{default:t(()=>[(r(!0),f(y,null,$(e(o).lines,(s,U)=>(r(),f(y,{key:U},[s.line_type==="earning"?(r(),c(e(v),{key:0},{default:t(()=>[l(e(m),null,{default:t(()=>[l(e(A),{modelValue:s.earning_type_id,"onUpdate:modelValue":u=>s.earning_type_id=u},{default:t(()=>[l(e(N),{class:"w-32"},{default:t(()=>[l(e(j),{placeholder:"Type"})]),_:1}),l(e(B),null,{default:t(()=>[(r(!0),f(y,null,$(V.earningTypes,u=>(r(),c(e(E),{key:u.id,value:u.id},{default:t(()=>[n(p(u.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(e(m),null,{default:t(()=>[l(e(g),{modelValue:s.description,"onUpdate:modelValue":u=>s.description=u,placeholder:"Description"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(e(m),null,{default:t(()=>[l(e(g),{modelValue:s.quantity,"onUpdate:modelValue":u=>s.quantity=u,modelModifiers:{number:!0},type:"number",step:"0.01",placeholder:"Qty"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(e(m),null,{default:t(()=>[l(e(g),{modelValue:s.rate,"onUpdate:modelValue":u=>s.rate=u,modelModifiers:{number:!0},type:"number",step:"0.01",placeholder:"Rate"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(e(m),null,{default:t(()=>[l(e(g),{modelValue:s.amount,"onUpdate:modelValue":u=>s.amount=u,modelModifiers:{number:!0},type:"number",step:"0.01",min:"0"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(e(m),null,{default:t(()=>[l(e(k),{type:"button",variant:"ghost",size:"icon",class:"h-8 w-8 text-destructive",onClick:u=>G(U)},{default:t(()=>[l(e(X),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)):w("",!0)],64))),128)),I.value.length===0?(r(),c(e(v),{key:0},{default:t(()=>[l(e(m),{colspan:"6",class:"text-center text-muted-foreground"},{default:t(()=>[...a[19]||(a[19]=[n(' No earnings added. Click "Add Earning" to start. ',-1)])]),_:1})]),_:1})):w("",!0),l(e(v),{class:"font-bold bg-muted/50"},{default:t(()=>[l(e(m),{colspan:"4"},{default:t(()=>[...a[20]||(a[20]=[n("Gross Pay",-1)])]),_:1}),l(e(m),{colspan:"2"},{default:t(()=>[n(p(x(q.value,e(o).currency)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(e(D),null,{default:t(()=>[l(e(S),null,{default:t(()=>[d("div",we,[d("div",null,[l(e(T),null,{default:t(()=>[...a[21]||(a[21]=[n("Deductions",-1)])]),_:1}),l(e(F),null,{default:t(()=>[...a[22]||(a[22]=[n("Add deductions for this payslip",-1)])]),_:1})]),l(e(k),{type:"button",variant:"outline",size:"sm",onClick:h},{default:t(()=>[l(e(W),{class:"mr-2 h-4 w-4"}),a[23]||(a[23]=n(" Add Deduction ",-1))]),_:1})])]),_:1}),l(e(P),null,{default:t(()=>[l(e(H),null,{default:t(()=>[l(e(J),null,{default:t(()=>[l(e(v),null,{default:t(()=>[l(e(_),null,{default:t(()=>[...a[24]||(a[24]=[n("Type",-1)])]),_:1}),l(e(_),null,{default:t(()=>[...a[25]||(a[25]=[n("Description",-1)])]),_:1}),l(e(_),{class:"w-32"},{default:t(()=>[...a[26]||(a[26]=[n("Amount",-1)])]),_:1}),l(e(_),{class:"w-12"})]),_:1})]),_:1}),l(e(O),null,{default:t(()=>[(r(!0),f(y,null,$(e(o).lines,(s,U)=>(r(),f(y,{key:U},[s.line_type==="deduction"?(r(),c(e(v),{key:0},{default:t(()=>[l(e(m),null,{default:t(()=>[l(e(A),{modelValue:s.deduction_type_id,"onUpdate:modelValue":u=>s.deduction_type_id=u},{default:t(()=>[l(e(N),{class:"w-32"},{default:t(()=>[l(e(j),{placeholder:"Type"})]),_:1}),l(e(B),null,{default:t(()=>[(r(!0),f(y,null,$(V.deductionTypes,u=>(r(),c(e(E),{key:u.id,value:u.id},{default:t(()=>[n(p(u.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(e(m),null,{default:t(()=>[l(e(g),{modelValue:s.description,"onUpdate:modelValue":u=>s.description=u,placeholder:"Description"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(e(m),null,{default:t(()=>[l(e(g),{modelValue:s.amount,"onUpdate:modelValue":u=>s.amount=u,modelModifiers:{number:!0},type:"number",step:"0.01",min:"0"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(e(m),null,{default:t(()=>[l(e(k),{type:"button",variant:"ghost",size:"icon",class:"h-8 w-8 text-destructive",onClick:u=>G(U)},{default:t(()=>[l(e(X),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)):w("",!0)],64))),128)),Q.value.length===0?(r(),c(e(v),{key:0},{default:t(()=>[l(e(m),{colspan:"4",class:"text-center text-muted-foreground"},{default:t(()=>[...a[27]||(a[27]=[n(' No deductions added. Click "Add Deduction" to start. ',-1)])]),_:1})]),_:1})):w("",!0),l(e(v),{class:"font-bold bg-muted/50"},{default:t(()=>[l(e(m),{colspan:"2"},{default:t(()=>[...a[28]||(a[28]=[n("Total Deductions",-1)])]),_:1}),l(e(m),{colspan:"2",class:"text-destructive"},{default:t(()=>[n(" -"+p(x(z.value,e(o).currency)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(e(D),null,{default:t(()=>[l(e(S),null,{default:t(()=>[l(e(T),null,{default:t(()=>[...a[29]||(a[29]=[n("Notes",-1)])]),_:1})]),_:1}),l(e(P),null,{default:t(()=>[l(e(re),{modelValue:e(o).notes,"onUpdate:modelValue":a[4]||(a[4]=s=>e(o).notes=s),placeholder:"Any additional notes...",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1})]),d("div",$e,[l(e(D),{class:"sticky top-6"},{default:t(()=>[l(e(S),null,{default:t(()=>[l(e(T),null,{default:t(()=>[...a[30]||(a[30]=[n("Pay Summary",-1)])]),_:1})]),_:1}),l(e(P),{class:"space-y-4"},{default:t(()=>[d("div",ke,[a[31]||(a[31]=d("span",{class:"text-muted-foreground"},"Gross Pay",-1)),d("span",xe,p(x(q.value,e(o).currency)),1)]),d("div",Ue,[a[32]||(a[32]=d("span",{class:"text-muted-foreground"},"Deductions",-1)),d("span",Ce," -"+p(x(z.value,e(o).currency)),1)]),a[34]||(a[34]=d("hr",null,null,-1)),d("div",De,[a[33]||(a[33]=d("span",{class:"font-semibold"},"Net Pay",-1)),d("span",Pe,p(x(ee.value,e(o).currency)),1)]),d("div",Se,[l(e(k),{type:"submit",class:"w-full",disabled:e(o).processing},{default:t(()=>[l(e(ie),{class:"mr-2 h-4 w-4"}),n(" "+p(e(o).processing?"Creating...":"Create Payslip"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})])])],32)]),_:1})],64))}});export{cl as default};
