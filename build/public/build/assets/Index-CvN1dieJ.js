import{d as M,q as V,c as _,a,u as e,h as O,w as l,j as G,b as m,e as s,o as u,F as y,r as B,i as $,t as d,y as v,f}from"./app-B-wLZQl0.js";import{_ as H}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as g}from"./index-D8JUok4n.js";import{_ as E}from"./index-a73qSWOM.js";import{_ as P,a as S}from"./CardContent.vue_vue_type_script_setup_true_lang-f-xi8uWj.js";import{_ as J}from"./Checkbox.vue_vue_type_script_setup_true_lang-yNvHsWJi.js";import{_ as D}from"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import{_ as K,a as Q,b as X,c as Y,d as R}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{_ as Z,a as h,b as j,c,d as tt,e as p}from"./TableHeader.vue_vue_type_script_setup_true_lang-r2CqmNXq.js";import{W as F,b as et,c as at,d as lt,e as C}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import{C as I}from"./circle-plus-Cwyhw5NW.js";import{L as nt}from"./plus-C63jdNg7.js";import{E as st}from"./ellipsis-DRk1q4ie.js";import{E as it}from"./eye-pMepw5BK.js";import{P as ot}from"./pencil-R0Fiz8Cs.js";import{T as rt}from"./trash-2-BxVbfljz.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./loader-circle-BSwxCoSE.js";import"./createLucideIcon-CbxkoCx6.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./nullish-CHIgUVhi.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./Collection-DN_gmv-a.js";import"./RovingFocusItem-PDr5bOed.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";import"./check-DogY6QNG.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./building-2-DLYGST8U.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./file-text-CFHWSPvd.js";import"./users-CkYIFvpU.js";import"./calendar-B0yi2zLg.js";const ut={class:"flex flex-wrap gap-4 items-end"},dt={class:"space-y-2 min-w-[200px]"},mt={class:"flex items-center gap-2"},ft={key:0,class:"text-center py-12 text-muted-foreground"},ct={class:"font-medium"},pt={key:0,class:"flex items-center gap-2"},_t={key:0,class:"mt-6 flex justify-center gap-2"},gt={class:"flex items-center px-4 text-sm text-muted-foreground"},L="__all",ae=M({__name:"Index",props:{company:{},rules:{},bankAccounts:{},filters:{}},setup(o){const r=o,T=[{title:"Dashboard",href:`/${r.company.slug}`},{title:"Banking",href:`/${r.company.slug}/banking/accounts`},{title:"Rules",href:`/${r.company.slug}/banking/rules`}],k=V(r.filters.bank_account_id||"__all"),b=V(r.filters.include_inactive),w=()=>{f.get(`/${r.company.slug}/banking/rules`,{bank_account_id:k.value===L?"":k.value,include_inactive:b.value},{preserveState:!0})},A=()=>{f.get(`/${r.company.slug}/banking/rules/create`)},N=i=>{f.get(`/${r.company.slug}/banking/rules/${i}`)},z=i=>{f.get(`/${r.company.slug}/banking/rules/${i}/edit`)},U=i=>{confirm(`Delete rule "${i.name}"?`)&&f.delete(`/${r.company.slug}/banking/rules/${i.id}`)},W=i=>{if(!i||i.length===0)return"No conditions";if(i.length===1){const t=i[0];return`${t.field} ${t.operator} "${t.value}"`}return`${i.length} conditions`},q=i=>{if(!i)return"No actions";const t=Object.keys(i).filter(n=>i[n]);return t.length===0?"No actions":t.length===1?`Set ${t[0].replace("set_","").replace("_"," ")}`:`${t.length} actions`};return(i,t)=>(u(),_(y,null,[a(e(O),{title:"Bank Rules"}),a(H,{title:"Bank Rules",breadcrumbs:T,icon:e(F)},{actions:l(()=>[a(e(g),{onClick:A},{default:l(()=>[a(e(I),{class:"mr-2 h-4 w-4"}),t[5]||(t[5]=s(" Create Rule ",-1))]),_:1})]),default:l(()=>[a(e(P),{class:"mb-6"},{default:l(()=>[a(e(S),{class:"pt-6"},{default:l(()=>[m("div",ut,[m("div",dt,[a(e(D),null,{default:l(()=>[...t[6]||(t[6]=[s("Bank Account",-1)])]),_:1}),a(e(K),{modelValue:k.value,"onUpdate:modelValue":[t[0]||(t[0]=n=>k.value=n),w]},{default:l(()=>[a(e(Q),null,{default:l(()=>[a(e(X),{placeholder:"All accounts"})]),_:1}),a(e(Y),null,{default:l(()=>[a(e(R),{value:L},{default:l(()=>[...t[7]||(t[7]=[s("All accounts",-1)])]),_:1}),(u(!0),_(y,null,B(o.bankAccounts,n=>(u(),$(e(R),{key:n.id,value:n.id},{default:l(()=>[s(d(n.account_name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),m("div",mt,[a(e(J),{id:"include-inactive",checked:b.value,"onUpdate:checked":t[1]||(t[1]=n=>{b.value=n,w()})},null,8,["checked"]),a(e(D),{for:"include-inactive",class:"text-sm cursor-pointer"},{default:l(()=>[...t[8]||(t[8]=[s("Show inactive",-1)])]),_:1})])])]),_:1})]),_:1}),a(e(P),null,{default:l(()=>[a(e(S),{class:"pt-6"},{default:l(()=>[o.rules.data.length===0?(u(),_("div",ft,[a(e(F),{class:"mx-auto h-12 w-12 mb-4 opacity-50"}),t[10]||(t[10]=m("p",{class:"text-lg font-medium"},"No rules found",-1)),t[11]||(t[11]=m("p",{class:"text-sm mb-4"},"Create rules to automatically categorize transactions",-1)),a(e(g),{onClick:A},{default:l(()=>[a(e(I),{class:"mr-2 h-4 w-4"}),t[9]||(t[9]=s(" Create Rule ",-1))]),_:1})])):(u(),$(e(Z),{key:1},{default:l(()=>[a(e(h),null,{default:l(()=>[a(e(j),null,{default:l(()=>[a(e(c),{class:"w-16"},{default:l(()=>[...t[12]||(t[12]=[s("Priority",-1)])]),_:1}),a(e(c),null,{default:l(()=>[...t[13]||(t[13]=[s("Name",-1)])]),_:1}),a(e(c),null,{default:l(()=>[...t[14]||(t[14]=[s("Bank Account",-1)])]),_:1}),a(e(c),null,{default:l(()=>[...t[15]||(t[15]=[s("Conditions",-1)])]),_:1}),a(e(c),null,{default:l(()=>[...t[16]||(t[16]=[s("Actions",-1)])]),_:1}),a(e(c),null,{default:l(()=>[...t[17]||(t[17]=[s("Status",-1)])]),_:1}),a(e(c),{class:"text-right"},{default:l(()=>[...t[18]||(t[18]=[s("Actions",-1)])]),_:1})]),_:1})]),_:1}),a(e(tt),null,{default:l(()=>[(u(!0),_(y,null,B(o.rules.data,n=>(u(),$(e(j),{key:n.id,class:"cursor-pointer hover:bg-muted/50",onClick:x=>N(n.id)},{default:l(()=>[a(e(p),{class:"font-mono text-sm"},{default:l(()=>[s(d(n.priority),1)]),_:2},1024),a(e(p),null,{default:l(()=>[m("p",ct,d(n.name),1)]),_:2},1024),a(e(p),null,{default:l(()=>[n.bank_account?(u(),_("div",pt,[a(e(nt),{class:"h-4 w-4 text-muted-foreground"}),m("span",null,d(n.bank_account.account_name),1)])):(u(),$(e(E),{key:1,variant:"outline"},{default:l(()=>[...t[19]||(t[19]=[s("All accounts",-1)])]),_:1}))]),_:2},1024),a(e(p),{class:"text-sm text-muted-foreground"},{default:l(()=>[s(d(W(n.conditions)),1)]),_:2},1024),a(e(p),{class:"text-sm text-muted-foreground"},{default:l(()=>[s(d(q(n.actions)),1)]),_:2},1024),a(e(p),null,{default:l(()=>[a(e(E),{variant:n.is_active?"default":"secondary"},{default:l(()=>[s(d(n.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),_:2},1024),a(e(p),{class:"text-right"},{default:l(()=>[a(e(et),null,{default:l(()=>[a(e(at),{"as-child":"",onClick:t[2]||(t[2]=v(()=>{},["stop"]))},{default:l(()=>[a(e(g),{variant:"ghost",size:"icon"},{default:l(()=>[a(e(st),{class:"h-4 w-4"})]),_:1})]),_:1}),a(e(lt),{align:"end"},{default:l(()=>[a(e(C),{onClick:v(x=>N(n.id),["stop"])},{default:l(()=>[a(e(it),{class:"mr-2 h-4 w-4"}),t[20]||(t[20]=s(" View ",-1))]),_:1},8,["onClick"]),a(e(C),{onClick:v(x=>z(n.id),["stop"])},{default:l(()=>[a(e(ot),{class:"mr-2 h-4 w-4"}),t[21]||(t[21]=s(" Edit ",-1))]),_:1},8,["onClick"]),a(e(C),{onClick:v(x=>U(n),["stop"]),class:"text-destructive"},{default:l(()=>[a(e(rt),{class:"mr-2 h-4 w-4"}),t[22]||(t[22]=s(" Delete ",-1))]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}))]),_:1})]),_:1}),o.rules.last_page>1?(u(),_("div",_t,[a(e(g),{variant:"outline",disabled:o.rules.current_page===1,onClick:t[3]||(t[3]=n=>e(f).get(`/${o.company.slug}/banking/rules`,{page:o.rules.current_page-1,...o.filters}))},{default:l(()=>[...t[23]||(t[23]=[s(" Previous ",-1)])]),_:1},8,["disabled"]),m("span",gt," Page "+d(o.rules.current_page)+" of "+d(o.rules.last_page),1),a(e(g),{variant:"outline",disabled:o.rules.current_page===o.rules.last_page,onClick:t[4]||(t[4]=n=>e(f).get(`/${o.company.slug}/banking/rules`,{page:o.rules.current_page+1,...o.filters}))},{default:l(()=>[...t[24]||(t[24]=[s(" Next ",-1)])]),_:1},8,["disabled"])])):G("",!0)]),_:1},8,["icon"])],64))}});export{ae as default};
