import{d as S,c as d,a as s,u as n,h as T,w as a,b as e,e as c,o as i,F as p,r as $,t as u,i as g,j as _,f as A}from"./app-B-wLZQl0.js";import{_ as V}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as D}from"./index-D8JUok4n.js";import{_ as y}from"./index-a73qSWOM.js";import{_ as x,a as b}from"./CardContent.vue_vue_type_script_setup_true_lang-f-xi8uWj.js";import{_ as k}from"./CardHeader.vue_vue_type_script_setup_true_lang-Cn7HWfaF.js";import{_ as v}from"./CardTitle.vue_vue_type_script_setup_true_lang-DXA8XANX.js";import{A as O}from"./arrow-right-WKUoSUL-.js";import{L as P}from"./plus-C63jdNg7.js";import{P as U}from"./pencil-R0Fiz8Cs.js";import{T as j}from"./trash-2-BxVbfljz.js";import{W as R}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./loader-circle-BSwxCoSE.js";import"./createLucideIcon-CbxkoCx6.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./Collection-DN_gmv-a.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./check-DogY6QNG.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./file-text-CFHWSPvd.js";import"./users-CkYIFvpU.js";import"./calendar-B0yi2zLg.js";import"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";const W={class:"flex gap-2"},I={class:"grid gap-6 lg:grid-cols-3"},q={class:"lg:col-span-2 space-y-6"},z={key:0,class:"text-muted-foreground"},G={key:1,class:"space-y-3"},H={class:"font-medium"},J={class:"text-muted-foreground"},K={class:"font-mono bg-background px-2 py-1 rounded"},M={key:0,class:"text-muted-foreground"},Q={key:1,class:"space-y-3"},X={class:"font-medium"},Y={class:"font-mono bg-background px-2 py-1 rounded"},Z={class:"space-y-6"},tt={class:"font-medium font-mono"},et={key:0,class:"flex items-center gap-2 mt-1"},nt={class:"pt-4 border-t"},ot={class:"font-medium"},st={key:0,class:"text-xs text-muted-foreground"},at={class:"font-medium"},jt=S({__name:"Show",props:{company:{},rule:{},glAccounts:{},conditionFields:{},conditionOperators:{},actionTypes:{},canEdit:{type:Boolean},canDelete:{type:Boolean}},setup(o){const l=o,w=[{title:"Dashboard",href:`/${l.company.slug}`},{title:"Banking",href:`/${l.company.slug}/banking/accounts`},{title:"Rules",href:`/${l.company.slug}/banking/rules`},{title:l.rule.name,href:`/${l.company.slug}/banking/rules/${l.rule.id}`}],h=r=>r?new Date(r).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}):"—",B=r=>l.conditionFields.find(t=>t.value===r)?.label||r,C=r=>l.conditionOperators.find(t=>t.value===r)?.label||r,L=r=>l.actionTypes.find(t=>t.value===r)?.label||r.replace("set_","").replace("_"," "),N=(r,t)=>{if(r==="set_gl_account_id"&&l.glAccounts[t]){const m=l.glAccounts[t];return`${m.code} — ${m.name}`}return r==="set_transaction_type"?t.charAt(0).toUpperCase()+t.slice(1):t},E=()=>{A.get(`/${l.company.slug}/banking/rules/${l.rule.id}/edit`)},F=()=>{confirm(`Delete rule "${l.rule.name}"?`)&&A.delete(`/${l.company.slug}/banking/rules/${l.rule.id}`)};return(r,t)=>(i(),d(p,null,[s(n(T),{title:o.rule.name},null,8,["title"]),s(V,{title:o.rule.name,breadcrumbs:w,icon:n(R)},{actions:a(()=>[e("div",W,[o.canEdit?(i(),g(n(D),{key:0,variant:"outline",onClick:E},{default:a(()=>[s(n(U),{class:"mr-2 h-4 w-4"}),t[0]||(t[0]=c(" Edit ",-1))]),_:1})):_("",!0),o.canDelete?(i(),g(n(D),{key:1,variant:"destructive",onClick:F},{default:a(()=>[s(n(j),{class:"mr-2 h-4 w-4"}),t[1]||(t[1]=c(" Delete ",-1))]),_:1})):_("",!0)])]),default:a(()=>[e("div",I,[e("div",q,[s(n(x),null,{default:a(()=>[s(n(k),null,{default:a(()=>[s(n(v),null,{default:a(()=>[...t[2]||(t[2]=[c("Conditions",-1)])]),_:1})]),_:1}),s(n(b),null,{default:a(()=>[!o.rule.conditions||o.rule.conditions.length===0?(i(),d("div",z," No conditions defined ")):(i(),d("div",G,[(i(!0),d(p,null,$(o.rule.conditions,(m,f)=>(i(),d("div",{key:f,class:"flex items-center gap-3 p-3 rounded-lg bg-muted/50"},[s(n(y),{variant:"outline"},{default:a(()=>[c(u(f+1),1)]),_:2},1024),e("span",H,u(B(m.field)),1),e("span",J,u(C(m.operator)),1),e("span",K,'"'+u(m.value)+'"',1)]))),128)),t[3]||(t[3]=e("p",{class:"text-xs text-muted-foreground mt-2"}," All conditions must match for the rule to apply ",-1))]))]),_:1})]),_:1}),s(n(x),null,{default:a(()=>[s(n(k),null,{default:a(()=>[s(n(v),null,{default:a(()=>[...t[4]||(t[4]=[c("Actions",-1)])]),_:1})]),_:1}),s(n(b),null,{default:a(()=>[!o.rule.actions||Object.keys(o.rule.actions).length===0?(i(),d("div",M," No actions defined ")):(i(),d("div",Q,[(i(!0),d(p,null,$(o.rule.actions,(m,f)=>(i(),d("div",{key:f,class:"flex items-center gap-3 p-3 rounded-lg bg-muted/50"},[e("span",X,u(L(f)),1),s(n(O),{class:"h-4 w-4 text-muted-foreground"}),e("span",Y,u(N(f,m)),1)]))),128))]))]),_:1})]),_:1})]),e("div",Z,[s(n(x),null,{default:a(()=>[s(n(k),null,{default:a(()=>[s(n(v),null,{default:a(()=>[...t[5]||(t[5]=[c("Details",-1)])]),_:1})]),_:1}),s(n(b),{class:"space-y-4"},{default:a(()=>[e("div",null,[t[6]||(t[6]=e("p",{class:"text-sm text-muted-foreground"},"Status",-1)),s(n(y),{variant:o.rule.is_active?"default":"secondary",class:"mt-1"},{default:a(()=>[c(u(o.rule.is_active?"Active":"Inactive"),1)]),_:1},8,["variant"])]),e("div",null,[t[7]||(t[7]=e("p",{class:"text-sm text-muted-foreground"},"Priority",-1)),e("p",tt,u(o.rule.priority),1)]),e("div",null,[t[9]||(t[9]=e("p",{class:"text-sm text-muted-foreground"},"Bank Account",-1)),o.rule.bank_account?(i(),d("div",et,[s(n(P),{class:"h-4 w-4 text-muted-foreground"}),e("span",null,u(o.rule.bank_account.account_name),1)])):(i(),g(n(y),{key:1,variant:"outline",class:"mt-1"},{default:a(()=>[...t[8]||(t[8]=[c("All accounts",-1)])]),_:1}))]),e("div",nt,[t[10]||(t[10]=e("p",{class:"text-sm text-muted-foreground"},"Created",-1)),e("p",ot,u(h(o.rule.created_at)),1),o.rule.created_by_user?(i(),d("p",st," by "+u(o.rule.created_by_user.name),1)):_("",!0)]),e("div",null,[t[11]||(t[11]=e("p",{class:"text-sm text-muted-foreground"},"Updated",-1)),e("p",at,u(h(o.rule.updated_at)),1)])]),_:1})]),_:1})])])]),_:1},8,["title","icon"])],64))}});export{jt as default};
