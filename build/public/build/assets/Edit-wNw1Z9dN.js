import{d as I,x as M,c,a as t,u as e,h as j,w as a,b as d,y as G,i as y,j as p,o as i,e as s,t as _,F as v,r as V,f as O}from"./app-B-wLZQl0.js";import{_ as R}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as N}from"./index-D8JUok4n.js";import{_ as f}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{_ as r}from"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import{_ as h}from"./Textarea.vue_vue_type_script_setup_true_lang-DrbQ2zws.js";import{_ as L}from"./Checkbox.vue_vue_type_script_setup_true_lang-yNvHsWJi.js";import{_ as A,a as $,b as x,c as U,d as g}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{_ as w,a as B}from"./CardContent.vue_vue_type_script_setup_true_lang-f-xi8uWj.js";import{_ as C}from"./CardDescription.vue_vue_type_script_setup_true_lang-D23jLuEj.js";import{_ as S}from"./CardHeader.vue_vue_type_script_setup_true_lang-Cn7HWfaF.js";import{_ as T}from"./CardTitle.vue_vue_type_script_setup_true_lang-DXA8XANX.js";import{_ as q,a as H}from"./index-BLvrLCqs.js";import{T as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import{X as W}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import{S as X}from"./save-CBmuHaqJ.js";import{L as z}from"./plus-C63jdNg7.js";import"./index-a73qSWOM.js";import"./useForwardExpose-Ca12vFmR.js";import"./createLucideIcon-CbxkoCx6.js";import"./VisuallyHidden-BZkMfMV2.js";import"./nullish-CHIgUVhi.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./Collection-DN_gmv-a.js";import"./RovingFocusItem-PDr5bOed.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";import"./check-DogY6QNG.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./loader-circle-BSwxCoSE.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./building-2-DLYGST8U.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./file-text-CFHWSPvd.js";import"./users-CkYIFvpU.js";import"./calendar-B0yi2zLg.js";const K={class:"grid gap-4 md:grid-cols-2"},P={class:"space-y-2"},Q={key:0,class:"text-sm text-destructive"},Y={class:"space-y-2"},Z={key:0,class:"text-sm text-destructive"},ee={class:"space-y-2"},ne={key:0,class:"text-sm text-destructive"},te={class:"space-y-2"},ae={key:0,class:"text-muted-foreground"},oe={key:0,class:"text-xs text-muted-foreground"},le={key:1,class:"text-sm text-destructive"},se={class:"space-y-2"},ue={class:"space-y-2"},de={class:"grid gap-4 md:grid-cols-2"},ie={class:"space-y-2"},re={key:0,class:"text-sm text-destructive"},ce={class:"space-y-2"},me={class:"space-y-2"},_e={class:"space-y-2"},pe={class:"space-y-2"},fe={class:"grid gap-4 md:grid-cols-2"},be={class:"space-y-2"},ye={class:"space-y-2"},ge={class:"flex items-center gap-3"},ke={class:"flex items-center gap-3"},ve={class:"space-y-2"},Ve={class:"flex justify-end gap-3"},k="__none",dn=I({__name:"Edit",props:{company:{},bankAccount:{},banks:{},currencies:{},glAccounts:{},accountTypes:{},hasTransactions:{type:Boolean}},setup(m){const u=m,D=[{title:"Dashboard",href:`/${u.company.slug}`},{title:"Banking",href:`/${u.company.slug}/banking/accounts`},{title:u.bankAccount.account_name,href:`/${u.company.slug}/banking/accounts/${u.bankAccount.id}`},{title:"Edit",href:`/${u.company.slug}/banking/accounts/${u.bankAccount.id}/edit`}],l=M({account_name:u.bankAccount.account_name,account_number:u.bankAccount.account_number,account_type:u.bankAccount.account_type,currency:u.bankAccount.currency,bank_id:u.bankAccount.bank_id||k,gl_account_id:u.bankAccount.gl_account_id||k,iban:u.bankAccount.iban||"",swift_code:u.bankAccount.swift_code||"",routing_number:u.bankAccount.routing_number||"",branch_name:u.bankAccount.branch_name||"",branch_address:u.bankAccount.branch_address||"",opening_balance:u.bankAccount.opening_balance,opening_balance_date:u.bankAccount.opening_balance_date||"",is_primary:u.bankAccount.is_primary,is_active:u.bankAccount.is_active,notes:u.bankAccount.notes||""}),E=()=>{l.transform(b=>({...b,bank_id:b.bank_id===k?null:b.bank_id,gl_account_id:b.gl_account_id===k?null:b.gl_account_id})).put(`/${u.company.slug}/banking/accounts/${u.bankAccount.id}`,{preserveScroll:!0})},F=()=>{O.get(`/${u.company.slug}/banking/accounts/${u.bankAccount.id}`)};return(b,n)=>(i(),c(v,null,[t(e(j),{title:`Edit ${m.bankAccount.account_name}`},null,8,["title"]),t(R,{title:`Edit ${m.bankAccount.account_name}`,breadcrumbs:D,icon:e(z)},{default:a(()=>[d("form",{class:"space-y-6 max-w-3xl",onSubmit:G(E,["prevent"])},[m.hasTransactions?(i(),y(e(q),{key:0,variant:"warning"},{default:a(()=>[t(e(J),{class:"h-4 w-4"}),t(e(H),null,{default:a(()=>[...n[16]||(n[16]=[s(" This account has transactions. Currency and opening balance cannot be changed. ",-1)])]),_:1})]),_:1})):p("",!0),t(e(w),null,{default:a(()=>[t(e(S),null,{default:a(()=>[t(e(T),null,{default:a(()=>[...n[17]||(n[17]=[s("Account Details",-1)])]),_:1}),t(e(C),null,{default:a(()=>[...n[18]||(n[18]=[s("Update the basic information for this bank account",-1)])]),_:1})]),_:1}),t(e(B),{class:"space-y-4"},{default:a(()=>[d("div",K,[d("div",P,[t(e(r),{for:"account_name"},{default:a(()=>[...n[19]||(n[19]=[s("Account Name *",-1)])]),_:1}),t(e(f),{id:"account_name",modelValue:e(l).account_name,"onUpdate:modelValue":n[0]||(n[0]=o=>e(l).account_name=o),placeholder:"e.g., Main Business Checking",required:""},null,8,["modelValue"]),e(l).errors.account_name?(i(),c("p",Q,_(e(l).errors.account_name),1)):p("",!0)]),d("div",Y,[t(e(r),{for:"account_number"},{default:a(()=>[...n[20]||(n[20]=[s("Account Number *",-1)])]),_:1}),t(e(f),{id:"account_number",modelValue:e(l).account_number,"onUpdate:modelValue":n[1]||(n[1]=o=>e(l).account_number=o),placeholder:"e.g., 1234567890",required:""},null,8,["modelValue"]),e(l).errors.account_number?(i(),c("p",Z,_(e(l).errors.account_number),1)):p("",!0)]),d("div",ee,[t(e(r),{for:"account_type"},{default:a(()=>[...n[21]||(n[21]=[s("Account Type *",-1)])]),_:1}),t(e(A),{modelValue:e(l).account_type,"onUpdate:modelValue":n[2]||(n[2]=o=>e(l).account_type=o)},{default:a(()=>[t(e($),{id:"account_type"},{default:a(()=>[t(e(x),{placeholder:"Select type"})]),_:1}),t(e(U),null,{default:a(()=>[(i(!0),c(v,null,V(m.accountTypes,o=>(i(),y(e(g),{key:o.value,value:o.value},{default:a(()=>[s(_(o.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(l).errors.account_type?(i(),c("p",ne,_(e(l).errors.account_type),1)):p("",!0)]),d("div",te,[t(e(r),{for:"currency"},{default:a(()=>[...n[22]||(n[22]=[s("Currency *",-1)])]),_:1}),t(e(A),{modelValue:e(l).currency,"onUpdate:modelValue":n[3]||(n[3]=o=>e(l).currency=o),disabled:m.hasTransactions},{default:a(()=>[t(e($),{id:"currency"},{default:a(()=>[t(e(x),{placeholder:"Select currency"})]),_:1}),t(e(U),null,{default:a(()=>[(i(!0),c(v,null,V(m.currencies,o=>(i(),y(e(g),{key:o.currency_code,value:o.currency_code},{default:a(()=>[s(_(o.currency_code)+" ",1),o.is_base?(i(),c("span",ae," (Base)")):p("",!0)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),m.hasTransactions?(i(),c("p",oe,"Currency cannot be changed after transactions exist")):p("",!0),e(l).errors.currency?(i(),c("p",le,_(e(l).errors.currency),1)):p("",!0)]),d("div",se,[t(e(r),{for:"bank_id"},{default:a(()=>[...n[23]||(n[23]=[s("Bank (optional)",-1)])]),_:1}),t(e(A),{modelValue:e(l).bank_id,"onUpdate:modelValue":n[4]||(n[4]=o=>e(l).bank_id=o)},{default:a(()=>[t(e($),{id:"bank_id"},{default:a(()=>[t(e(x),{placeholder:"Select bank"})]),_:1}),t(e(U),null,{default:a(()=>[t(e(g),{value:k},{default:a(()=>[...n[24]||(n[24]=[s("No bank selected",-1)])]),_:1}),(i(!0),c(v,null,V(m.banks,o=>(i(),y(e(g),{key:o.id,value:o.id},{default:a(()=>[s(_(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),d("div",ue,[t(e(r),{for:"gl_account_id"},{default:a(()=>[...n[25]||(n[25]=[s("GL Account (optional)",-1)])]),_:1}),t(e(A),{modelValue:e(l).gl_account_id,"onUpdate:modelValue":n[5]||(n[5]=o=>e(l).gl_account_id=o)},{default:a(()=>[t(e($),{id:"gl_account_id"},{default:a(()=>[t(e(x),{placeholder:"Link to GL account"})]),_:1}),t(e(U),null,{default:a(()=>[t(e(g),{value:k},{default:a(()=>[...n[26]||(n[26]=[s("No GL account",-1)])]),_:1}),(i(!0),c(v,null,V(m.glAccounts,o=>(i(),y(e(g),{key:o.id,value:o.id},{default:a(()=>[s(_(o.code)+" â€” "+_(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])])]),_:1})]),_:1}),t(e(w),null,{default:a(()=>[t(e(S),null,{default:a(()=>[t(e(T),null,{default:a(()=>[...n[27]||(n[27]=[s("Banking Details",-1)])]),_:1}),t(e(C),null,{default:a(()=>[...n[28]||(n[28]=[s("Optional banking identifiers",-1)])]),_:1})]),_:1}),t(e(B),{class:"space-y-4"},{default:a(()=>[d("div",de,[d("div",ie,[t(e(r),{for:"iban"},{default:a(()=>[...n[29]||(n[29]=[s("IBAN",-1)])]),_:1}),t(e(f),{id:"iban",modelValue:e(l).iban,"onUpdate:modelValue":n[6]||(n[6]=o=>e(l).iban=o),placeholder:"e.g., SA0380000000608010167519",maxlength:"34"},null,8,["modelValue"]),e(l).errors.iban?(i(),c("p",re,_(e(l).errors.iban),1)):p("",!0)]),d("div",ce,[t(e(r),{for:"swift_code"},{default:a(()=>[...n[30]||(n[30]=[s("SWIFT Code",-1)])]),_:1}),t(e(f),{id:"swift_code",modelValue:e(l).swift_code,"onUpdate:modelValue":n[7]||(n[7]=o=>e(l).swift_code=o),placeholder:"e.g., RJHISARI",maxlength:"11"},null,8,["modelValue"])]),d("div",me,[t(e(r),{for:"routing_number"},{default:a(()=>[...n[31]||(n[31]=[s("Routing Number",-1)])]),_:1}),t(e(f),{id:"routing_number",modelValue:e(l).routing_number,"onUpdate:modelValue":n[8]||(n[8]=o=>e(l).routing_number=o),placeholder:"e.g., 021000021"},null,8,["modelValue"])]),d("div",_e,[t(e(r),{for:"branch_name"},{default:a(()=>[...n[32]||(n[32]=[s("Branch Name",-1)])]),_:1}),t(e(f),{id:"branch_name",modelValue:e(l).branch_name,"onUpdate:modelValue":n[9]||(n[9]=o=>e(l).branch_name=o),placeholder:"e.g., Main Branch"},null,8,["modelValue"])])]),d("div",pe,[t(e(r),{for:"branch_address"},{default:a(()=>[...n[33]||(n[33]=[s("Branch Address",-1)])]),_:1}),t(e(h),{id:"branch_address",modelValue:e(l).branch_address,"onUpdate:modelValue":n[10]||(n[10]=o=>e(l).branch_address=o),placeholder:"Full branch address",rows:"2"},null,8,["modelValue"])])]),_:1})]),_:1}),m.hasTransactions?p("",!0):(i(),y(e(w),{key:1},{default:a(()=>[t(e(S),null,{default:a(()=>[t(e(T),null,{default:a(()=>[...n[34]||(n[34]=[s("Opening Balance",-1)])]),_:1}),t(e(C),null,{default:a(()=>[...n[35]||(n[35]=[s("Adjust the starting balance for this account",-1)])]),_:1})]),_:1}),t(e(B),{class:"space-y-4"},{default:a(()=>[d("div",fe,[d("div",be,[t(e(r),{for:"opening_balance"},{default:a(()=>[...n[36]||(n[36]=[s("Opening Balance",-1)])]),_:1}),t(e(f),{id:"opening_balance",modelValue:e(l).opening_balance,"onUpdate:modelValue":n[11]||(n[11]=o=>e(l).opening_balance=o),modelModifiers:{number:!0},type:"number",step:"0.01",placeholder:"0.00"},null,8,["modelValue"])]),d("div",ye,[t(e(r),{for:"opening_balance_date"},{default:a(()=>[...n[37]||(n[37]=[s("As of Date",-1)])]),_:1}),t(e(f),{id:"opening_balance_date",modelValue:e(l).opening_balance_date,"onUpdate:modelValue":n[12]||(n[12]=o=>e(l).opening_balance_date=o),type:"date"},null,8,["modelValue"])])])]),_:1})]),_:1})),t(e(w),null,{default:a(()=>[t(e(S),null,{default:a(()=>[t(e(T),null,{default:a(()=>[...n[38]||(n[38]=[s("Settings",-1)])]),_:1})]),_:1}),t(e(B),{class:"space-y-4"},{default:a(()=>[d("div",ge,[t(e(L),{id:"is_primary",checked:e(l).is_primary,"onUpdate:checked":n[13]||(n[13]=o=>e(l).is_primary=o)},null,8,["checked"]),t(e(r),{for:"is_primary",class:"cursor-pointer"},{default:a(()=>[...n[39]||(n[39]=[s(" Set as primary account ",-1)])]),_:1})]),d("div",ke,[t(e(L),{id:"is_active",checked:e(l).is_active,"onUpdate:checked":n[14]||(n[14]=o=>e(l).is_active=o)},null,8,["checked"]),t(e(r),{for:"is_active",class:"cursor-pointer"},{default:a(()=>[...n[40]||(n[40]=[s(" Account is active ",-1)])]),_:1})]),d("div",ve,[t(e(r),{for:"notes"},{default:a(()=>[...n[41]||(n[41]=[s("Notes",-1)])]),_:1}),t(e(h),{id:"notes",modelValue:e(l).notes,"onUpdate:modelValue":n[15]||(n[15]=o=>e(l).notes=o),placeholder:"Any additional notes about this account",rows:"3"},null,8,["modelValue"])])]),_:1})]),_:1}),d("div",Ve,[t(e(N),{type:"button",variant:"outline",onClick:F},{default:a(()=>[t(e(W),{class:"mr-2 h-4 w-4"}),n[42]||(n[42]=s(" Cancel ",-1))]),_:1}),t(e(N),{type:"submit",disabled:e(l).processing},{default:a(()=>[t(e(X),{class:"mr-2 h-4 w-4"}),n[43]||(n[43]=s(" Save Changes ",-1))]),_:1},8,["disabled"])])],32)]),_:1},8,["title","icon"])],64))}});export{dn as default};
