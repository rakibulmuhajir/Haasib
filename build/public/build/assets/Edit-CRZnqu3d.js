import{d as N,s as k,x as E,c as g,a as i,u as e,h as j,w as s,b as r,y as w,e as u,o as p,F as y,r as $,i as x,j as I,t as b}from"./app-B-wLZQl0.js";import{_ as L}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as P}from"./index-D8JUok4n.js";import{_ as a}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import{_ as V,a as v,b as c,c as U,d as _}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{_ as D}from"./Textarea.vue_vue_type_script_setup_true_lang-DrbQ2zws.js";import{S as F}from"./save-CBmuHaqJ.js";import{U as O}from"./users-CkYIFvpU.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./Collection-DN_gmv-a.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./createLucideIcon-CbxkoCx6.js";import"./plus-C63jdNg7.js";import"./check-DogY6QNG.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./file-text-CFHWSPvd.js";import"./calendar-B0yi2zLg.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";import"./loader-circle-BSwxCoSE.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./index-a73qSWOM.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./nullish-CHIgUVhi.js";const R={class:"grid gap-4 md:grid-cols-2"},T={key:0},Z={class:"md:col-span-2"},q={class:"grid gap-6 md:grid-cols-2"},M={class:"space-y-3 rounded-md border p-4"},G={class:"space-y-2"},H={class:"grid gap-2 md:grid-cols-2"},J={class:"grid gap-2 md:grid-cols-2"},K={class:"space-y-3 rounded-md border p-4"},Q={class:"space-y-2"},W={class:"grid gap-2 md:grid-cols-2"},X={class:"grid gap-2 md:grid-cols-2"},Y={class:"flex justify-end gap-3"},je=N({__name:"Edit",props:{company:{},customer:{},currencies:{},arAccounts:{}},setup(f){const n=f,S=[{title:"Dashboard",href:`/${n.company.slug}`},{title:"Customers",href:`/${n.company.slug}/customers`},{title:n.customer.name,href:`/${n.company.slug}/customers/${n.customer.id}`},{title:"Edit",href:`/${n.company.slug}/customers/${n.customer.id}/edit`}],z=k(()=>n.currencies.length?n.currencies:[{currency_code:n.company.base_currency,is_base:!0}]),o=E({name:n.customer.name??"",email:n.customer.email??"",phone:n.customer.phone??"",base_currency:n.customer.base_currency??n.company.base_currency,payment_terms:n.customer.payment_terms??"",tax_id:n.customer.tax_id??"",credit_limit:n.customer.credit_limit??"",notes:n.customer.notes??"",logo_url:n.customer.logo_url??"",ar_account_id:n.customer.ar_account_id??"",billing_street:n.customer.billing_address?.street??"",billing_city:n.customer.billing_address?.city??"",billing_state:n.customer.billing_address?.state??"",billing_zip:n.customer.billing_address?.zip??"",billing_country:n.customer.billing_address?.country??"",shipping_street:n.customer.shipping_address?.street??"",shipping_city:n.customer.shipping_address?.city??"",shipping_state:n.customer.shipping_address?.state??"",shipping_zip:n.customer.shipping_address?.zip??"",shipping_country:n.customer.shipping_address?.country??"",is_active:n.customer.is_active}),C=()=>{o.transform(d=>{const l={street:d.billing_street||"",city:d.billing_city||"",state:d.billing_state||"",zip:d.billing_zip||"",country:d.billing_country||""},t={street:d.shipping_street||"",city:d.shipping_city||"",state:d.shipping_state||"",zip:d.shipping_zip||"",country:d.shipping_country||""},B=Object.values(l).some(Boolean),A=Object.values(t).some(Boolean);return{name:d.name,email:d.email||null,phone:d.phone||null,base_currency:d.base_currency||n.company.base_currency,payment_terms:d.payment_terms?Number(d.payment_terms):null,tax_id:d.tax_id||null,credit_limit:d.credit_limit===""?null:Number(d.credit_limit),notes:d.notes||null,logo_url:d.logo_url||null,billing_address:B?l:null,shipping_address:A?t:null,is_active:!!d.is_active}}).put(`/${n.company.slug}/customers/${n.customer.id}`,{preserveScroll:!0})};return(d,l)=>(p(),g(y,null,[i(e(j),{title:`Edit Customer ${f.customer.customer_number}`},null,8,["title"]),i(L,{title:`Edit ${f.customer.customer_number}`,breadcrumbs:S,icon:e(O)},{default:s(()=>[r("form",{class:"space-y-6",onSubmit:w(C,["prevent"])},[r("div",R,[r("div",null,[i(e(m),{for:"name"},{default:s(()=>[...l[21]||(l[21]=[u("Name",-1)])]),_:1}),i(e(a),{id:"name",modelValue:e(o).name,"onUpdate:modelValue":l[0]||(l[0]=t=>e(o).name=t),required:""},null,8,["modelValue"])]),r("div",null,[i(e(m),{for:"email"},{default:s(()=>[...l[22]||(l[22]=[u("Email",-1)])]),_:1}),i(e(a),{id:"email",modelValue:e(o).email,"onUpdate:modelValue":l[1]||(l[1]=t=>e(o).email=t),type:"email"},null,8,["modelValue"])]),r("div",null,[i(e(m),{for:"phone"},{default:s(()=>[...l[23]||(l[23]=[u("Phone",-1)])]),_:1}),i(e(a),{id:"phone",modelValue:e(o).phone,"onUpdate:modelValue":l[2]||(l[2]=t=>e(o).phone=t)},null,8,["modelValue"])]),r("div",null,[i(e(m),{for:"base_currency"},{default:s(()=>[...l[24]||(l[24]=[u("Currency",-1)])]),_:1}),i(e(V),{modelValue:e(o).base_currency,"onUpdate:modelValue":l[3]||(l[3]=t=>e(o).base_currency=t)},{default:s(()=>[i(e(v),{id:"base_currency"},{default:s(()=>[i(e(c),{placeholder:"Select currency"})]),_:1}),i(e(U),null,{default:s(()=>[(p(!0),g(y,null,$(z.value,t=>(p(),x(e(_),{key:t.currency_code,value:t.currency_code},{default:s(()=>[u(b(t.currency_code)+" ",1),t.is_base?(p(),g("span",T,"· Base")):I("",!0)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),r("div",null,[i(e(m),{for:"payment_terms"},{default:s(()=>[...l[25]||(l[25]=[u("Payment Terms (days)",-1)])]),_:1}),i(e(a),{id:"payment_terms",modelValue:e(o).payment_terms,"onUpdate:modelValue":l[4]||(l[4]=t=>e(o).payment_terms=t),type:"number",min:"0",max:"365"},null,8,["modelValue"])]),r("div",null,[i(e(m),{for:"tax_id"},{default:s(()=>[...l[26]||(l[26]=[u("Tax ID",-1)])]),_:1}),i(e(a),{id:"tax_id",modelValue:e(o).tax_id,"onUpdate:modelValue":l[5]||(l[5]=t=>e(o).tax_id=t)},null,8,["modelValue"])]),r("div",null,[i(e(m),{for:"ar_account_id"},{default:s(()=>[...l[27]||(l[27]=[u("AR Account",-1)])]),_:1}),i(e(V),{modelValue:e(o).ar_account_id,"onUpdate:modelValue":l[6]||(l[6]=t=>e(o).ar_account_id=t)},{default:s(()=>[i(e(v),{id:"ar_account_id"},{default:s(()=>[i(e(c),{placeholder:"Select AR account"})]),_:1}),i(e(U),null,{default:s(()=>[i(e(_),{value:"__none"},{default:s(()=>[...l[28]||(l[28]=[u("Use company default",-1)])]),_:1}),(p(!0),g(y,null,$(n.arAccounts||[],t=>(p(),x(e(_),{key:t.id,value:t.id},{default:s(()=>[u(b(t.code)+" — "+b(t.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),r("div",null,[i(e(m),{for:"credit_limit"},{default:s(()=>[...l[29]||(l[29]=[u("Credit Limit",-1)])]),_:1}),i(e(a),{id:"credit_limit",modelValue:e(o).credit_limit,"onUpdate:modelValue":l[7]||(l[7]=t=>e(o).credit_limit=t),type:"number",min:"0",step:"0.01"},null,8,["modelValue"])]),r("div",null,[i(e(m),{for:"logo_url"},{default:s(()=>[...l[30]||(l[30]=[u("Logo URL",-1)])]),_:1}),i(e(a),{id:"logo_url",modelValue:e(o).logo_url,"onUpdate:modelValue":l[8]||(l[8]=t=>e(o).logo_url=t)},null,8,["modelValue"])]),r("div",Z,[i(e(m),{for:"notes"},{default:s(()=>[...l[31]||(l[31]=[u("Notes",-1)])]),_:1}),i(e(D),{id:"notes",modelValue:e(o).notes,"onUpdate:modelValue":l[9]||(l[9]=t=>e(o).notes=t)},null,8,["modelValue"])]),r("div",null,[i(e(m),{for:"is_active"},{default:s(()=>[...l[32]||(l[32]=[u("Status",-1)])]),_:1}),i(e(V),{modelValue:e(o).is_active,"onUpdate:modelValue":l[10]||(l[10]=t=>e(o).is_active=t)},{default:s(()=>[i(e(v),{id:"is_active"},{default:s(()=>[i(e(c),{placeholder:"Status"})]),_:1}),i(e(U),null,{default:s(()=>[i(e(_),{value:!0},{default:s(()=>[...l[33]||(l[33]=[u("Active",-1)])]),_:1}),i(e(_),{value:!1},{default:s(()=>[...l[34]||(l[34]=[u("Inactive",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),r("div",q,[r("div",M,[l[40]||(l[40]=r("div",{class:"font-semibold"},"Billing Address",-1)),r("div",G,[i(e(m),{for:"billing_street"},{default:s(()=>[...l[35]||(l[35]=[u("Street",-1)])]),_:1}),i(e(a),{id:"billing_street",modelValue:e(o).billing_street,"onUpdate:modelValue":l[11]||(l[11]=t=>e(o).billing_street=t)},null,8,["modelValue"])]),r("div",H,[r("div",null,[i(e(m),{for:"billing_city"},{default:s(()=>[...l[36]||(l[36]=[u("City",-1)])]),_:1}),i(e(a),{id:"billing_city",modelValue:e(o).billing_city,"onUpdate:modelValue":l[12]||(l[12]=t=>e(o).billing_city=t)},null,8,["modelValue"])]),r("div",null,[i(e(m),{for:"billing_state"},{default:s(()=>[...l[37]||(l[37]=[u("State",-1)])]),_:1}),i(e(a),{id:"billing_state",modelValue:e(o).billing_state,"onUpdate:modelValue":l[13]||(l[13]=t=>e(o).billing_state=t)},null,8,["modelValue"])])]),r("div",J,[r("div",null,[i(e(m),{for:"billing_zip"},{default:s(()=>[...l[38]||(l[38]=[u("ZIP",-1)])]),_:1}),i(e(a),{id:"billing_zip",modelValue:e(o).billing_zip,"onUpdate:modelValue":l[14]||(l[14]=t=>e(o).billing_zip=t)},null,8,["modelValue"])]),r("div",null,[i(e(m),{for:"billing_country"},{default:s(()=>[...l[39]||(l[39]=[u("Country (2-char)",-1)])]),_:1}),i(e(a),{id:"billing_country",modelValue:e(o).billing_country,"onUpdate:modelValue":l[15]||(l[15]=t=>e(o).billing_country=t),maxlength:"2"},null,8,["modelValue"])])])]),r("div",K,[l[46]||(l[46]=r("div",{class:"font-semibold"},"Shipping Address",-1)),r("div",Q,[i(e(m),{for:"shipping_street"},{default:s(()=>[...l[41]||(l[41]=[u("Street",-1)])]),_:1}),i(e(a),{id:"shipping_street",modelValue:e(o).shipping_street,"onUpdate:modelValue":l[16]||(l[16]=t=>e(o).shipping_street=t)},null,8,["modelValue"])]),r("div",W,[r("div",null,[i(e(m),{for:"shipping_city"},{default:s(()=>[...l[42]||(l[42]=[u("City",-1)])]),_:1}),i(e(a),{id:"shipping_city",modelValue:e(o).shipping_city,"onUpdate:modelValue":l[17]||(l[17]=t=>e(o).shipping_city=t)},null,8,["modelValue"])]),r("div",null,[i(e(m),{for:"shipping_state"},{default:s(()=>[...l[43]||(l[43]=[u("State",-1)])]),_:1}),i(e(a),{id:"shipping_state",modelValue:e(o).shipping_state,"onUpdate:modelValue":l[18]||(l[18]=t=>e(o).shipping_state=t)},null,8,["modelValue"])])]),r("div",X,[r("div",null,[i(e(m),{for:"shipping_zip"},{default:s(()=>[...l[44]||(l[44]=[u("ZIP",-1)])]),_:1}),i(e(a),{id:"shipping_zip",modelValue:e(o).shipping_zip,"onUpdate:modelValue":l[19]||(l[19]=t=>e(o).shipping_zip=t)},null,8,["modelValue"])]),r("div",null,[i(e(m),{for:"shipping_country"},{default:s(()=>[...l[45]||(l[45]=[u("Country (2-char)",-1)])]),_:1}),i(e(a),{id:"shipping_country",modelValue:e(o).shipping_country,"onUpdate:modelValue":l[20]||(l[20]=t=>e(o).shipping_country=t),maxlength:"2"},null,8,["modelValue"])])])])]),r("div",Y,[i(e(P),{type:"submit"},{default:s(()=>[i(e(F),{class:"mr-2 h-4 w-4"}),l[47]||(l[47]=u(" Save Changes ",-1))]),_:1})])],32)]),_:1},8,["title","icon"])],64))}});export{je as default};
