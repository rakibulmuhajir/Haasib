import{d as S,x,s as N,c as y,a,u as t,h as k,w as n,b as r,y as C,e as u,o as p,F as _,r as E,i as w,t as v}from"./app-B-wLZQl0.js";import{_ as B}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as L}from"./index-D8JUok4n.js";import{_ as c}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{_ as s}from"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import{_ as U,a as D,b as F,c as P,d as b}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{S as A}from"./save-CBmuHaqJ.js";import{L as T}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./loader-circle-BSwxCoSE.js";import"./createLucideIcon-CbxkoCx6.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./useForwardExpose-Ca12vFmR.js";import"./index-a73qSWOM.js";import"./VisuallyHidden-BZkMfMV2.js";import"./Collection-DN_gmv-a.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./check-DogY6QNG.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./nullish-CHIgUVhi.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./plus-C63jdNg7.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./file-text-CFHWSPvd.js";import"./users-CkYIFvpU.js";import"./calendar-B0yi2zLg.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";const j={class:"grid gap-4 md:grid-cols-2"},q={class:"flex justify-end gap-3"},f="__none",vt=S({__name:"Edit",props:{company:{},account:{},parents:{}},setup(m){const o=m,$=[{title:"Dashboard",href:`/${o.company.slug}`},{title:"Accounts",href:`/${o.company.slug}/accounts`},{title:o.account.code,href:`/${o.company.slug}/accounts/${o.account.id}`},{title:"Edit",href:`/${o.company.slug}/accounts/${o.account.id}/edit`}],i=x({code:o.account.code,name:o.account.name,type:o.account.type,subtype:o.account.subtype,normal_balance:o.account.normal_balance,currency:o.account.currency??"",parent_id:o.account.parent_id??f,description:o.account.description??"",is_active:o.account.is_active}),V=N(()=>o.parents.filter(d=>d.id!==o.account.id&&d.type===i.type)),g=()=>{i.transform(d=>({...d,parent_id:d.parent_id===f?null:d.parent_id})).put(`/${o.company.slug}/accounts/${o.account.id}`,{preserveScroll:!0})};return(d,e)=>(p(),y(_,null,[a(t(k),{title:`Edit Account ${m.account.code}`},null,8,["title"]),a(B,{title:`Edit ${m.account.code}`,breadcrumbs:$,icon:t(T)},{default:n(()=>[r("form",{class:"space-y-6",onSubmit:C(g,["prevent"])},[r("div",j,[r("div",null,[a(t(s),null,{default:n(()=>[...e[4]||(e[4]=[u("Code",-1)])]),_:1}),a(t(c),{value:m.account.code,disabled:""},null,8,["value"])]),r("div",null,[a(t(s),null,{default:n(()=>[...e[5]||(e[5]=[u("Type",-1)])]),_:1}),a(t(c),{value:m.account.type,disabled:""},null,8,["value"])]),r("div",null,[a(t(s),null,{default:n(()=>[...e[6]||(e[6]=[u("Subtype",-1)])]),_:1}),a(t(c),{value:m.account.subtype,disabled:""},null,8,["value"])]),r("div",null,[a(t(s),{for:"name"},{default:n(()=>[...e[7]||(e[7]=[u("Name",-1)])]),_:1}),a(t(c),{id:"name",modelValue:t(i).name,"onUpdate:modelValue":e[0]||(e[0]=l=>t(i).name=l),required:""},null,8,["modelValue"])]),r("div",null,[a(t(s),{for:"currency"},{default:n(()=>[...e[8]||(e[8]=[u("Currency (optional)",-1)])]),_:1}),a(t(c),{id:"currency",modelValue:t(i).currency,"onUpdate:modelValue":e[1]||(e[1]=l=>t(i).currency=l),placeholder:"Leave blank for base",maxlength:"3"},null,8,["modelValue"])]),r("div",null,[a(t(s),{for:"parent_id"},{default:n(()=>[...e[9]||(e[9]=[u("Parent (optional)",-1)])]),_:1}),a(t(U),{modelValue:t(i).parent_id,"onUpdate:modelValue":e[2]||(e[2]=l=>t(i).parent_id=l)},{default:n(()=>[a(t(D),{id:"parent_id"},{default:n(()=>[a(t(F),{placeholder:"No parent"})]),_:1}),a(t(P),null,{default:n(()=>[a(t(b),{value:f},{default:n(()=>[...e[10]||(e[10]=[u("No parent",-1)])]),_:1}),(p(!0),y(_,null,E(V.value,l=>(p(),w(t(b),{key:l.id,value:l.id},{default:n(()=>[u(v(l.code)+" â€” "+v(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),r("div",null,[a(t(s),{for:"description"},{default:n(()=>[...e[11]||(e[11]=[u("Description",-1)])]),_:1}),a(t(c),{id:"description",modelValue:t(i).description,"onUpdate:modelValue":e[3]||(e[3]=l=>t(i).description=l),placeholder:"Optional description"},null,8,["modelValue"])]),r("div",q,[a(t(L),{type:"submit"},{default:n(()=>[a(t(A),{class:"mr-2 h-4 w-4"}),e[12]||(e[12]=u(" Save Changes ",-1))]),_:1})])],32)]),_:1},8,["title","icon"])],64))}});export{vt as default};
