import{d as B,q as b,s as I,c as O,a as s,u as t,h as P,w as a,b as o,i as U,j as F,N as R,e as l,t as u,f as m,o as x,F as K}from"./app-B-wLZQl0.js";import{S as q,_ as L}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as T}from"./EmptyState.vue_vue_type_script_setup_true_lang-CrAvLLsO.js";import{_ as G}from"./DataTable.vue_vue_type_script_setup_true_lang-BQW8AXQk.js";import{_ as C}from"./index-a73qSWOM.js";import{_ as y}from"./index-D8JUok4n.js";import{_ as H}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{_ as J,a as M,b as Q,c as W,d as c}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{b as k,c as w,d as V,e as p}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import{E as S}from"./ellipsis-DRk1q4ie.js";import{E as h}from"./eye-pMepw5BK.js";import{P as j}from"./pencil-R0Fiz8Cs.js";import{P as X}from"./plus-C63jdNg7.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./loader-circle-BSwxCoSE.js";import"./createLucideIcon-CbxkoCx6.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./Collection-DN_gmv-a.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./check-DogY6QNG.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./nullish-CHIgUVhi.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./file-text-CFHWSPvd.js";import"./users-CkYIFvpU.js";import"./calendar-B0yi2zLg.js";import"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";const Y={class:"flex flex-col gap-4 md:flex-row mb-6"},Z={class:"relative flex-1"},tt={class:"rounded-xl border border-zinc-200 bg-white p-4 shadow-sm"},et={class:"space-y-3"},st={class:"flex items-center justify-between"},at={class:"font-semibold text-zinc-900"},it={class:"text-sm text-zinc-500"},ot={class:"flex items-center justify-between"},nt={class:"font-medium"},lt={class:"flex items-center justify-between"},rt={class:"font-medium"},dt={class:"text-sm text-zinc-900 mt-1"},ut={class:"pt-2 border-t border-zinc-100"},Jt=B({__name:"Index",props:{company:{},credit_notes:{},filters:{}},setup(r){const d=r,_=b(d.filters.search),f=b(d.filters.status||"all"),D=b(d.filters.customer_id),z=[{title:"Dashboard",href:`/${d.company.slug}`},{title:"Credit Notes",href:`/${d.company.slug}/credit-notes`}],$=()=>{m.get(`/${d.company.slug}/credit-notes`,{search:_.value,status:f.value==="all"?"":f.value,customer_id:D.value},{preserveState:!0})},g=n=>{switch(n){case"draft":return"secondary";case"issued":return"default";case"partial":return"warning";case"applied":return"success";case"void":return"destructive";default:return"secondary"}},A=(n,e)=>new Intl.NumberFormat("en-US",{style:"currency",currency:e||"USD"}).format(n),N=[{key:"credit_note_number",label:"Credit Note #"},{key:"customer",label:"Customer"},{key:"invoice",label:"Invoice"},{key:"reason",label:"Reason"},{key:"amount",label:"Amount"},{key:"status",label:"Status"},{key:"credit_date",label:"Date"},{key:"actions",label:"",sortable:!1}],E=I(()=>d.credit_notes.data.map(n=>({id:n.id,credit_note_number:n.credit_note_number,customer:n.customer.name,invoice:n.invoice?.invoice_number||"-",reason:n.reason,amount:A(n.amount,n.base_currency),status:n.status,credit_date:new Date(n.credit_date).toLocaleDateString(),actions:n.id,_creditNoteObject:n})));return(n,e)=>(x(),O(K,null,[s(t(P),{title:"Credit Notes"}),s(L,{title:"Credit Notes",breadcrumbs:z},{actions:a(()=>[s(t(y),{onClick:e[0]||(e[0]=i=>t(m).get(`/${r.company.slug}/credit-notes/create`))},{default:a(()=>[s(t(X),{class:"mr-2 h-4 w-4"}),e[4]||(e[4]=l(" Create Credit Note ",-1))]),_:1})]),default:a(()=>[o("div",Y,[o("div",Z,[s(t(q),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s(t(H),{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=i=>_.value=i),placeholder:"Search credit notes...",class:"pl-10",onKeyup:R($,["enter"])},null,8,["modelValue"])]),s(t(J),{modelValue:f.value,"onUpdate:modelValue":[e[2]||(e[2]=i=>f.value=i),$]},{default:a(()=>[s(t(M),{class:"w-[180px]"},{default:a(()=>[s(t(Q),{placeholder:"All Status"})]),_:1}),s(t(W),null,{default:a(()=>[s(t(c),{value:"all"},{default:a(()=>[...e[5]||(e[5]=[l("All Status",-1)])]),_:1}),s(t(c),{value:"draft"},{default:a(()=>[...e[6]||(e[6]=[l("Draft",-1)])]),_:1}),s(t(c),{value:"issued"},{default:a(()=>[...e[7]||(e[7]=[l("Issued",-1)])]),_:1}),s(t(c),{value:"partial"},{default:a(()=>[...e[8]||(e[8]=[l("Partially Applied",-1)])]),_:1}),s(t(c),{value:"applied"},{default:a(()=>[...e[9]||(e[9]=[l("Applied",-1)])]),_:1}),s(t(c),{value:"void"},{default:a(()=>[...e[10]||(e[10]=[l("Void",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s(G,{columns:N,data:E.value,pagination:r.credit_notes},{status:a(({value:i})=>[s(t(C),{variant:g(i)},{default:a(()=>[l(u(i),1)]),_:2},1032,["variant"])]),actions:a(({row:i})=>[s(t(k),null,{default:a(()=>[s(t(w),{asChild:""},{default:a(()=>[s(t(y),{variant:"ghost",class:"h-8 w-8 p-0"},{default:a(()=>[s(t(S),{class:"h-4 w-4"})]),_:1})]),_:1}),s(t(V),{align:"end"},{default:a(()=>[s(t(p),{onClick:v=>t(m).get(`/${r.company.slug}/credit-notes/${i._creditNoteObject.id}`)},{default:a(()=>[s(t(h),{class:"mr-2 h-4 w-4"}),e[11]||(e[11]=l(" View ",-1))]),_:1},8,["onClick"]),s(t(p),{onClick:v=>t(m).get(`/${r.company.slug}/credit-notes/${i._creditNoteObject.id}/edit`)},{default:a(()=>[s(t(j),{class:"mr-2 h-4 w-4"}),e[12]||(e[12]=l(" Edit ",-1))]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),"mobile-card":a(({row:i})=>[o("div",tt,[o("div",et,[o("div",st,[o("div",null,[o("h3",at,u(i.credit_note_number),1),o("p",it,u(i.customer),1)]),s(t(C),{variant:g(i.status)},{default:a(()=>[l(u(i.status),1)]),_:2},1032,["variant"])]),o("div",ot,[e[13]||(e[13]=o("span",{class:"text-sm text-zinc-500"},"Amount",-1)),o("span",nt,u(i.amount),1)]),o("div",lt,[e[14]||(e[14]=o("span",{class:"text-sm text-zinc-500"},"Date",-1)),o("span",rt,u(i.credit_date),1)]),o("div",null,[e[15]||(e[15]=o("span",{class:"text-sm text-zinc-500"},"Reason",-1)),o("p",dt,u(i.reason),1)]),o("div",ut,[s(t(k),null,{default:a(()=>[s(t(w),{asChild:""},{default:a(()=>[s(t(y),{variant:"ghost",class:"w-full justify-between"},{default:a(()=>[e[16]||(e[16]=l(" Actions ",-1)),s(t(S),{class:"h-4 w-4"})]),_:1})]),_:1}),s(t(V),{align:"end",class:"w-48"},{default:a(()=>[s(t(p),{onClick:v=>t(m).get(`/${r.company.slug}/credit-notes/${i._creditNoteObject.id}`)},{default:a(()=>[s(t(h),{class:"mr-2 h-4 w-4"}),e[17]||(e[17]=l(" View ",-1))]),_:1},8,["onClick"]),s(t(p),{onClick:v=>t(m).get(`/${r.company.slug}/credit-notes/${i._creditNoteObject.id}/edit`)},{default:a(()=>[s(t(j),{class:"mr-2 h-4 w-4"}),e[18]||(e[18]=l(" Edit ",-1))]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)])])])]),_:1},8,["data","pagination"]),r.credit_notes.data.length===0?(x(),U(T,{key:0,icon:"Receipt",title:"No credit notes yet",description:"Create your first credit note to get started.","action-label":"Create Credit Note",onAction:e[3]||(e[3]=i=>t(m).get(`/${r.company.slug}/credit-notes/create`))})):F("",!0)]),_:1})],64))}});export{Jt as default};
