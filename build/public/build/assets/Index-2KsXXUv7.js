import{d as z,q as v,s as F,c as U,a as n,u as o,h as I,w as s,b as r,i as b,j as O,N as R,e as m,t as c,y as D,o as y,A as P,f,F as K}from"./app-B-wLZQl0.js";import{S as L,_ as E}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as G}from"./EmptyState.vue_vue_type_script_setup_true_lang-CrAvLLsO.js";import{_ as H}from"./DataTable.vue_vue_type_script_setup_true_lang-BQW8AXQk.js";import{_ as S}from"./index-a73qSWOM.js";import{_ as J}from"./index-D8JUok4n.js";import{_ as Q}from"./Input.vue_vue_type_script_setup_true_lang-E2jwtM0f.js";import{_ as W,a as X,b as Y,c as Z,d as u}from"./SelectValue.vue_vue_type_script_setup_true_lang-QDn6lJI8.js";import{P as ee}from"./plus-C63jdNg7.js";import{z as V}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import{F as te}from"./file-text-CFHWSPvd.js";import{C as ae}from"./credit-card-CZIyPTcw.js";import{B as ne}from"./building-YkSJqe0l.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./loader-circle-BSwxCoSE.js";import"./createLucideIcon-CbxkoCx6.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./Collection-DN_gmv-a.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./check-DogY6QNG.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./nullish-CHIgUVhi.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./users-CkYIFvpU.js";import"./calendar-B0yi2zLg.js";import"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";const oe={class:"flex flex-col gap-4 md:flex-row mb-6"},se={class:"relative flex-1"},re=["onClick"],ie=["onClick"],me=["onClick"],le=["onClick"],ce={class:"space-y-3"},ue={class:"flex items-center justify-between"},de={class:"font-semibold text-primary"},pe=["onClick"],fe=["onClick"],ye={class:"flex items-center justify-between"},_e={class:"font-medium"},he={class:"flex items-center justify-between"},ve={class:"font-medium"},et=z({__name:"Index",props:{company:{},payments:{},filters:{}},setup(d){const i=d,_=v(i.filters.search),B=v(i.filters.customer_id),p=v(i.filters.payment_method||"all"),M=[{title:"Dashboard",href:`/${i.company.slug}`},{title:"Payments",href:`/${i.company.slug}/payments`}],h=()=>{f.get(`/${i.company.slug}/payments`,{search:_.value,customer_id:B.value,payment_method:p.value==="all"?"":p.value},{preserveState:!0})},N=t=>{switch(t){case"cash":return V;case"bank_transfer":return ne;case"card":return ae;case"cheque":case"check":return te;default:return V}},g=t=>{switch(t){case"cash":return"Cash";case"bank_transfer":return"Bank Transfer";case"card":return"Card";case"cheque":case"check":return"Cheque";default:return"Other"}},k=t=>{switch(t){case"cash":return"default";case"bank_transfer":return"secondary";case"card":return"outline";default:return"secondary"}},q=(t,e)=>new Intl.NumberFormat("en-US",{style:"currency",currency:e||"USD"}).format(t),A=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),T=[{key:"payment_number",label:"Payment #"},{key:"customer",label:"Customer"},{key:"amount",label:"Amount"},{key:"payment_method",label:"Method"},{key:"payment_date",label:"Date"}],j=F(()=>i.payments.data.map(t=>{const e=N(t.payment_method);return{id:t.id,payment_number:t.payment_number,customer:t.customer.name,customer_id:t.customer_id,amount:q(t.amount,t.currency),payment_method:t.payment_method,payment_date:A(t.payment_date),_paymentObject:t,icon:e}})),C=t=>{f.get(`/${i.company.slug}/payments/${t}`)},x=t=>{f.get(`/${i.company.slug}/customers/${t}`)},$=t=>{p.value=t,h()};return(t,e)=>(y(),U(K,null,[n(o(I),{title:"Payments"}),n(E,{title:"Payments",breadcrumbs:M},{actions:s(()=>[n(o(J),{onClick:e[0]||(e[0]=a=>o(f).get(`/${d.company.slug}/payments/create`))},{default:s(()=>[n(o(ee),{class:"mr-2 h-4 w-4"}),e[4]||(e[4]=m(" Record Payment ",-1))]),_:1})]),default:s(()=>[r("div",oe,[r("div",se,[n(o(L),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),n(o(Q),{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=a=>_.value=a),placeholder:"Search payments...",class:"pl-10",onKeyup:R(h,["enter"])},null,8,["modelValue"])]),n(o(W),{modelValue:p.value,"onUpdate:modelValue":[e[2]||(e[2]=a=>p.value=a),h]},{default:s(()=>[n(o(X),{class:"w-[180px]"},{default:s(()=>[n(o(Y),{placeholder:"All Methods"})]),_:1}),n(o(Z),null,{default:s(()=>[n(o(u),{value:"all"},{default:s(()=>[...e[5]||(e[5]=[m("All Methods",-1)])]),_:1}),n(o(u),{value:"cashe"},{default:s(()=>[...e[6]||(e[6]=[m("Cash",-1)])]),_:1}),n(o(u),{value:"bank_transfer"},{default:s(()=>[...e[7]||(e[7]=[m("Bank Transfer",-1)])]),_:1}),n(o(u),{value:"card"},{default:s(()=>[...e[8]||(e[8]=[m("Card",-1)])]),_:1}),n(o(u),{value:"cheque"},{default:s(()=>[...e[9]||(e[9]=[m("Cheque",-1)])]),_:1}),n(o(u),{value:"other"},{default:s(()=>[...e[10]||(e[10]=[m("Other",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),n(H,{columns:T,data:j.value,pagination:d.payments},{"cell-payment_number":s(({value:a,row:l})=>[r("button",{onClick:w=>C(l.id),class:"font-medium text-primary hover:underline focus:outline-none focus:underline"},c(a),9,re)]),"cell-customer":s(({value:a,row:l})=>[r("button",{onClick:w=>x(l.customer_id),class:"text-foreground hover:text-primary hover:underline focus:outline-none focus:underline transition-colors"},c(a),9,ie)]),"cell-payment_method":s(({value:a,row:l})=>[r("button",{onClick:w=>$(a),class:"inline-flex items-center gap-2 transition-opacity hover:opacity-70 focus:outline-none"},[n(o(S),{variant:k(a)},{default:s(()=>[(y(),b(P(l.icon),{class:"h-3 w-3 mr-1"})),m(" "+c(g(a)),1)]),_:2},1032,["variant"])],8,me)]),"mobile-card":s(({row:a})=>[r("div",{onClick:l=>C(a.id),class:"rounded-xl border border-zinc-200 bg-white p-4 shadow-sm cursor-pointer hover:shadow-md transition-shadow"},[r("div",ce,[r("div",ue,[r("div",null,[r("h3",de,c(a.payment_number),1),r("button",{onClick:D(l=>x(a.customer_id),["stop"]),class:"text-sm text-zinc-500 hover:text-primary hover:underline"},c(a.customer),9,pe)]),r("button",{onClick:D(l=>$(a.payment_method),["stop"]),class:"transition-opacity hover:opacity-70"},[n(o(S),{variant:k(a.payment_method)},{default:s(()=>[(y(),b(P(a.icon),{class:"h-3 w-3 mr-1"})),m(" "+c(g(a.payment_method)),1)]),_:2},1032,["variant"])],8,fe)]),r("div",ye,[e[11]||(e[11]=r("span",{class:"text-sm text-zinc-500"},"Amount",-1)),r("span",_e,c(a.amount),1)]),r("div",he,[e[12]||(e[12]=r("span",{class:"text-sm text-zinc-500"},"Date",-1)),r("span",ve,c(a.payment_date),1)])])],8,le)]),_:1},8,["data","pagination"]),d.payments.data.length===0?(y(),b(G,{key:0,icon:"DollarSign",title:"No payments yet",description:"Record your first payment to get started.","action-label":"Record Payment",onAction:e[3]||(e[3]=a=>o(f).get(`/${d.company.slug}/payments/create`))})):O("",!0)]),_:1})],64))}});export{et as default};
