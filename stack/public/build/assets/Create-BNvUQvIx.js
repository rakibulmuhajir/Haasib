import{j as T,u as O,r as S,k as V,c as _,o as i,d as s,a as t,i as u,e as a,w as n,l as U,m,b as o,n as y,t as c,f as I,p as J}from"./app-DjFlEUH4.js";import{s as f,a as x}from"./index-DL9KtRp0.js";import{s as w}from"./index-CXOcYUhh.js";import{s as g}from"./index-424M1LzA.js";import{s as D}from"./index-CEuCntvK.js";import{s as F}from"./index-CpMPr0UE.js";import{s as j}from"./index-zYy9pXTp.js";import{s as p}from"./index-di-bTznt.js";import{s as L}from"./index-CLnL3lam.js";import{s as H}from"./index-CwhCYogN.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CKALDcO3.js";const M={class:"company-create"},q={class:"flex justify-between items-center mb-6"},Q={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},W={class:"space-y-4"},X={key:0,class:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md"},Z={class:"text-sm text-blue-700 dark:text-blue-300"},ee={class:"space-y-4"},ae={class:"space-y-4"},le={class:"flex items-center gap-2"},te={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},se={class:"flex gap-2"},re={class:"space-y-4"},oe={class:"flex items-center gap-2"},ne={class:"flex justify-between items-center"},ie={class:"flex gap-2"},ue={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},de={class:"bg-white dark:bg-gray-800 p-6 rounded-lg"},ce={__name:"Create",setup(me){const{t:ye}=T(),e=O({name:"",industry:"",country:"",base_currency:"USD",currency:"",timezone:"",language:"en",locale:"en_US",auto_setup:!0,create_fiscal_year:!0,fiscal_year_start:"",fiscal_year_end:"",settings:{}}),v=S(),b=S(!1),E=[{label:"Hospitality",value:"hospitality"},{label:"Retail",value:"retail"},{label:"Professional Services",value:"professional_services"},{label:"Technology",value:"technology"},{label:"Healthcare",value:"healthcare"},{label:"Education",value:"education"},{label:"Manufacturing",value:"manufacturing"},{label:"Other",value:"other"}],A=[{label:"United States",value:"US"},{label:"Canada",value:"CA"},{label:"United Kingdom",value:"GB"},{label:"Australia",value:"AU"},{label:"Germany",value:"DE"},{label:"France",value:"FR"},{label:"Japan",value:"JP"},{label:"China",value:"CN"}],Y=[{label:"USD - US Dollar",value:"USD"},{label:"EUR - Euro",value:"EUR"},{label:"GBP - British Pound",value:"GBP"},{label:"CAD - Canadian Dollar",value:"CAD"},{label:"AUD - Australian Dollar",value:"AUD"},{label:"JPY - Japanese Yen",value:"JPY"},{label:"CNY - Chinese Yuan",value:"CNY"}],z=[{label:"English",value:"en"},{label:"Spanish",value:"es"},{label:"French",value:"fr"},{label:"German",value:"de"},{label:"Japanese",value:"ja"},{label:"Chinese",value:"zh"}],B=[{label:"English (US)",value:"en_US"},{label:"English (UK)",value:"en_GB"},{label:"Spanish (ES)",value:"es_ES"},{label:"French (FR)",value:"fr_FR"},{label:"German (DE)",value:"de_DE"}];V(()=>{if(!e.fiscal_year_start)return null;const d=new Date(e.fiscal_year_start),l=new Date(d);return l.setFullYear(l.getFullYear()+1),l.setDate(l.getDate()-1),l.toISOString().split("T")[0]});const h=V(()=>e.name&&e.industry&&e.country&&e.base_currency&&!e.processing),k=()=>e.name?e.name.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/[\s-]+/g,"-").trim("-"):"",C=()=>{const l=new Date().getFullYear();e.fiscal_year_start=`${l}-01-01`,e.fiscal_year_end=`${l}-12-31`},N=()=>{switch(e.industry){case"hospitality":e.currency=e.base_currency;break;case"retail":e.currency=e.base_currency;break;case"professional_services":e.currency=e.base_currency;break;default:e.currency=e.base_currency}},$=()=>{switch(e.country){case"US":e.timezone="America/New_York",e.locale="en_US";break;case"CA":e.timezone="America/Toronto",e.locale="en_CA";break;case"GB":e.timezone="Europe/London",e.locale="en_GB";break;case"AU":e.timezone="Australia/Sydney",e.locale="en_AU";break;default:e.timezone="UTC",e.locale="en_US"}},G=()=>{e.currency=e.base_currency},P=async()=>{b.value=!0;try{await e.post("/api/v1/companies",{onSuccess:d=>{v.value.add({severity:"success",summary:"Success!",detail:"Company created successfully. Redirecting...",life:2e3}),setTimeout(()=>{J.visit("/companies")},1500)},onError:d=>{v.value.add({severity:"error",summary:"Validation Error",detail:"Please check the form for errors",life:3e3})},onFinish:()=>{b.value=!1}})}catch(d){console.error("Form submission error:",d),v.value.add({severity:"error",summary:"Error",detail:"Failed to create company. Please try again.",life:3e3}),b.value=!1}},R=()=>{e.reset(),e.clearErrors()};return C(),(d,l)=>(i(),_("div",M,[s(a(j),{ref_key:"toast",ref:v},null,512),t("div",q,[l[11]||(l[11]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Create New Company "),t("p",{class:"text-gray-600 dark:text-gray-400 mt-1"}," Set up a new company with accounting and management features ")],-1)),s(a(U),{href:"/companies"},{default:n(()=>[s(a(f),{icon:"pi pi-arrow-left",label:"Back to Companies",severity:"secondary",outlined:""})]),_:1})]),t("form",{onSubmit:I(P,["prevent"])},[t("div",Q,[s(a(x),null,{title:n(()=>[...l[12]||(l[12]=[o("Basic Information",-1)])]),content:n(()=>[t("div",W,[t("div",null,[l[13]||(l[13]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[o(" Company Name "),t("span",{class:"text-red-500"},"*")],-1)),s(a(w),{id:"name",modelValue:a(e).name,"onUpdate:modelValue":l[0]||(l[0]=r=>a(e).name=r),placeholder:"Enter company name",class:y([{"p-invalid":a(e).errors.name},"w-full"])},null,8,["modelValue","class"]),a(e).errors.name?(i(),m(a(p),{key:0,severity:"error",closable:!1},{default:n(()=>[o(c(a(e).errors.name),1)]),_:1})):u("",!0)]),t("div",null,[l[14]||(l[14]=t("label",{for:"industry",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[o(" Industry "),t("span",{class:"text-red-500"},"*")],-1)),s(a(g),{id:"industry",modelValue:a(e).industry,"onUpdate:modelValue":l[1]||(l[1]=r=>a(e).industry=r),options:E,"option-label":"label","option-value":"value",placeholder:"Select industry",class:y([{"p-invalid":a(e).errors.industry},"w-full"]),onChange:N},null,8,["modelValue","class"]),a(e).errors.industry?(i(),m(a(p),{key:0,severity:"error",closable:!1},{default:n(()=>[o(c(a(e).errors.industry),1)]),_:1})):u("",!0)]),t("div",null,[l[15]||(l[15]=t("label",{for:"country",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[o(" Country "),t("span",{class:"text-red-500"},"*")],-1)),s(a(g),{id:"country",modelValue:a(e).country,"onUpdate:modelValue":l[2]||(l[2]=r=>a(e).country=r),options:A,"option-label":"label","option-value":"value",placeholder:"Select country",class:y([{"p-invalid":a(e).errors.country},"w-full"]),onChange:$},null,8,["modelValue","class"]),a(e).errors.country?(i(),m(a(p),{key:0,severity:"error",closable:!1},{default:n(()=>[o(c(a(e).errors.country),1)]),_:1})):u("",!0)]),k()?(i(),_("div",X,[t("p",Z,[l[16]||(l[16]=t("i",{class:"pi pi-info-circle mr-2"},null,-1)),l[17]||(l[17]=o(" URL slug will be: ",-1)),t("strong",null,c(k()),1)])])):u("",!0)])]),_:1}),s(a(x),null,{title:n(()=>[...l[18]||(l[18]=[o("Financial Settings",-1)])]),content:n(()=>[t("div",ee,[t("div",null,[l[19]||(l[19]=t("label",{for:"base_currency",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[o(" Base Currency "),t("span",{class:"text-red-500"},"*")],-1)),s(a(g),{id:"base_currency",modelValue:a(e).base_currency,"onUpdate:modelValue":l[3]||(l[3]=r=>a(e).base_currency=r),options:Y,"option-label":"label","option-value":"value",placeholder:"Select base currency",class:y([{"p-invalid":a(e).errors.base_currency},"w-full"]),onChange:G},null,8,["modelValue","class"]),a(e).errors.base_currency?(i(),m(a(p),{key:0,severity:"error",closable:!1},{default:n(()=>[o(c(a(e).errors.base_currency),1)]),_:1})):u("",!0)]),t("div",null,[l[20]||(l[20]=t("label",{for:"timezone",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Timezone ",-1)),s(a(w),{id:"timezone",modelValue:a(e).timezone,"onUpdate:modelValue":l[4]||(l[4]=r=>a(e).timezone=r),placeholder:"e.g., America/New_York",class:"w-full"},null,8,["modelValue"])]),t("div",null,[l[21]||(l[21]=t("label",{for:"language",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Language ",-1)),s(a(g),{id:"language",modelValue:a(e).language,"onUpdate:modelValue":l[5]||(l[5]=r=>a(e).language=r),options:z,"option-label":"label","option-value":"value",placeholder:"Select language",class:"w-full"},null,8,["modelValue"])]),t("div",null,[l[22]||(l[22]=t("label",{for:"locale",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Locale ",-1)),s(a(g),{id:"locale",modelValue:a(e).locale,"onUpdate:modelValue":l[6]||(l[6]=r=>a(e).locale=r),options:B,"option-label":"label","option-value":"value",placeholder:"Select locale",class:"w-full"},null,8,["modelValue"])])])]),_:1}),s(a(x),{class:"lg:col-span-2"},{title:n(()=>[...l[23]||(l[23]=[o("Fiscal Year Settings",-1)])]),content:n(()=>[t("div",ae,[t("div",le,[s(a(F),{id:"create_fiscal_year",modelValue:a(e).create_fiscal_year,"onUpdate:modelValue":l[7]||(l[7]=r=>a(e).create_fiscal_year=r),"input-id":"create_fiscal_year",binary:""},null,8,["modelValue"]),l[24]||(l[24]=t("label",{for:"create_fiscal_year",class:"font-medium"}," Create fiscal year automatically ",-1))]),a(e).create_fiscal_year?(i(),_("div",te,[t("div",null,[l[25]||(l[25]=t("label",{for:"fiscal_year_start",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[o(" Fiscal Year Start Date "),t("span",{class:"text-red-500"},"*")],-1)),s(a(D),{id:"fiscal_year_start",modelValue:a(e).fiscal_year_start,"onUpdate:modelValue":l[8]||(l[8]=r=>a(e).fiscal_year_start=r),"date-format":"yy-mm-dd",placeholder:"Select start date",class:y([{"p-invalid":a(e).errors.fiscal_year_start},"w-full"])},null,8,["modelValue","class"]),a(e).errors.fiscal_year_start?(i(),m(a(p),{key:0,severity:"error",closable:!1},{default:n(()=>[o(c(a(e).errors.fiscal_year_start),1)]),_:1})):u("",!0)]),t("div",null,[l[26]||(l[26]=t("label",{for:"fiscal_year_end",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[o(" Fiscal Year End Date "),t("span",{class:"text-red-500"},"*")],-1)),s(a(D),{id:"fiscal_year_end",modelValue:a(e).fiscal_year_end,"onUpdate:modelValue":l[9]||(l[9]=r=>a(e).fiscal_year_end=r),"date-format":"yy-mm-dd",placeholder:"Select end date",class:y([{"p-invalid":a(e).errors.fiscal_year_end},"w-full"])},null,8,["modelValue","class"]),a(e).errors.fiscal_year_end?(i(),m(a(p),{key:0,severity:"error",closable:!1},{default:n(()=>[o(c(a(e).errors.fiscal_year_end),1)]),_:1})):u("",!0)])])):u("",!0),t("div",se,[s(a(f),{type:"button",onClick:C,label:"Use Calendar Year",severity:"secondary",outlined:"",size:"small"})])])]),_:1}),s(a(x),{class:"lg:col-span-2"},{title:n(()=>[...l[27]||(l[27]=[o("Advanced Settings",-1)])]),content:n(()=>[t("div",re,[t("div",oe,[s(a(F),{id:"auto_setup",modelValue:a(e).auto_setup,"onUpdate:modelValue":l[10]||(l[10]=r=>a(e).auto_setup=r),"input-id":"auto_setup",binary:""},null,8,["modelValue"]),l[28]||(l[28]=t("label",{for:"auto_setup",class:"font-medium"}," Auto-setup accounting features ",-1))]),l[29]||(l[29]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," This will automatically create chart of accounts, enable core modules, and set up basic accounting structure. ",-1))])]),_:1})]),s(a(H),{class:"my-6"}),t("div",ne,[s(a(f),{type:"button",onClick:R,label:"Reset Form",severity:"secondary",outlined:"",disabled:a(e).processing},null,8,["disabled"]),t("div",ie,[s(a(U),{href:"/companies"},{default:n(()=>[s(a(f),{type:"button",label:"Cancel",severity:"secondary",outlined:""})]),_:1}),s(a(f),{type:"submit",label:"Create Company",icon:"pi pi-check",loading:b.value,disabled:!h.value},null,8,["loading","disabled"])])])],32),b.value?(i(),_("div",ue,[t("div",de,[s(a(L)),l[30]||(l[30]=t("p",{class:"mt-4 text-center"},"Creating company...",-1))])])):u("",!0)]))}},we=K(ce,[["__scopeId","data-v-e5fea8b3"]]);export{we as default};
