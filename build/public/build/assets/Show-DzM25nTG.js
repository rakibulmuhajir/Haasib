import{d as N,s as f,c as u,a as o,u as d,h as T,w as a,b as e,j as v,o as n,f as b,t as l,e as c,i as g,F}from"./app-B-wLZQl0.js";import{_ as R}from"./PageShell.vue_vue_type_script_setup_true_lang-CS74Goxj.js";import{_ as E}from"./DataTable.vue_vue_type_script_setup_true_lang-BQW8AXQk.js";import{_ as A}from"./index-a73qSWOM.js";import{_ as p}from"./index-D8JUok4n.js";import{z as _,F as U}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DKxjvTPB.js";import{A as q}from"./arrow-left-DSX0n2_N.js";import{S as z}from"./square-pen-DZtT9kbx.js";import{T as I}from"./trash-2-BxVbfljz.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CAfRB85X.js";import"./loader-circle-BSwxCoSE.js";import"./createLucideIcon-CbxkoCx6.js";import"./info-_qQ0Rbsf.js";import"./circle-check-YKnAkXoj.js";import"./useForwardExpose-Ca12vFmR.js";import"./VisuallyHidden-BZkMfMV2.js";import"./PopperContent-BDPRX1DE.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./Collection-DN_gmv-a.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-ChUfgJPy.js";import"./building-2-DLYGST8U.js";import"./plus-C63jdNg7.js";import"./check-DogY6QNG.js";import"./index-Buy61MQA.js";import"./settings-B8OaYlkV.js";import"./file-text-CFHWSPvd.js";import"./users-CkYIFvpU.js";import"./calendar-B0yi2zLg.js";import"./Label.vue_vue_type_script_setup_true_lang-By03EcqK.js";import"./VisuallyHiddenInput-CgZzfdZ2.js";const L={class:"grid gap-6 md:grid-cols-3"},M={class:"md:col-span-2 space-y-4"},O={class:"rounded-lg border bg-card p-4"},P={class:"grid gap-4 md:grid-cols-2"},G={class:"space-y-1"},H={class:"font-semibold"},J={key:1},K={class:"space-y-1"},Q={class:"font-semibold"},W={class:"space-y-1"},X={class:"font-semibold text-lg"},Y={class:"space-y-1"},Z={class:"space-y-1 md:col-span-2"},tt={class:"font-semibold"},et={class:"space-y-1 md:col-span-2"},st={class:"font-semibold"},it={key:0,class:"rounded-lg border border-green-200 bg-green-50 p-4"},dt={class:"flex items-center justify-between"},rt={class:"text-lg font-bold text-green-900"},ot={class:"space-y-4"},nt={class:"rounded-lg border bg-card p-4"},lt={class:"space-y-3"},at={class:"flex justify-between"},ct={class:"font-medium"},mt={class:"flex justify-between"},ut={class:"font-medium"},vt={class:"flex justify-between"},pt={class:"font-medium"},ft={class:"border-t pt-2"},bt={class:"flex justify-between text-lg font-bold"},yt={key:0,class:"rounded-lg border border-yellow-200 bg-yellow-50 p-4"},gt={key:0,class:"mt-6"},xt={class:"rounded-lg border bg-card"},kt={key:1,class:"mt-6"},wt={class:"rounded-lg border bg-card p-6 text-center text-muted-foreground"},Zt=N({__name:"Show",props:{company:{},credit:{}},setup(s){const i=s,B=[{title:"Dashboard",href:`/${i.company.slug}`},{title:"Vendor Credits",href:`/${i.company.slug}/vendor-credits`},{title:i.credit.credit_number,href:`/${i.company.slug}/vendor-credits/${i.credit.id}`}],S=[{key:"bill_number",label:"Bill #"},{key:"amount_applied",label:"Applied"},{key:"bill_balance_after",label:"Bill Balance After"},{key:"applied_at",label:"Applied At"}],m=(r,t)=>new Intl.NumberFormat("en-US",{style:"currency",currency:t||"USD"}).format(r),V=f(()=>(i.credit.applications||[]).map(r=>({bill_number:r.bill?.bill_number||r.bill_id,amount_applied:m(r.amount_applied,i.credit.currency),bill_balance_after:m(r.bill_balance_after,i.credit.currency),applied_at:r.applied_at}))),$=f(()=>["draft","received"].includes(i.credit.status)),x=f(()=>["received","draft"].includes(i.credit.status)),h=f(()=>["draft","received"].includes(i.credit.status)),D=()=>{b.get(`/${i.company.slug}/vendor-credits/${i.credit.id}/edit`)},k=()=>{b.get(`/${i.company.slug}/vendor-credits/${i.credit.id}/apply`)},j=()=>{confirm("Are you sure you want to delete this vendor credit?")&&b.delete(`/${i.company.slug}/vendor-credits/${i.credit.id}`)},C=r=>r==="draft"?"secondary":r==="received"?"default":r==="applied"?"success":r==="void"?"destructive":"secondary",y=f(()=>{const r=i.credit.applications?.reduce((t,w)=>t+w.amount_applied,0)||0;return i.credit.amount-r});return(r,t)=>(n(),u(F,null,[o(d(T),{title:`Vendor Credit ${s.credit.credit_number}`},null,8,["title"]),o(R,{title:`Credit ${s.credit.credit_number}`,breadcrumbs:B,icon:d(U)},{actions:a(()=>[o(d(p),{variant:"outline",onClick:t[0]||(t[0]=w=>d(b).get(`/${s.company.slug}/vendor-credits`))},{default:a(()=>[o(d(q),{class:"mr-2 h-4 w-4"}),t[2]||(t[2]=c(" Back to Credits ",-1))]),_:1}),$.value?(n(),g(d(p),{key:0,onClick:D},{default:a(()=>[o(d(z),{class:"mr-2 h-4 w-4"}),t[3]||(t[3]=c(" Edit ",-1))]),_:1})):v("",!0),x.value?(n(),g(d(p),{key:1,variant:"outline",onClick:k},{default:a(()=>[o(d(_),{class:"mr-2 h-4 w-4"}),t[4]||(t[4]=c(" Apply to Bills ",-1))]),_:1})):v("",!0),h.value?(n(),g(d(p),{key:2,variant:"destructive",onClick:j},{default:a(()=>[o(d(I),{class:"mr-2 h-4 w-4"}),t[5]||(t[5]=c(" Delete ",-1))]),_:1})):v("",!0)]),default:a(()=>[e("div",L,[e("div",M,[e("div",O,[t[12]||(t[12]=e("div",{class:"text-lg font-semibold mb-4"},"Vendor Credit Details",-1)),e("div",P,[e("div",G,[t[6]||(t[6]=e("div",{class:"text-sm text-muted-foreground"},"Vendor",-1)),e("div",H,[s.credit.vendor?(n(),u("button",{key:0,onClick:t[1]||(t[1]=w=>d(b).get(`/${s.company.slug}/vendors/${s.credit.vendor.id}`)),class:"text-primary hover:text-primary/80 transition-colors"},l(s.credit.vendor.name),1)):(n(),u("span",J,"—"))])]),e("div",K,[t[7]||(t[7]=e("div",{class:"text-sm text-muted-foreground"},"Credit Date",-1)),e("div",Q,l(s.credit.credit_date),1)]),e("div",W,[t[8]||(t[8]=e("div",{class:"text-sm text-muted-foreground"},"Credit Amount",-1)),e("div",X,l(m(s.credit.amount,s.credit.currency)),1)]),e("div",Y,[t[9]||(t[9]=e("div",{class:"text-sm text-muted-foreground"},"Status",-1)),o(d(A),{variant:C(s.credit.status)},{default:a(()=>[c(l(s.credit.status),1)]),_:1},8,["variant"])]),e("div",Z,[t[10]||(t[10]=e("div",{class:"text-sm text-muted-foreground"},"Reason",-1)),e("div",tt,l(s.credit.reason),1)]),e("div",et,[t[11]||(t[11]=e("div",{class:"text-sm text-muted-foreground"},"Notes",-1)),e("div",st,l(s.credit.notes||"—"),1)])])]),y.value>0&&x.value?(n(),u("div",it,[e("div",dt,[e("div",null,[t[13]||(t[13]=e("div",{class:"text-sm font-medium text-green-800"},"Available to Apply",-1)),e("div",rt,l(m(y.value,s.credit.currency)),1)]),o(d(p),{onClick:k,variant:"outline",class:"border-green-300 text-green-800 hover:bg-green-100"},{default:a(()=>[o(d(_),{class:"mr-2 h-4 w-4"}),t[14]||(t[14]=c(" Apply to Bills ",-1))]),_:1})])])):v("",!0)]),e("div",ot,[e("div",nt,[t[19]||(t[19]=e("div",{class:"text-lg font-semibold mb-4"},"Financial Summary",-1)),e("div",lt,[e("div",at,[t[15]||(t[15]=e("span",{class:"text-sm text-muted-foreground"},"Original Amount",-1)),e("span",ct,l(m(s.credit.amount,s.credit.currency)),1)]),e("div",mt,[t[16]||(t[16]=e("span",{class:"text-sm text-muted-foreground"},"Applied Amount",-1)),e("span",ut,l(m(s.credit.amount-y.value,s.credit.currency)),1)]),e("div",vt,[t[17]||(t[17]=e("span",{class:"text-sm text-muted-foreground"},"Remaining Balance",-1)),e("span",pt,l(m(y.value,s.credit.currency)),1)]),e("div",ft,[e("div",bt,[t[18]||(t[18]=e("span",null,"Status",-1)),o(d(A),{variant:C(s.credit.status)},{default:a(()=>[c(l(s.credit.status),1)]),_:1},8,["variant"])])])])]),$.value?v("",!0):(n(),u("div",yt,[...t[20]||(t[20]=[e("div",{class:"text-sm font-medium text-yellow-800"}," This vendor credit cannot be modified in its current status. ",-1)])]))])]),s.credit.applications&&s.credit.applications.length>0?(n(),u("div",gt,[t[21]||(t[21]=e("div",{class:"text-lg font-semibold mb-4"},"Applied to Bills",-1)),e("div",xt,[o(E,{columns:S,data:V.value},null,8,["data"])])])):(n(),u("div",kt,[t[24]||(t[24]=e("div",{class:"text-lg font-semibold mb-4"},"Applications",-1)),e("div",wt,[t[23]||(t[23]=e("div",{class:"text-sm"},"This credit hasn't been applied to any bills yet.",-1)),x.value?(n(),g(d(p),{key:0,onClick:k,variant:"outline",class:"mt-3"},{default:a(()=>[o(d(_),{class:"mr-2 h-4 w-4"}),t[22]||(t[22]=c(" Apply to Bills ",-1))]),_:1})):v("",!0)])]))]),_:1},8,["title","icon"])],64))}});export{Zt as default};
